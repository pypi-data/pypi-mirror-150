var Qe=Object.defineProperty,Ve=Object.defineProperties;var Ze=Object.getOwnPropertyDescriptors;var Ie=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var Ce=(l,e,t)=>e in l?Qe(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,Me=(l,e)=>{for(var t in e||(e={}))$e.call(e,t)&&Ce(l,t,e[t]);if(Ie)for(var t of Ie(e))xe.call(e,t)&&Ce(l,t,e[t]);return l},Se=(l,e)=>Ve(l,Ze(e));import{S as F,i as W,s as q,a as N,b as d,c as y,d as C,n as M,e as I,f as E,H as P,A as J,ab as he,D as Y,a6 as Ue,ac as ze,W as X,l as U,r as Fe,m as L,aa as et,v as p,y as Q,w as v,z as V,o as tt,E as nt,q as j,u as D,x as T,t as le,k as ge,J as We,G as qe,h as te,j as ce,K as lt,X as it,L as rt,M as at,N as st,O as ot,F as fe}from"./index.b05fc228.js";import{B as Ne}from"./BlockLabel.793ec1e0.js";import{C as ut,i as ct,I as ft,W as dt}from"./Image.svelte_svelte_type_style_lang.fd40630d.js";import{f as Ee}from"./index.6b45e1de.js";import{I as je,C as _t,M as ht}from"./ModifyUpload.dd778074.js";import{U as gt}from"./Upload.b565dee0.js";import{B as mt}from"./Block.69223ac1.js";import{E as wn}from"./Image.0e4bbb3b.js";import"./_commonjsHelpers.88e99c8f.js";import"./styles.d87a390f.js";function pt(l){let e,t;return{c(){e=N("svg"),t=N("path"),d(t,"d","M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","100%"),d(e,"height","100%"),d(e,"viewBox","0 0 24 24"),d(e,"fill","none"),d(e,"stroke","currentColor"),d(e,"stroke-width","1.5"),d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round"),d(e,"class","feather feather-edit-2")},m(n,i){y(n,e,i),C(e,t)},p:M,i:M,o:M,d(n){n&&I(e)}}}class De extends F{constructor(e){super(),W(this,e,null,pt,q,{})}}function bt(l){let e,t,n;return{c(){e=N("svg"),t=N("polyline"),n=N("path"),d(t,"points","1 4 1 10 7 10"),d(n,"d","M3.51 15a9 9 0 1 0 2.13-9.36L1 10"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","100%"),d(e,"height","100%"),d(e,"viewBox","0 0 24 24"),d(e,"fill","none"),d(e,"stroke","currentColor"),d(e,"stroke-width","1.5"),d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round"),d(e,"class","feather feather-rotate-ccw")},m(i,r){y(i,e,r),C(e,t),C(e,n)},p:M,i:M,o:M,d(i){i&&I(e)}}}class wt extends F{constructor(e){super(),W(this,e,null,bt,q,{})}}function vt(l){let e,t,n,i;return{c(){e=N("svg"),t=N("rect"),n=N("circle"),i=N("polyline"),d(t,"x","3"),d(t,"y","3"),d(t,"width","18"),d(t,"height","18"),d(t,"rx","2"),d(t,"ry","2"),d(n,"cx","8.5"),d(n,"cy","8.5"),d(n,"r","1.5"),d(i,"points","21 15 16 10 5 21"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","100%"),d(e,"height","100%"),d(e,"viewBox","0 0 24 24"),d(e,"fill","none"),d(e,"stroke","currentColor"),d(e,"stroke-width","1.5"),d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round"),d(e,"class","feather feather-image")},m(r,a){y(r,e,a),C(e,t),C(e,n),C(e,i)},p:M,i:M,o:M,d(r){r&&I(e)}}}class ie extends F{constructor(e){super(),W(this,e,null,vt,q,{})}}function kt(l){let e,t;return{c(){e=E("img"),P(e.src,t=l[0])||d(e,"src",t),d(e,"alt","")},m(n,i){y(n,e,i),l[2](e)},p(n,[i]){i&1&&!P(e.src,t=n[0])&&d(e,"src",t)},i:M,o:M,d(n){n&&I(e),l[2](null)}}}function yt(l,e,t){let{image:n}=e,i;const r=J();he(()=>{const u=new ut(i,{autoCropArea:1,cropend(){const o=u.getCroppedCanvas().toDataURL();r("crop",o)}});return r("crop",n),()=>{u.destroy()}});function a(u){Y[u?"unshift":"push"](()=>{i=u,t(1,i)})}return l.$$set=u=>{"image"in u&&t(0,n=u.image)},[n,i,a]}class It extends F{constructor(e){super(),W(this,e,yt,kt,q,{image:0})}}class Te{constructor(e,t){this.x=e,this.y=t}}class Be extends Te{update(e){this.x=e.x,this.y=e.y}moveByAngle(e,t){const n=e+Math.PI/2;this.x=this.x+Math.sin(n)*t,this.y=this.y-Math.cos(n)*t}equalsTo(e){return this.x===e.x&&this.y===e.y}getDifferenceTo(e){return new Te(this.x-e.x,this.y-e.y)}getDistanceTo(e){const t=this.getDifferenceTo(e);return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}getAngleTo(e){const t=this.getDifferenceTo(e);return Math.atan2(t.y,t.x)}toObject(){return{x:this.x,y:this.y}}}const Ct=30;class Mt{constructor({radius:e=Ct,enabled:t=!0,initialPoint:n={x:0,y:0}}={}){this.radius=e,this._isEnabled=t,this.pointer=new Be(n.x,n.y),this.brush=new Be(n.x,n.y),this.angle=0,this.distance=0,this._hasMoved=!1}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}isEnabled(){return this._isEnabled}setRadius(e){this.radius=e}getRadius(){return this.radius}getBrushCoordinates(){return this.brush.toObject()}getPointerCoordinates(){return this.pointer.toObject()}getBrush(){return this.brush}getPointer(){return this.pointer}getAngle(){return this.angle}getDistance(){return this.distance}brushHasMoved(){return this._hasMoved}update(e,{both:t=!1}={}){return this._hasMoved=!1,this.pointer.equalsTo(e)&&!t?!1:(this.pointer.update(e),t?(this._hasMoved=!0,this.brush.update(e),!0):(this._isEnabled?(this.distance=this.pointer.getDistanceTo(this.brush),this.angle=this.pointer.getAngleTo(this.brush),this.distance>this.radius&&(this.brush.moveByAngle(this.angle,this.distance-this.radius),this._hasMoved=!0)):(this.distance=0,this.angle=0,this.brush.update(e),this._hasMoved=!0),!0))}}function Re(l,e,t){const n=l.slice();return n[40]=e[t].name,n[41]=e[t].zIndex,n[42]=e,n[43]=t,n}function Le(l){let e,t,n;return{c(){e=E("div"),e.textContent="Start drawing",d(e,"class","absolute inset-0 flex items-center justify-center z-40 pointer-events-none touch-none text-gray-400 md:text-xl")},m(i,r){y(i,e,r),n=!0},i(i){n||(Ue(()=>{t||(t=ze(e,Ee,{duration:50},!0)),t.run(1)}),n=!0)},o(i){t||(t=ze(e,Ee,{duration:50},!1)),t.run(0),n=!1},d(i){i&&I(e),i&&t&&t.end()}}}function Ae(l){let e,t,n=l[40],i,r;const a=()=>l[14](e,n),u=()=>l[14](null,n);return{c(){e=E("canvas"),d(e,"key",t=l[40]),X(e,"display","block"),X(e,"position","absolute"),X(e,"z-index",l[41]),X(e,"width",l[0]+"px"),X(e,"height",l[1]+"px")},m(o,f){y(o,e,f),a(),i||(r=[U(e,"mousedown",l[40]==="interface"?l[6]:void 0),U(e,"mousemove",l[40]==="interface"?l[7]:void 0),U(e,"mouseup",l[40]==="interface"?l[8]:void 0),U(e,"mouseout",l[40]==="interface"?l[8]:void 0),U(e,"touchstart",l[40]==="interface"?l[6]:void 0),U(e,"touchmove",l[40]==="interface"?l[7]:void 0),U(e,"touchend",l[40]==="interface"?l[8]:void 0),U(e,"touchcancel",l[40]==="interface"?l[8]:void 0)],i=!0)},p(o,f){l=o,f[0]&1&&X(e,"width",l[0]+"px"),f[0]&2&&X(e,"height",l[1]+"px"),n!==l[40]&&(u(),n=l[40],a())},d(o){o&&I(e),u(),i=!1,Fe(r)}}}function St(l){let e,t,n,i,r=l[4]===0&&Le(),a=l[5],u=[];for(let o=0;o<a.length;o+=1)u[o]=Ae(Re(l,a,o));return{c(){e=E("div"),r&&r.c(),t=L();for(let o=0;o<u.length;o+=1)u[o].c();d(e,"class","touch-none relative bg-red-500 h-full w-full"),Ue(()=>l[16].call(e))},m(o,f){y(o,e,f),r&&r.m(e,null),C(e,t);for(let s=0;s<u.length;s+=1)u[s].m(e,null);l[15](e),n=et(e,l[16].bind(e)),i=!0},p(o,f){if(o[4]===0?r?f[0]&16&&p(r,1):(r=Le(),r.c(),p(r,1),r.m(e,t)):r&&(Q(),v(r,1,1,()=>{r=null}),V()),f[0]&487){a=o[5];let s;for(s=0;s<a.length;s+=1){const _=Re(o,a,s);u[s]?u[s].p(_,f):(u[s]=Ae(_),u[s].c(),u[s].m(e,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=a.length}},i(o){i||(p(r),i=!0)},o(o){v(r),i=!1},d(o){o&&I(e),r&&r.d(),tt(u,o),l[15](null),n()}}}let ne=50,de="#090f1f",_e="#aaa";function zt(l,e){return{x:l.x+(e.x-l.x)/2,y:l.y+(e.y-l.y)/2}}function Et(l,e,t){const n=J();let{value:i}=e,r,a=400,u=400;const o=[{name:"interface",zIndex:15},{name:"drawing",zIndex:11},{name:"temp",zIndex:12}];let f={},s={},_=[],h=[],k=!0,O=!0,B=!1,A=!1,S=null,H=null,m=null,Z=null,G=0;he(()=>{Object.keys(f).forEach(c=>{s[c]=f[c].getContext("2d")}),S=new Mt({radius:ne/1.5,enabled:!0,initialPoint:{x:window.innerWidth/2,y:window.innerHeight/2}}),H=ne,Z=new ct((c,g)=>Xe(c,g)),Z.observe(m),ue(),t(13,r=!0),window.setTimeout(()=>{const c=window.innerWidth/2,g=window.innerHeight/2;S.update({x:c-H/4,y:g},{both:!0}),S.update({x:c+H/4,y:g},{both:!1}),k=!0,O=!0,$()},100)}),nt(()=>{t(13,r=!1),Z.unobserve(m)});function re(){const c=h.slice(0,-1);$(),se({lines:c}),t(4,G=h.length),ke()}let ae=()=>JSON.stringify({lines:h,width:a,height:u}),w=c=>{if(typeof c!="string")throw new Error("save_data needs to be of type string!");const{lines:g,width:b,height:z}=JSON.parse(c);if(!g||typeof g.push!="function")throw new Error("save_data.lines needs to be an array!");if($(),b===a&&z===u)se({lines:g});else{const R=a/b,K=u/z;se({lines:g.map(x=>Se(Me({},x),{points:x.points.map(ee=>({x:ee.x*R,y:ee.y*K})),brush_radius:x.brush_radius}))})}},se=({lines:c})=>{c.forEach(g=>{const{points:b,brush_color:z,brush_radius:R}=g;we({points:b,brush_color:z,brush_radius:R}),_=b,ve()})},Pe=c=>{c.preventDefault(),A=!0;const{x:g,y:b}=pe(c);c.touches&&c.touches.length>0&&S.update({x:g,y:b},{both:!0}),be(g,b),t(4,G+=1)},me=c=>{c.preventDefault();const{x:g,y:b}=pe(c);be(g,b)},He=c=>{c.preventDefault(),me(c),B=!1,A=!1,ve()},Xe=c=>{const g=ae();for(const b of c){const{width:z,height:R}=b.contentRect;oe(f.interface,z,R),oe(f.drawing,z,R),oe(f.temp,z,R),ue({once:!0})}w(g)},oe=(c,g,b)=>{c.width=g*3,c.height=b*3,c.style.width=g,c.style.height=b},pe=c=>{const g=f.interface.getBoundingClientRect();let b=c.clientX,z=c.clientY;return c.changedTouches&&c.changedTouches.length>0&&(b=c.changedTouches[0].clientX,z=c.changedTouches[0].clientY),{x:b-g.left,y:z-g.top}},be=(c,g)=>{S.update({x:c*3,y:g*3});const b=!S.isEnabled();(A&&!B||b&&A)&&(B=!0,_.push(S.brush.toObject())),B&&(_.push(S.brush.toObject()),we({points:_,brush_color:de,brush_radius:ne})),k=!0},we=({points:c,brush_color:g,brush_radius:b})=>{s.temp.lineJoin="round",s.temp.lineCap="round",s.temp.strokeStyle=g,s.temp.clearRect(0,0,s.temp.canvas.width,s.temp.canvas.height),s.temp.lineWidth=b;let z=c[0],R=c[1];s.temp.moveTo(R.x,R.y),s.temp.beginPath();for(var K=1,x=c.length;K<x;K++){var ee=zt(z,R);s.temp.quadraticCurveTo(z.x,z.y,ee.x,ee.y),z=c[K],R=c[K+1]}s.temp.lineTo(z.x,z.y),s.temp.stroke()},ve=()=>{if(_.length<2)return;h.push({points:[..._],brush_color:de,brush_radius:ne}),_.length=0;const c=f.temp.width,g=f.temp.height;s.drawing.drawImage(f.temp,0,0,c,g),s.temp.clearRect(0,0,c,g),ke()},ke=()=>{n("change",ye())};function $(){h=[],O=!0,s.drawing.clearRect(0,0,f.drawing.width,f.drawing.height),s.temp.clearRect(0,0,f.temp.width,f.temp.height),s.drawing.fillStyle="#FFFFFF",s.drawing.fillRect(0,0,f.drawing.width,f.drawing.height),t(4,G=0)}let ue=({once:c=!1}={})=>{if(k||O){const g=S.getPointerCoordinates(),b=S.getBrushCoordinates();Ye(s.interface,g,b),k=!1,O=!1}c||window.requestAnimationFrame(()=>{ue()})},Ye=(c,g,b)=>{c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.fillStyle=de,c.arc(b.x,b.y,ne/2,0,Math.PI*2,!0),c.fill(),c.beginPath(),c.fillStyle=_e,c.arc(g.x,g.y,4,0,Math.PI*2,!0),c.fill(),S.isEnabled()&&(c.beginPath(),c.lineWidth=2,c.lineCap="round",c.setLineDash([2,4]),c.strokeStyle=_e,c.stroke()),c.beginPath(),c.fillStyle=_e,c.arc(b.x,b.y,2,0,Math.PI*2,!0),c.fill()};function ye(){return f.drawing.toDataURL("image/png")}function Je(c,g){Y[c?"unshift":"push"](()=>{f[g]=c,t(2,f)})}function Ge(c){Y[c?"unshift":"push"](()=>{m=c,t(3,m)})}function Ke(){a=this.offsetWidth,u=this.offsetHeight,t(0,a),t(1,u)}return l.$$set=c=>{"value"in c&&t(9,i=c.value)},l.$$.update=()=>{l.$$.dirty[0]&8704&&r&&!i&&$()},[a,u,f,m,G,o,Pe,me,He,i,re,$,ye,r,Je,Ge,Ke]}class jt extends F{constructor(e){super(),W(this,e,Et,St,q,{value:9,undo:10,clear:11,get_image_data:12},null,[-1,-1])}get undo(){return this.$$.ctx[10]}get clear(){return this.$$.ctx[11]}get get_image_data(){return this.$$.ctx[12]}}function Dt(l){let e,t,n,i,r;return t=new je({props:{Icon:wt}}),t.$on("click",l[1]),i=new je({props:{Icon:_t}}),i.$on("click",l[2]),{c(){e=E("div"),j(t.$$.fragment),n=L(),j(i.$$.fragment),d(e,"class","z-50 top-2 right-2 justify-end flex gap-1 absolute")},m(a,u){y(a,e,u),D(t,e,null),C(e,n),D(i,e,null),r=!0},p:M,i(a){r||(p(t.$$.fragment,a),p(i.$$.fragment,a),r=!0)},o(a){v(t.$$.fragment,a),v(i.$$.fragment,a),r=!1},d(a){a&&I(e),T(t),T(i)}}}function Tt(l){const e=J();return[e,()=>e("undo"),()=>e("clear")]}class Bt extends F{constructor(e){super(),W(this,e,Tt,Dt,q,{})}}function Rt(l){let e,t,n,i,r,a,u,o,f;return{c(){e=E("div"),t=E("div"),n=E("button"),n.textContent="Save",i=L(),r=E("button"),r.textContent="Cancel",a=L(),u=E("div"),d(t,"class","image_editor_buttons"),d(e,"class","fixed w-screen h-screen top-0 left-0 bg-black bg-opacity-50 z-40 flex flex-col justify-center items-center")},m(s,_){y(s,e,_),C(e,t),C(t,n),C(t,i),C(t,r),C(e,a),C(e,u),l[6](u),o||(f=[U(n,"click",l[4]),U(r,"click",l[5])],o=!0)},p:M,i:M,o:M,d(s){s&&I(e),l[6](null),o=!1,Fe(f)}}}function Lt(l,e,t){let{value:n}=e,i,r;const a=J();function u(){t(1,r=new ft(i,{usageStatistics:!1,includeUI:{loadImage:{path:n,name:"Edit Image"},menuBarPosition:"left",uiSize:{width:"800px",height:"600px"}},cssMaxWidth:700,cssMaxHeight:500,selectionStyle:{cornerSize:20,rotatingPointOffset:70}}))}he(u);const o=()=>a("save",r.toDataURL()),f=()=>a("cancel");function s(_){Y[_?"unshift":"push"](()=>{i=_,t(0,i)})}return l.$$set=_=>{"value"in _&&t(3,n=_.value)},[i,r,a,n,o,f,s]}class At extends F{constructor(e){super(),W(this,e,Lt,Rt,q,{value:3})}}function Ot(l){let e,t;return{c(){e=E("img"),d(e,"class","w-full h-full object-contain svelte-i8mnhh"),P(e.src,t=l[0])||d(e,"src",t),d(e,"alt","")},m(n,i){y(n,e,i)},p(n,i){i&1&&!P(e.src,t=n[0])&&d(e,"src",t)},i:M,o:M,d(n){n&&I(e)}}}function Ut(l){let e,t,n,i,r,a,u=l[9]==="edit"&&Oe(l);return t=new ht({props:{editable:!0}}),t.$on("edit",l[19]),t.$on("clear",l[12]),{c(){u&&u.c(),e=L(),j(t.$$.fragment),n=L(),i=E("img"),d(i,"class","w-full h-full object-contain svelte-i8mnhh"),P(i.src,r=l[0])||d(i,"src",r),d(i,"alt","")},m(o,f){u&&u.m(o,f),y(o,e,f),D(t,o,f),y(o,n,f),y(o,i,f),a=!0},p(o,f){o[9]==="edit"?u?(u.p(o,f),f&512&&p(u,1)):(u=Oe(o),u.c(),p(u,1),u.m(e.parentNode,e)):u&&(Q(),v(u,1,1,()=>{u=null}),V()),(!a||f&1&&!P(i.src,r=o[0]))&&d(i,"src",r)},i(o){a||(p(u),p(t.$$.fragment,o),a=!0)},o(o){v(u),v(t.$$.fragment,o),a=!1},d(o){u&&u.d(o),o&&I(e),T(t,o),o&&I(n),o&&I(i)}}}function Ft(l){let e,t;return e=new It({props:{image:l[0]}}),e.$on("crop",l[13]),{c(){j(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,i){const r={};i&1&&(r.image=n[0]),e.$set(r)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function Wt(l){let e,t,n,i;const r=[Pt,Nt],a=[];function u(o,f){return o[3]==="upload"?0:o[3]==="webcam"?1:-1}return~(e=u(l))&&(t=a[e]=r[e](l)),{c(){t&&t.c(),n=ge()},m(o,f){~e&&a[e].m(o,f),y(o,n,f),i=!0},p(o,f){let s=e;e=u(o),e===s?~e&&a[e].p(o,f):(t&&(Q(),v(a[s],1,1,()=>{a[s]=null}),V()),~e?(t=a[e],t?t.p(o,f):(t=a[e]=r[e](o),t.c()),p(t,1),t.m(n.parentNode,n)):t=null)},i(o){i||(p(t),i=!0)},o(o){v(t),i=!1},d(o){~e&&a[e].d(o),o&&I(n)}}}function qt(l){let e,t,n,i;e=new Bt({}),e.$on("undo",l[14]),e.$on("clear",l[15]);let r={value:l[0]};return n=new jt({props:r}),l[16](n),n.$on("change",l[13]),{c(){j(e.$$.fragment),t=L(),j(n.$$.fragment)},m(a,u){D(e,a,u),y(a,t,u),D(n,a,u),i=!0},p(a,u){const o={};u&1&&(o.value=a[0]),n.$set(o)},i(a){i||(p(e.$$.fragment,a),p(n.$$.fragment,a),i=!0)},o(a){v(e.$$.fragment,a),v(n.$$.fragment,a),i=!1},d(a){T(e,a),a&&I(t),l[16](null),T(n,a)}}}function Oe(l){let e,t;return e=new At({props:{value:l[0]}}),e.$on("cancel",l[18]),e.$on("save",l[13]),{c(){j(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,i){const r={};i&1&&(r.value=n[0]),e.$set(r)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function Nt(l){let e,t;return e=new dt({}),e.$on("capture",l[13]),{c(){j(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p:M,i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function Pt(l){let e,t,n;function i(a){l[17](a)}let r={filetype:"image/x-png,image/gif,image/jpeg",include_file_metadata:!1,$$slots:{default:[Ht]},$$scope:{ctx:l}};return l[8]!==void 0&&(r.dragging=l[8]),e=new gt({props:r}),Y.push(()=>We(e,"dragging",i)),e.$on("load",l[11]),{c(){j(e.$$.fragment)},m(a,u){D(e,a,u),n=!0},p(a,u){const o={};u&2097376&&(o.$$scope={dirty:u,ctx:a}),!t&&u&256&&(t=!0,o.dragging=a[8],qe(()=>t=!1)),e.$set(o)},i(a){n||(p(e.$$.fragment,a),n=!0)},o(a){v(e.$$.fragment,a),n=!1},d(a){T(e,a)}}}function Ht(l){let e,t,n,i,r,a,u,o,f;return{c(){e=E("div"),t=te(l[5]),n=L(),i=E("span"),r=te("- "),a=te(l[6]),u=te(" -"),o=L(),f=te(l[7]),d(i,"class","text-gray-300 svelte-i8mnhh"),d(e,"class","flex flex-col svelte-i8mnhh")},m(s,_){y(s,e,_),C(e,t),C(e,n),C(e,i),C(i,r),C(i,a),C(i,u),C(e,o),C(e,f)},p(s,_){_&32&&ce(t,s[5]),_&64&&ce(a,s[6]),_&128&&ce(f,s[7])},d(s){s&&I(e)}}}function Xt(l){let e,t,n,i,r,a;e=new Ne({props:{show_label:l[2],Icon:l[3]==="canvas"?De:ie,label:l[1]||(l[3]==="canvas"?"Sketch":"Image")}});const u=[qt,Wt,Ft,Ut,Ot],o=[];function f(s,_){return s[3]==="canvas"?0:s[0]===null?1:s[4]==="select"?2:s[4]==="editor"?3:4}return i=f(l),r=o[i]=u[i](l),{c(){j(e.$$.fragment),t=L(),n=E("div"),r.c(),d(n,"class","svelte-i8mnhh"),le(n,"bg-gray-200",l[0]),le(n,"h-60",l[3]!=="webcam")},m(s,_){D(e,s,_),y(s,t,_),y(s,n,_),o[i].m(n,null),a=!0},p(s,[_]){const h={};_&4&&(h.show_label=s[2]),_&8&&(h.Icon=s[3]==="canvas"?De:ie),_&10&&(h.label=s[1]||(s[3]==="canvas"?"Sketch":"Image")),e.$set(h);let k=i;i=f(s),i===k?o[i].p(s,_):(Q(),v(o[k],1,1,()=>{o[k]=null}),V(),r=o[i],r?r.p(s,_):(r=o[i]=u[i](s),r.c()),p(r,1),r.m(n,null)),_&1&&le(n,"bg-gray-200",s[0]),_&8&&le(n,"h-60",s[3]!=="webcam")},i(s){a||(p(e.$$.fragment,s),p(r),a=!0)},o(s){v(e.$$.fragment,s),v(r),a=!1},d(s){T(e,s),s&&I(t),s&&I(n),o[i].d()}}}function Yt(l,e,t){let{value:n}=e,{label:i=void 0}=e,{show_label:r}=e,{source:a="upload"}=e,{tool:u="editor"}=e,{drop_text:o="Drop an image file"}=e,{or_text:f="or"}=e,{upload_text:s="click to upload"}=e,_="view",h;function k({detail:w}){t(0,n=w)}function O({detail:w}){t(0,n=null),A("clear")}function B({detail:w}){t(0,n=w),t(9,_="view"),A("edit")}const A=J();let S=!1;const H=()=>h.undo(),m=()=>h.clear();function Z(w){Y[w?"unshift":"push"](()=>{h=w,t(10,h)})}function G(w){S=w,t(8,S)}const re=()=>t(9,_="view"),ae=()=>t(9,_="edit");return l.$$set=w=>{"value"in w&&t(0,n=w.value),"label"in w&&t(1,i=w.label),"show_label"in w&&t(2,r=w.show_label),"source"in w&&t(3,a=w.source),"tool"in w&&t(4,u=w.tool),"drop_text"in w&&t(5,o=w.drop_text),"or_text"in w&&t(6,f=w.or_text),"upload_text"in w&&t(7,s=w.upload_text)},l.$$.update=()=>{l.$$.dirty&1&&A("change",n),l.$$.dirty&256&&A("drag",S)},[n,i,r,a,u,o,f,s,S,_,h,k,O,B,H,m,Z,G,re,ae]}class Jt extends F{constructor(e){super(),W(this,e,Yt,Xt,q,{value:0,label:1,show_label:2,source:3,tool:4,drop_text:5,or_text:6,upload_text:7})}}function Gt(l){let e,t;return{c(){e=E("img"),d(e,"class","w-full h-full object-contain"),P(e.src,t=l[0])||d(e,"src",t),d(e,"alt","")},m(n,i){y(n,e,i)},p(n,i){i&1&&!P(e.src,t=n[0])&&d(e,"src",t)},i:M,o:M,d(n){n&&I(e)}}}function Kt(l){let e,t,n,i;return n=new ie({}),{c(){e=E("div"),t=E("div"),j(n.$$.fragment),d(t,"class","h-5 dark:text-white opacity-50"),d(e,"class","min-h-[15rem] flex justify-center items-center")},m(r,a){y(r,e,a),C(e,t),D(n,t,null),i=!0},p:M,i(r){i||(p(n.$$.fragment,r),i=!0)},o(r){v(n.$$.fragment,r),i=!1},d(r){r&&I(e),T(n)}}}function Qt(l){let e,t,n,i,r,a;e=new Ne({props:{show_label:l[2],Icon:ie,label:l[1]||"Image"}});const u=[Kt,Gt],o=[];function f(s,_){return s[0]===null?0:1}return n=f(l),i=o[n]=u[n](l),{c(){j(e.$$.fragment),t=L(),i.c(),r=ge()},m(s,_){D(e,s,_),y(s,t,_),o[n].m(s,_),y(s,r,_),a=!0},p(s,[_]){const h={};_&4&&(h.show_label=s[2]),_&2&&(h.label=s[1]||"Image"),e.$set(h);let k=n;n=f(s),n===k?o[n].p(s,_):(Q(),v(o[k],1,1,()=>{o[k]=null}),V(),i=o[n],i?i.p(s,_):(i=o[n]=u[n](s),i.c()),p(i,1),i.m(r.parentNode,r))},i(s){a||(p(e.$$.fragment,s),p(i),a=!0)},o(s){v(e.$$.fragment,s),v(i),a=!1},d(s){T(e,s),s&&I(t),o[n].d(s),s&&I(r)}}}function Vt(l,e,t){let{value:n}=e,{label:i=void 0}=e,{show_label:r}=e;const a=J();return l.$$set=u=>{"value"in u&&t(0,n=u.value),"label"in u&&t(1,i=u.label),"show_label"in u&&t(2,r=u.show_label)},l.$$.update=()=>{l.$$.dirty&1&&n&&a("change",n)},[n,i,r]}class Zt extends F{constructor(e){super(),W(this,e,Vt,Qt,q,{value:0,label:1,show_label:2})}}function $t(l){let e,t,n;function i(a){l[10](a)}let r={source:l[2],tool:l[3],label:l[4],show_label:l[5],drop_text:l[9]("interface.drop_image"),or_text:l[9]("or"),upload_text:l[9]("interface.click_to_upload")};return l[0]!==void 0&&(r.value=l[0]),e=new Jt({props:r}),Y.push(()=>We(e,"value",i)),e.$on("edit",l[11]),e.$on("clear",l[12]),e.$on("change",l[13]),e.$on("drag",l[14]),{c(){j(e.$$.fragment)},m(a,u){D(e,a,u),n=!0},p(a,u){const o={};u&4&&(o.source=a[2]),u&8&&(o.tool=a[3]),u&16&&(o.label=a[4]),u&32&&(o.show_label=a[5]),u&512&&(o.drop_text=a[9]("interface.drop_image")),u&512&&(o.or_text=a[9]("or")),u&512&&(o.upload_text=a[9]("interface.click_to_upload")),!t&&u&1&&(t=!0,o.value=a[0],qe(()=>t=!1)),e.$set(o)},i(a){n||(p(e.$$.fragment,a),n=!0)},o(a){v(e.$$.fragment,a),n=!1},d(a){T(e,a)}}}function xt(l){let e,t;return e=new Zt({props:{value:l[0],label:l[4],show_label:l[5]}}),{c(){j(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,i){const r={};i&1&&(r.value=n[0]),i&16&&(r.label=n[4]),i&32&&(r.show_label=n[5]),e.$set(r)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function en(l){let e,t,n,i,r,a;const u=[l[6]];let o={};for(let h=0;h<u.length;h+=1)o=rt(o,u[h]);e=new at({props:o});const f=[xt,$t],s=[];function _(h,k){return h[7]==="static"?0:1}return n=_(l),i=s[n]=f[n](l),{c(){j(e.$$.fragment),t=L(),i.c(),r=ge()},m(h,k){D(e,h,k),y(h,t,k),s[n].m(h,k),y(h,r,k),a=!0},p(h,k){const O=k&64?st(u,[ot(h[6])]):{};e.$set(O);let B=n;n=_(h),n===B?s[n].p(h,k):(Q(),v(s[B],1,1,()=>{s[B]=null}),V(),i=s[n],i?i.p(h,k):(i=s[n]=f[n](h),i.c()),p(i,1),i.m(r.parentNode,r))},i(h){a||(p(e.$$.fragment,h),p(i),a=!0)},o(h){v(e.$$.fragment,h),v(i),a=!1},d(h){T(e,h),h&&I(t),s[n].d(h),h&&I(r)}}}function tn(l){let e,t;return e=new mt({props:{variant:l[7]==="dynamic"&&l[0]===null&&l[2]==="upload"?"dashed":"solid",color:l[8]?"green":"grey",padding:!1,elem_id:l[1],$$slots:{default:[en]},$$scope:{ctx:l}}}),{c(){j(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,[i]){const r={};i&133&&(r.variant=n[7]==="dynamic"&&n[0]===null&&n[2]==="upload"?"dashed":"solid"),i&256&&(r.color=n[8]?"green":"grey"),i&2&&(r.elem_id=n[1]),i&66557&&(r.$$scope={dirty:i,ctx:n}),e.$set(r)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function nn(l,e,t){let n;lt(l,it,m=>t(9,n=m));let{elem_id:i=""}=e,{value:r=null}=e,{source:a="upload"}=e,{tool:u="editor"}=e,{label:o}=e,{show_label:f}=e,{loading_status:s}=e,{mode:_}=e;const h=J();let k;function O(m){r=m,t(0,r)}function B(m){fe.call(this,l,m)}function A(m){fe.call(this,l,m)}function S(m){fe.call(this,l,m)}const H=({detail:m})=>t(8,k=m);return l.$$set=m=>{"elem_id"in m&&t(1,i=m.elem_id),"value"in m&&t(0,r=m.value),"source"in m&&t(2,a=m.source),"tool"in m&&t(3,u=m.tool),"label"in m&&t(4,o=m.label),"show_label"in m&&t(5,f=m.show_label),"loading_status"in m&&t(6,s=m.loading_status),"mode"in m&&t(7,_=m.mode)},l.$$.update=()=>{l.$$.dirty&1&&h("change")},[r,i,a,u,o,f,s,_,k,n,O,B,A,S,H]}class ln extends F{constructor(e){super(),W(this,e,nn,tn,q,{elem_id:1,value:0,source:2,tool:3,label:4,show_label:5,loading_status:6,mode:7})}}var gn=ln;const mn=["static","dynamic"];export{gn as Component,wn as ExampleComponent,mn as modes};
