var Je=Object.defineProperty,Ge=Object.defineProperties;var Ke=Object.getOwnPropertyDescriptors;var Ie=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable;var Ce=(l,e,n)=>e in l?Je(l,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[e]=n,Me=(l,e)=>{for(var n in e||(e={}))Ze.call(e,n)&&Ce(l,n,e[n]);if(Ie)for(var n of Ie(e))Qe.call(e,n)&&Ce(l,n,e[n]);return l},Se=(l,e)=>Ge(l,Ke(e));import{S as O,i as q,s as W,a as P,b as d,c as y,d as C,n as M,e as I,f as E,G as X,A as G,Z as _e,C as J,Y as H,l as F,r as Ae,m as L,a8 as Ve,ac as xe,o as $e,D as et,q as j,u as D,v,w as k,x as T,t as le,y as te,z as ne,k as ge,I as Ue,F as Fe,h as $,j as ce,J as tt,X as nt,K as lt,L as it,M as st,E as fe}from"./index.d34ee087.js";import{B as Oe}from"./BlockLabel.03fee06b.js";import{C as at,i as rt,I as ot,W as ut}from"./Image.svelte_svelte_type_style_lang.2d09b58a.js";import{I as ze,C as ct,M as ft}from"./ModifyUpload.7c25eae7.js";import{U as dt}from"./Upload.bc8798cb.js";import{B as ht}from"./Block.300bc1a3.js";import{S as _t}from"./StatusTracker.52631f55.js";import{E as mn}from"./Image.6b9f3c19.js";import"./_commonjsHelpers.88e99c8f.js";function gt(l){let e,n;return{c(){e=P("svg"),n=P("path"),d(n,"d","M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","100%"),d(e,"height","100%"),d(e,"viewBox","0 0 24 24"),d(e,"fill","none"),d(e,"stroke","currentColor"),d(e,"stroke-width","1.5"),d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round"),d(e,"class","feather feather-edit-2")},m(t,i){y(t,e,i),C(e,n)},p:M,i:M,o:M,d(t){t&&I(e)}}}class Ee extends O{constructor(e){super(),q(this,e,null,gt,W,{})}}function mt(l){let e,n,t;return{c(){e=P("svg"),n=P("polyline"),t=P("path"),d(n,"points","1 4 1 10 7 10"),d(t,"d","M3.51 15a9 9 0 1 0 2.13-9.36L1 10"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","100%"),d(e,"height","100%"),d(e,"viewBox","0 0 24 24"),d(e,"fill","none"),d(e,"stroke","currentColor"),d(e,"stroke-width","1.5"),d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round"),d(e,"class","feather feather-rotate-ccw")},m(i,r){y(i,e,r),C(e,n),C(e,t)},p:M,i:M,o:M,d(i){i&&I(e)}}}class bt extends O{constructor(e){super(),q(this,e,null,mt,W,{})}}function pt(l){let e,n,t,i;return{c(){e=P("svg"),n=P("rect"),t=P("circle"),i=P("polyline"),d(n,"x","3"),d(n,"y","3"),d(n,"width","18"),d(n,"height","18"),d(n,"rx","2"),d(n,"ry","2"),d(t,"cx","8.5"),d(t,"cy","8.5"),d(t,"r","1.5"),d(i,"points","21 15 16 10 5 21"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","100%"),d(e,"height","100%"),d(e,"viewBox","0 0 24 24"),d(e,"fill","none"),d(e,"stroke","currentColor"),d(e,"stroke-width","1.5"),d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round"),d(e,"class","feather feather-image")},m(r,s){y(r,e,s),C(e,n),C(e,t),C(e,i)},p:M,i:M,o:M,d(r){r&&I(e)}}}class ie extends O{constructor(e){super(),q(this,e,null,pt,W,{})}}function wt(l){let e,n;return{c(){e=E("img"),X(e.src,n=l[0])||d(e,"src",n),d(e,"alt","")},m(t,i){y(t,e,i),l[2](e)},p(t,[i]){i&1&&!X(e.src,n=t[0])&&d(e,"src",n)},i:M,o:M,d(t){t&&I(e),l[2](null)}}}function vt(l,e,n){let{image:t}=e,i;const r=G();_e(()=>{const o=new at(i,{autoCropArea:1,cropend(){const a=o.getCroppedCanvas().toDataURL();r("crop",a)}});return r("crop",t),()=>{o.destroy()}});function s(o){J[o?"unshift":"push"](()=>{i=o,n(1,i)})}return l.$$set=o=>{"image"in o&&n(0,t=o.image)},[t,i,s]}class kt extends O{constructor(e){super(),q(this,e,vt,wt,W,{image:0})}}class je{constructor(e,n){this.x=e,this.y=n}}class De extends je{update(e){this.x=e.x,this.y=e.y}moveByAngle(e,n){const t=e+Math.PI/2;this.x=this.x+Math.sin(t)*n,this.y=this.y-Math.cos(t)*n}equalsTo(e){return this.x===e.x&&this.y===e.y}getDifferenceTo(e){return new je(this.x-e.x,this.y-e.y)}getDistanceTo(e){const n=this.getDifferenceTo(e);return Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))}getAngleTo(e){const n=this.getDifferenceTo(e);return Math.atan2(n.y,n.x)}toObject(){return{x:this.x,y:this.y}}}const yt=30;class It{constructor({radius:e=yt,enabled:n=!0,initialPoint:t={x:0,y:0}}={}){this.radius=e,this._isEnabled=n,this.pointer=new De(t.x,t.y),this.brush=new De(t.x,t.y),this.angle=0,this.distance=0,this._hasMoved=!1}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}isEnabled(){return this._isEnabled}setRadius(e){this.radius=e}getRadius(){return this.radius}getBrushCoordinates(){return this.brush.toObject()}getPointerCoordinates(){return this.pointer.toObject()}getBrush(){return this.brush}getPointer(){return this.pointer}getAngle(){return this.angle}getDistance(){return this.distance}brushHasMoved(){return this._hasMoved}update(e,{both:n=!1}={}){return this._hasMoved=!1,this.pointer.equalsTo(e)&&!n?!1:(this.pointer.update(e),n?(this._hasMoved=!0,this.brush.update(e),!0):(this._isEnabled?(this.distance=this.pointer.getDistanceTo(this.brush),this.angle=this.pointer.getAngleTo(this.brush),this.distance>this.radius&&(this.brush.moveByAngle(this.angle,this.distance-this.radius),this._hasMoved=!0)):(this.distance=0,this.angle=0,this.brush.update(e),this._hasMoved=!0),!0))}}function Te(l,e,n){const t=l.slice();return t[40]=e[n].name,t[41]=e[n].zIndex,t[42]=e,t[43]=n,t}function Be(l){let e;return{c(){e=E("div"),e.textContent="Start drawing",d(e,"class","absolute inset-0 flex items-center justify-center z-40 pointer-events-none touch-none text-gray-400 md:text-xl")},m(n,t){y(n,e,t)},d(n){n&&I(e)}}}function Re(l){let e,n,t=l[40],i,r;const s=()=>l[14](e,t),o=()=>l[14](null,t);return{c(){e=E("canvas"),d(e,"key",n=l[40]),H(e,"display","block"),H(e,"position","absolute"),H(e,"z-index",l[41]),H(e,"width",l[0]+"px"),H(e,"height",l[1]+"px")},m(a,c){y(a,e,c),s(),i||(r=[F(e,"mousedown",l[40]==="interface"?l[6]:void 0),F(e,"mousemove",l[40]==="interface"?l[7]:void 0),F(e,"mouseup",l[40]==="interface"?l[8]:void 0),F(e,"mouseout",l[40]==="interface"?l[8]:void 0),F(e,"touchstart",l[40]==="interface"?l[6]:void 0),F(e,"touchmove",l[40]==="interface"?l[7]:void 0),F(e,"touchend",l[40]==="interface"?l[8]:void 0),F(e,"touchcancel",l[40]==="interface"?l[8]:void 0)],i=!0)},p(a,c){l=a,c[0]&1&&H(e,"width",l[0]+"px"),c[0]&2&&H(e,"height",l[1]+"px"),t!==l[40]&&(o(),t=l[40],s())},d(a){a&&I(e),o(),i=!1,Ae(r)}}}function Ct(l){let e,n,t,i=!l[3]&&Be(),r=l[5],s=[];for(let o=0;o<r.length;o+=1)s[o]=Re(Te(l,r,o));return{c(){e=E("div"),i&&i.c(),n=L();for(let o=0;o<s.length;o+=1)s[o].c();d(e,"class","touch-none relative bg-red-500 h-full w-full"),Ve(()=>l[16].call(e))},m(o,a){y(o,e,a),i&&i.m(e,null),C(e,n);for(let c=0;c<s.length;c+=1)s[c].m(e,null);l[15](e),t=xe(e,l[16].bind(e))},p(o,a){if(o[3]?i&&(i.d(1),i=null):i||(i=Be(),i.c(),i.m(e,n)),a[0]&487){r=o[5];let c;for(c=0;c<r.length;c+=1){const u=Te(o,r,c);s[c]?s[c].p(u,a):(s[c]=Re(u),s[c].c(),s[c].m(e,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=r.length}},i:M,o:M,d(o){o&&I(e),i&&i.d(),$e(s,o),l[15](null),t()}}}let ee=50,de="#090f1f",he="#aaa";function Mt(l,e){return{x:l.x+(e.x-l.x)/2,y:l.y+(e.y-l.y)/2}}function St(l,e,n){const t=G();let{value:i}=e,r,s=400,o=400;const a=[{name:"interface",zIndex:15},{name:"drawing",zIndex:11},{name:"temp",zIndex:12}];let c={},u={},h=[],_=[],p=!0,A=!0,B=!1,N=!1,U=!1,S=null,m=null,Y=null,Z=null;_e(()=>{Object.keys(c).forEach(f=>{u[f]=c[f].getContext("2d")}),S=new It({radius:ee/1.5,enabled:!0,initialPoint:{x:window.innerWidth/2,y:window.innerHeight/2}}),m=ee,Z=new rt((f,g)=>Pe(f,g)),Z.observe(Y),ue(),n(13,r=!0),window.setTimeout(()=>{const f=window.innerWidth/2,g=window.innerHeight/2;S.update({x:f-m/4,y:g},{both:!0}),S.update({x:f+m/4,y:g},{both:!1}),p=!0,A=!0,Q()},100)}),et(()=>{n(13,r=!1),Z.unobserve(Y)});function se(){const f=_.slice(0,-1);Q(),b({lines:f}),ke()}let ae=()=>JSON.stringify({lines:_,width:s,height:o}),re=f=>{if(typeof f!="string")throw new Error("save_data needs to be of type string!");const{lines:g,width:w,height:z}=JSON.parse(f);if(!g||typeof g.push!="function")throw new Error("save_data.lines needs to be an array!");if(Q(),w===s&&z===o)b({lines:g});else{const R=s/w,K=o/z;b({lines:g.map(V=>Se(Me({},V),{points:V.points.map(x=>({x:x.x*R,y:x.y*K})),brush_radius:V.brush_radius}))})}},b=({lines:f})=>{f.forEach(g=>{const{points:w,brush_color:z,brush_radius:R}=g;we({points:w,brush_color:z,brush_radius:R}),h=w,ve()})},qe=f=>{f.preventDefault(),n(3,U=!0),N=!0;const{x:g,y:w}=be(f);f.touches&&f.touches.length>0&&S.update({x:g,y:w},{both:!0}),pe(g,w)},me=f=>{f.preventDefault();const{x:g,y:w}=be(f);pe(g,w)},We=f=>{f.preventDefault(),me(f),B=!1,N=!1,ve()},Pe=f=>{const g=ae();for(const w of f){const{width:z,height:R}=w.contentRect;oe(c.interface,z,R),oe(c.drawing,z,R),oe(c.temp,z,R),ue({once:!0})}re(g)},oe=(f,g,w)=>{f.width=g*3,f.height=w*3,f.style.width=g,f.style.height=w},be=f=>{const g=c.interface.getBoundingClientRect();let w=f.clientX,z=f.clientY;return f.changedTouches&&f.changedTouches.length>0&&(w=f.changedTouches[0].clientX,z=f.changedTouches[0].clientY),{x:w-g.left,y:z-g.top}},pe=(f,g)=>{S.update({x:f*3,y:g*3});const w=!S.isEnabled();(N&&!B||w&&N)&&(B=!0,h.push(S.brush.toObject())),B&&(h.push(S.brush.toObject()),we({points:h,brush_color:de,brush_radius:ee})),p=!0},we=({points:f,brush_color:g,brush_radius:w})=>{u.temp.lineJoin="round",u.temp.lineCap="round",u.temp.strokeStyle=g,u.temp.clearRect(0,0,u.temp.canvas.width,u.temp.canvas.height),u.temp.lineWidth=w;let z=f[0],R=f[1];u.temp.moveTo(R.x,R.y),u.temp.beginPath();for(var K=1,V=f.length;K<V;K++){var x=Mt(z,R);u.temp.quadraticCurveTo(z.x,z.y,x.x,x.y),z=f[K],R=f[K+1]}u.temp.lineTo(z.x,z.y),u.temp.stroke()},ve=()=>{if(h.length<2)return;_.push({points:[...h],brush_color:de,brush_radius:ee}),h.length=0;const f=c.temp.width,g=c.temp.height;u.drawing.drawImage(c.temp,0,0,f,g),u.temp.clearRect(0,0,f,g),ke()},ke=()=>{t("change",ye())};function Q(){n(3,U=!1),_=[],A=!0,u.drawing.clearRect(0,0,c.drawing.width,c.drawing.height),u.temp.clearRect(0,0,c.temp.width,c.temp.height),u.drawing.fillStyle="#FFFFFF",u.drawing.fillRect(0,0,c.drawing.width,c.drawing.height)}let ue=({once:f=!1}={})=>{if(p||A){const g=S.getPointerCoordinates(),w=S.getBrushCoordinates();Ne(u.interface,g,w),p=!1,A=!1}f||window.requestAnimationFrame(()=>{ue()})},Ne=(f,g,w)=>{f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.fillStyle=de,f.arc(w.x,w.y,ee/2,0,Math.PI*2,!0),f.fill(),f.beginPath(),f.fillStyle=he,f.arc(g.x,g.y,4,0,Math.PI*2,!0),f.fill(),S.isEnabled()&&(f.beginPath(),f.lineWidth=2,f.lineCap="round",f.setLineDash([2,4]),f.strokeStyle=he,f.stroke()),f.beginPath(),f.fillStyle=he,f.arc(w.x,w.y,2,0,Math.PI*2,!0),f.fill()};function ye(){return c.drawing.toDataURL("image/png")}function Xe(f,g){J[f?"unshift":"push"](()=>{c[g]=f,n(2,c)})}function Ye(f){J[f?"unshift":"push"](()=>{Y=f,n(4,Y)})}function He(){s=this.offsetWidth,o=this.offsetHeight,n(0,s),n(1,o)}return l.$$set=f=>{"value"in f&&n(9,i=f.value)},l.$$.update=()=>{l.$$.dirty[0]&8704&&r&&!i&&Q()},[s,o,c,U,Y,a,qe,me,We,i,se,Q,ye,r,Xe,Ye,He]}class zt extends O{constructor(e){super(),q(this,e,St,Ct,W,{value:9,undo:10,clear:11,get_image_data:12},null,[-1,-1])}get undo(){return this.$$.ctx[10]}get clear(){return this.$$.ctx[11]}get get_image_data(){return this.$$.ctx[12]}}function Et(l){let e,n,t,i,r;return n=new ze({props:{Icon:bt}}),n.$on("click",l[1]),i=new ze({props:{Icon:ct}}),i.$on("click",l[2]),{c(){e=E("div"),j(n.$$.fragment),t=L(),j(i.$$.fragment),d(e,"class","z-50 top-2 right-2 justify-end flex gap-1 absolute")},m(s,o){y(s,e,o),D(n,e,null),C(e,t),D(i,e,null),r=!0},p:M,i(s){r||(v(n.$$.fragment,s),v(i.$$.fragment,s),r=!0)},o(s){k(n.$$.fragment,s),k(i.$$.fragment,s),r=!1},d(s){s&&I(e),T(n),T(i)}}}function jt(l){const e=G();return[e,()=>e("undo"),()=>e("clear")]}class Dt extends O{constructor(e){super(),q(this,e,jt,Et,W,{})}}function Tt(l){let e,n,t,i,r,s,o,a,c;return{c(){e=E("div"),n=E("div"),t=E("button"),t.textContent="Save",i=L(),r=E("button"),r.textContent="Cancel",s=L(),o=E("div"),d(n,"class","image_editor_buttons"),d(e,"class","fixed w-screen h-screen top-0 left-0 bg-black bg-opacity-50 z-40 flex flex-col justify-center items-center")},m(u,h){y(u,e,h),C(e,n),C(n,t),C(n,i),C(n,r),C(e,s),C(e,o),l[6](o),a||(c=[F(t,"click",l[4]),F(r,"click",l[5])],a=!0)},p:M,i:M,o:M,d(u){u&&I(e),l[6](null),a=!1,Ae(c)}}}function Bt(l,e,n){let{value:t}=e,i,r;const s=G();function o(){n(1,r=new ot(i,{usageStatistics:!1,includeUI:{loadImage:{path:t,name:"Edit Image"},menuBarPosition:"left",uiSize:{width:"800px",height:"600px"}},cssMaxWidth:700,cssMaxHeight:500,selectionStyle:{cornerSize:20,rotatingPointOffset:70}}))}_e(o);const a=()=>s("save",r.toDataURL()),c=()=>s("cancel");function u(h){J[h?"unshift":"push"](()=>{i=h,n(0,i)})}return l.$$set=h=>{"value"in h&&n(3,t=h.value)},[i,r,s,t,a,c,u]}class Rt extends O{constructor(e){super(),q(this,e,Bt,Tt,W,{value:3})}}function Lt(l){let e,n;return{c(){e=E("img"),d(e,"class","w-full h-full object-contain svelte-i8mnhh"),X(e.src,n=l[0])||d(e,"src",n),d(e,"style",l[2]),d(e,"alt","")},m(t,i){y(t,e,i)},p(t,i){i&1&&!X(e.src,n=t[0])&&d(e,"src",n),i&4&&d(e,"style",t[2])},i:M,o:M,d(t){t&&I(e)}}}function At(l){let e,n,t,i,r,s,o=l[10]==="edit"&&Le(l);return n=new ft({props:{editable:!0}}),n.$on("edit",l[20]),n.$on("clear",l[13]),{c(){o&&o.c(),e=L(),j(n.$$.fragment),t=L(),i=E("img"),d(i,"class","w-full h-full object-contain svelte-i8mnhh"),X(i.src,r=l[0])||d(i,"src",r),d(i,"style",l[2]),d(i,"alt","")},m(a,c){o&&o.m(a,c),y(a,e,c),D(n,a,c),y(a,t,c),y(a,i,c),s=!0},p(a,c){a[10]==="edit"?o?(o.p(a,c),c&1024&&v(o,1)):(o=Le(a),o.c(),v(o,1),o.m(e.parentNode,e)):o&&(te(),k(o,1,1,()=>{o=null}),ne()),(!s||c&1&&!X(i.src,r=a[0]))&&d(i,"src",r),(!s||c&4)&&d(i,"style",a[2])},i(a){s||(v(o),v(n.$$.fragment,a),s=!0)},o(a){k(o),k(n.$$.fragment,a),s=!1},d(a){o&&o.d(a),a&&I(e),T(n,a),a&&I(t),a&&I(i)}}}function Ut(l){let e,n;return e=new kt({props:{image:l[0]}}),e.$on("crop",l[14]),{c(){j(e.$$.fragment)},m(t,i){D(e,t,i),n=!0},p(t,i){const r={};i&1&&(r.image=t[0]),e.$set(r)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function Ft(l){let e,n,t,i;const r=[Wt,qt],s=[];function o(a,c){return a[4]==="upload"?0:a[4]==="webcam"?1:-1}return~(e=o(l))&&(n=s[e]=r[e](l)),{c(){n&&n.c(),t=ge()},m(a,c){~e&&s[e].m(a,c),y(a,t,c),i=!0},p(a,c){let u=e;e=o(a),e===u?~e&&s[e].p(a,c):(n&&(te(),k(s[u],1,1,()=>{s[u]=null}),ne()),~e?(n=s[e],n?n.p(a,c):(n=s[e]=r[e](a),n.c()),v(n,1),n.m(t.parentNode,t)):n=null)},i(a){i||(v(n),i=!0)},o(a){k(n),i=!1},d(a){~e&&s[e].d(a),a&&I(t)}}}function Ot(l){let e,n,t,i;e=new Dt({}),e.$on("undo",l[15]),e.$on("clear",l[16]);let r={value:l[0]};return t=new zt({props:r}),l[17](t),t.$on("change",l[14]),{c(){j(e.$$.fragment),n=L(),j(t.$$.fragment)},m(s,o){D(e,s,o),y(s,n,o),D(t,s,o),i=!0},p(s,o){const a={};o&1&&(a.value=s[0]),t.$set(a)},i(s){i||(v(e.$$.fragment,s),v(t.$$.fragment,s),i=!0)},o(s){k(e.$$.fragment,s),k(t.$$.fragment,s),i=!1},d(s){T(e,s),s&&I(n),l[17](null),T(t,s)}}}function Le(l){let e,n;return e=new Rt({props:{value:l[0]}}),e.$on("cancel",l[19]),e.$on("save",l[14]),{c(){j(e.$$.fragment)},m(t,i){D(e,t,i),n=!0},p(t,i){const r={};i&1&&(r.value=t[0]),e.$set(r)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function qt(l){let e,n;return e=new ut({}),e.$on("capture",l[14]),{c(){j(e.$$.fragment)},m(t,i){D(e,t,i),n=!0},p:M,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function Wt(l){let e,n,t;function i(s){l[18](s)}let r={filetype:"image/x-png,image/gif,image/jpeg",include_file_metadata:!1,$$slots:{default:[Pt]},$$scope:{ctx:l}};return l[9]!==void 0&&(r.dragging=l[9]),e=new dt({props:r}),J.push(()=>Ue(e,"dragging",i)),e.$on("load",l[12]),{c(){j(e.$$.fragment)},m(s,o){D(e,s,o),t=!0},p(s,o){const a={};o&4194752&&(a.$$scope={dirty:o,ctx:s}),!n&&o&512&&(n=!0,a.dragging=s[9],Fe(()=>n=!1)),e.$set(a)},i(s){t||(v(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){T(e,s)}}}function Pt(l){let e,n,t,i,r,s,o,a,c;return{c(){e=E("div"),n=$(l[6]),t=L(),i=E("span"),r=$("- "),s=$(l[7]),o=$(" -"),a=L(),c=$(l[8]),d(i,"class","text-gray-300 svelte-i8mnhh"),d(e,"class","flex flex-col svelte-i8mnhh")},m(u,h){y(u,e,h),C(e,n),C(e,t),C(e,i),C(i,r),C(i,s),C(i,o),C(e,a),C(e,c)},p(u,h){h&64&&ce(n,u[6]),h&128&&ce(s,u[7]),h&256&&ce(c,u[8])},d(u){u&&I(e)}}}function Nt(l){let e,n,t,i,r,s;e=new Oe({props:{show_label:l[3],Icon:l[4]==="canvas"?Ee:ie,label:l[1]||(l[4]==="canvas"?"Sketch":"Image")}});const o=[Ot,Ft,Ut,At,Lt],a=[];function c(u,h){return u[4]==="canvas"?0:u[0]===null?1:u[5]==="select"?2:u[5]==="editor"?3:4}return i=c(l),r=a[i]=o[i](l),{c(){j(e.$$.fragment),n=L(),t=E("div"),r.c(),d(t,"class","svelte-i8mnhh"),le(t,"bg-gray-200",l[0]),le(t,"h-60",l[4]!=="webcam")},m(u,h){D(e,u,h),y(u,n,h),y(u,t,h),a[i].m(t,null),s=!0},p(u,[h]){const _={};h&8&&(_.show_label=u[3]),h&16&&(_.Icon=u[4]==="canvas"?Ee:ie),h&18&&(_.label=u[1]||(u[4]==="canvas"?"Sketch":"Image")),e.$set(_);let p=i;i=c(u),i===p?a[i].p(u,h):(te(),k(a[p],1,1,()=>{a[p]=null}),ne(),r=a[i],r?r.p(u,h):(r=a[i]=o[i](u),r.c()),v(r,1),r.m(t,null)),h&1&&le(t,"bg-gray-200",u[0]),h&16&&le(t,"h-60",u[4]!=="webcam")},i(u){s||(v(e.$$.fragment,u),v(r),s=!0)},o(u){k(e.$$.fragment,u),k(r),s=!1},d(u){T(e,u),u&&I(n),u&&I(t),a[i].d()}}}function Xt(l,e,n){let{value:t}=e,{label:i=void 0}=e,{style:r=""}=e,{show_label:s}=e,{source:o="upload"}=e,{tool:a="editor"}=e,{drop_text:c="Drop an image file"}=e,{or_text:u="or"}=e,{upload_text:h="click to upload"}=e,_="view",p;function A({detail:b}){n(0,t=b)}function B({detail:b}){n(0,t=null),U("clear")}function N({detail:b}){n(0,t=b),n(10,_="view"),U("edit")}const U=G();let S=!1;const m=()=>p.undo(),Y=()=>p.clear();function Z(b){J[b?"unshift":"push"](()=>{p=b,n(11,p)})}function se(b){S=b,n(9,S)}const ae=()=>n(10,_="view"),re=()=>n(10,_="edit");return l.$$set=b=>{"value"in b&&n(0,t=b.value),"label"in b&&n(1,i=b.label),"style"in b&&n(2,r=b.style),"show_label"in b&&n(3,s=b.show_label),"source"in b&&n(4,o=b.source),"tool"in b&&n(5,a=b.tool),"drop_text"in b&&n(6,c=b.drop_text),"or_text"in b&&n(7,u=b.or_text),"upload_text"in b&&n(8,h=b.upload_text)},l.$$.update=()=>{l.$$.dirty&1&&U("change",t),l.$$.dirty&512&&U("drag",S)},[t,i,r,s,o,a,c,u,h,S,_,p,A,B,N,m,Y,Z,se,ae,re]}class Yt extends O{constructor(e){super(),q(this,e,Xt,Nt,W,{value:0,label:1,style:2,show_label:3,source:4,tool:5,drop_text:6,or_text:7,upload_text:8})}}function Ht(l){let e,n;return{c(){e=E("img"),d(e,"class","w-full h-full object-contain"),X(e.src,n=l[0])||d(e,"src",n),d(e,"style",l[2]),d(e,"alt","")},m(t,i){y(t,e,i)},p(t,i){i&1&&!X(e.src,n=t[0])&&d(e,"src",n),i&4&&d(e,"style",t[2])},i:M,o:M,d(t){t&&I(e)}}}function Jt(l){let e,n,t,i;return t=new ie({}),{c(){e=E("div"),n=E("div"),j(t.$$.fragment),d(n,"class","h-10 dark:text-white opacity-50"),d(e,"class","min-h-[16rem] flex justify-center items-center")},m(r,s){y(r,e,s),C(e,n),D(t,n,null),i=!0},p:M,i(r){i||(v(t.$$.fragment,r),i=!0)},o(r){k(t.$$.fragment,r),i=!1},d(r){r&&I(e),T(t)}}}function Gt(l){let e,n,t,i,r,s;e=new Oe({props:{show_label:l[3],Icon:ie,label:l[1]||"Image"}});const o=[Jt,Ht],a=[];function c(u,h){return u[0]===null?0:1}return t=c(l),i=a[t]=o[t](l),{c(){j(e.$$.fragment),n=L(),i.c(),r=ge()},m(u,h){D(e,u,h),y(u,n,h),a[t].m(u,h),y(u,r,h),s=!0},p(u,[h]){const _={};h&8&&(_.show_label=u[3]),h&2&&(_.label=u[1]||"Image"),e.$set(_);let p=t;t=c(u),t===p?a[t].p(u,h):(te(),k(a[p],1,1,()=>{a[p]=null}),ne(),i=a[t],i?i.p(u,h):(i=a[t]=o[t](u),i.c()),v(i,1),i.m(r.parentNode,r))},i(u){s||(v(e.$$.fragment,u),v(i),s=!0)},o(u){k(e.$$.fragment,u),k(i),s=!1},d(u){T(e,u),u&&I(n),a[t].d(u),u&&I(r)}}}function Kt(l,e,n){let{value:t}=e,{label:i=void 0}=e,{style:r=""}=e,{show_label:s}=e;const o=G();return l.$$set=a=>{"value"in a&&n(0,t=a.value),"label"in a&&n(1,i=a.label),"style"in a&&n(2,r=a.style),"show_label"in a&&n(3,s=a.show_label)},l.$$.update=()=>{l.$$.dirty&1&&t&&o("change",t)},[t,i,r,s]}class Zt extends O{constructor(e){super(),q(this,e,Kt,Gt,W,{value:0,label:1,style:2,show_label:3})}}function Qt(l){let e,n,t;function i(s){l[10](s)}let r={style:l[1],source:l[2],tool:l[3],label:l[4],show_label:l[5],drop_text:l[9]("interface.drop_image"),or_text:l[9]("or"),upload_text:l[9]("interface.click_to_upload")};return l[0]!==void 0&&(r.value=l[0]),e=new Yt({props:r}),J.push(()=>Ue(e,"value",i)),e.$on("edit",l[11]),e.$on("clear",l[12]),e.$on("change",l[13]),e.$on("drag",l[14]),{c(){j(e.$$.fragment)},m(s,o){D(e,s,o),t=!0},p(s,o){const a={};o&2&&(a.style=s[1]),o&4&&(a.source=s[2]),o&8&&(a.tool=s[3]),o&16&&(a.label=s[4]),o&32&&(a.show_label=s[5]),o&512&&(a.drop_text=s[9]("interface.drop_image")),o&512&&(a.or_text=s[9]("or")),o&512&&(a.upload_text=s[9]("interface.click_to_upload")),!n&&o&1&&(n=!0,a.value=s[0],Fe(()=>n=!1)),e.$set(a)},i(s){t||(v(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){T(e,s)}}}function Vt(l){let e,n;return e=new Zt({props:{value:l[0],label:l[4],style:l[1],show_label:l[5]}}),{c(){j(e.$$.fragment)},m(t,i){D(e,t,i),n=!0},p(t,i){const r={};i&1&&(r.value=t[0]),i&16&&(r.label=t[4]),i&2&&(r.style=t[1]),i&32&&(r.show_label=t[5]),e.$set(r)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function xt(l){let e,n,t,i,r,s;const o=[l[6]];let a={};for(let _=0;_<o.length;_+=1)a=lt(a,o[_]);e=new _t({props:a});const c=[Vt,Qt],u=[];function h(_,p){return _[7]==="static"?0:1}return t=h(l),i=u[t]=c[t](l),{c(){j(e.$$.fragment),n=L(),i.c(),r=ge()},m(_,p){D(e,_,p),y(_,n,p),u[t].m(_,p),y(_,r,p),s=!0},p(_,p){const A=p&64?it(o,[st(_[6])]):{};e.$set(A);let B=t;t=h(_),t===B?u[t].p(_,p):(te(),k(u[B],1,1,()=>{u[B]=null}),ne(),i=u[t],i?i.p(_,p):(i=u[t]=c[t](_),i.c()),v(i,1),i.m(r.parentNode,r))},i(_){s||(v(e.$$.fragment,_),v(i),s=!0)},o(_){k(e.$$.fragment,_),k(i),s=!1},d(_){T(e,_),_&&I(n),u[t].d(_),_&&I(r)}}}function $t(l){let e,n;return e=new ht({props:{variant:l[7]==="dynamic"&&l[0]===null&&l[2]==="upload"?"dashed":"solid",color:l[8]?"green":"grey",padding:!1,$$slots:{default:[xt]},$$scope:{ctx:l}}}),{c(){j(e.$$.fragment)},m(t,i){D(e,t,i),n=!0},p(t,[i]){const r={};i&133&&(r.variant=t[7]==="dynamic"&&t[0]===null&&t[2]==="upload"?"dashed":"solid"),i&256&&(r.color=t[8]?"green":"grey"),i&66559&&(r.$$scope={dirty:i,ctx:t}),e.$set(r)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function en(l,e,n){let t;tt(l,nt,m=>n(9,t=m));let{value:i=null}=e,{style:r=""}=e,{source:s="upload"}=e,{tool:o="editor"}=e,{label:a}=e,{show_label:c}=e,{loading_status:u}=e,{mode:h}=e;const _=G();let p;function A(m){i=m,n(0,i)}function B(m){fe.call(this,l,m)}function N(m){fe.call(this,l,m)}function U(m){fe.call(this,l,m)}const S=({detail:m})=>n(8,p=m);return l.$$set=m=>{"value"in m&&n(0,i=m.value),"style"in m&&n(1,r=m.style),"source"in m&&n(2,s=m.source),"tool"in m&&n(3,o=m.tool),"label"in m&&n(4,a=m.label),"show_label"in m&&n(5,c=m.show_label),"loading_status"in m&&n(6,u=m.loading_status),"mode"in m&&n(7,h=m.mode)},l.$$.update=()=>{l.$$.dirty&1&&_("change")},[i,r,s,o,a,c,u,h,p,t,A,B,N,U,S]}class tn extends O{constructor(e){super(),q(this,e,en,$t,W,{value:0,style:1,source:2,tool:3,label:4,show_label:5,loading_status:6,mode:7})}}var dn=tn;const hn=["static","dynamic"];export{dn as Component,mn as ExampleComponent,hn as modes};
