var Je=Object.defineProperty,Ge=Object.defineProperties;var Ke=Object.getOwnPropertyDescriptors;var Ie=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable;var Ce=(l,e,t)=>e in l?Je(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,Me=(l,e)=>{for(var t in e||(e={}))Ze.call(e,t)&&Ce(l,t,e[t]);if(Ie)for(var t of Ie(e))Qe.call(e,t)&&Ce(l,t,e[t]);return l},Se=(l,e)=>Ge(l,Ke(e));import{S as O,i as q,s as W,a as P,b as d,c as y,d as C,n as M,e as I,f as E,G as X,A as G,Z as _e,C as J,Y as H,l as F,r as Ae,m as L,a9 as Ve,ad as xe,o as $e,D as et,q as j,u as D,v,w as k,x as T,t as le,y as te,z as ne,k as ge,I as Ue,F as Fe,h as $,j as ce,J as tt,X as nt,K as lt,L as it,M as st,E as fe}from"./index.f808f2eb.js";import{B as Oe}from"./BlockLabel.1c79d32f.js";import{C as at,i as rt,I as ot,W as ut}from"./Image.svelte_svelte_type_style_lang.7bb64bbe.js";import{I as ze,C as ct,M as ft}from"./ModifyUpload.ad98e19e.js";import{U as dt}from"./Upload.a947b6c4.js";import{B as ht}from"./Block.58108406.js";import{S as _t}from"./StatusTracker.9996b515.js";import{E as mn}from"./Image.6f48344a.js";import"./_commonjsHelpers.88e99c8f.js";function gt(l){let e,t;return{c(){e=P("svg"),t=P("path"),d(t,"d","M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","100%"),d(e,"height","100%"),d(e,"viewBox","0 0 24 24"),d(e,"fill","none"),d(e,"stroke","currentColor"),d(e,"stroke-width","1.5"),d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round"),d(e,"class","feather feather-edit-2")},m(n,i){y(n,e,i),C(e,t)},p:M,i:M,o:M,d(n){n&&I(e)}}}class Ee extends O{constructor(e){super(),q(this,e,null,gt,W,{})}}function mt(l){let e,t,n;return{c(){e=P("svg"),t=P("polyline"),n=P("path"),d(t,"points","1 4 1 10 7 10"),d(n,"d","M3.51 15a9 9 0 1 0 2.13-9.36L1 10"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","100%"),d(e,"height","100%"),d(e,"viewBox","0 0 24 24"),d(e,"fill","none"),d(e,"stroke","currentColor"),d(e,"stroke-width","1.5"),d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round"),d(e,"class","feather feather-rotate-ccw")},m(i,a){y(i,e,a),C(e,t),C(e,n)},p:M,i:M,o:M,d(i){i&&I(e)}}}class bt extends O{constructor(e){super(),q(this,e,null,mt,W,{})}}function pt(l){let e,t,n,i;return{c(){e=P("svg"),t=P("rect"),n=P("circle"),i=P("polyline"),d(t,"x","3"),d(t,"y","3"),d(t,"width","18"),d(t,"height","18"),d(t,"rx","2"),d(t,"ry","2"),d(n,"cx","8.5"),d(n,"cy","8.5"),d(n,"r","1.5"),d(i,"points","21 15 16 10 5 21"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","100%"),d(e,"height","100%"),d(e,"viewBox","0 0 24 24"),d(e,"fill","none"),d(e,"stroke","currentColor"),d(e,"stroke-width","1.5"),d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round"),d(e,"class","feather feather-image")},m(a,s){y(a,e,s),C(e,t),C(e,n),C(e,i)},p:M,i:M,o:M,d(a){a&&I(e)}}}class ie extends O{constructor(e){super(),q(this,e,null,pt,W,{})}}function wt(l){let e,t;return{c(){e=E("img"),X(e.src,t=l[0])||d(e,"src",t),d(e,"alt","")},m(n,i){y(n,e,i),l[2](e)},p(n,[i]){i&1&&!X(e.src,t=n[0])&&d(e,"src",t)},i:M,o:M,d(n){n&&I(e),l[2](null)}}}function vt(l,e,t){let{image:n}=e,i;const a=G();_e(()=>{const o=new at(i,{autoCropArea:1,cropend(){const r=o.getCroppedCanvas().toDataURL();a("crop",r)}});return a("crop",n),()=>{o.destroy()}});function s(o){J[o?"unshift":"push"](()=>{i=o,t(1,i)})}return l.$$set=o=>{"image"in o&&t(0,n=o.image)},[n,i,s]}class kt extends O{constructor(e){super(),q(this,e,vt,wt,W,{image:0})}}class je{constructor(e,t){this.x=e,this.y=t}}class De extends je{update(e){this.x=e.x,this.y=e.y}moveByAngle(e,t){const n=e+Math.PI/2;this.x=this.x+Math.sin(n)*t,this.y=this.y-Math.cos(n)*t}equalsTo(e){return this.x===e.x&&this.y===e.y}getDifferenceTo(e){return new je(this.x-e.x,this.y-e.y)}getDistanceTo(e){const t=this.getDifferenceTo(e);return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}getAngleTo(e){const t=this.getDifferenceTo(e);return Math.atan2(t.y,t.x)}toObject(){return{x:this.x,y:this.y}}}const yt=30;class It{constructor({radius:e=yt,enabled:t=!0,initialPoint:n={x:0,y:0}}={}){this.radius=e,this._isEnabled=t,this.pointer=new De(n.x,n.y),this.brush=new De(n.x,n.y),this.angle=0,this.distance=0,this._hasMoved=!1}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}isEnabled(){return this._isEnabled}setRadius(e){this.radius=e}getRadius(){return this.radius}getBrushCoordinates(){return this.brush.toObject()}getPointerCoordinates(){return this.pointer.toObject()}getBrush(){return this.brush}getPointer(){return this.pointer}getAngle(){return this.angle}getDistance(){return this.distance}brushHasMoved(){return this._hasMoved}update(e,{both:t=!1}={}){return this._hasMoved=!1,this.pointer.equalsTo(e)&&!t?!1:(this.pointer.update(e),t?(this._hasMoved=!0,this.brush.update(e),!0):(this._isEnabled?(this.distance=this.pointer.getDistanceTo(this.brush),this.angle=this.pointer.getAngleTo(this.brush),this.distance>this.radius&&(this.brush.moveByAngle(this.angle,this.distance-this.radius),this._hasMoved=!0)):(this.distance=0,this.angle=0,this.brush.update(e),this._hasMoved=!0),!0))}}function Te(l,e,t){const n=l.slice();return n[40]=e[t].name,n[41]=e[t].zIndex,n[42]=e,n[43]=t,n}function Be(l){let e;return{c(){e=E("div"),e.textContent="Start drawing",d(e,"class","absolute inset-0 flex items-center justify-center z-40 pointer-events-none touch-none text-gray-400 md:text-xl")},m(t,n){y(t,e,n)},d(t){t&&I(e)}}}function Re(l){let e,t,n=l[40],i,a;const s=()=>l[14](e,n),o=()=>l[14](null,n);return{c(){e=E("canvas"),d(e,"key",t=l[40]),H(e,"display","block"),H(e,"position","absolute"),H(e,"z-index",l[41]),H(e,"width",l[0]+"px"),H(e,"height",l[1]+"px")},m(r,c){y(r,e,c),s(),i||(a=[F(e,"mousedown",l[40]==="interface"?l[6]:void 0),F(e,"mousemove",l[40]==="interface"?l[7]:void 0),F(e,"mouseup",l[40]==="interface"?l[8]:void 0),F(e,"mouseout",l[40]==="interface"?l[8]:void 0),F(e,"touchstart",l[40]==="interface"?l[6]:void 0),F(e,"touchmove",l[40]==="interface"?l[7]:void 0),F(e,"touchend",l[40]==="interface"?l[8]:void 0),F(e,"touchcancel",l[40]==="interface"?l[8]:void 0)],i=!0)},p(r,c){l=r,c[0]&1&&H(e,"width",l[0]+"px"),c[0]&2&&H(e,"height",l[1]+"px"),n!==l[40]&&(o(),n=l[40],s())},d(r){r&&I(e),o(),i=!1,Ae(a)}}}function Ct(l){let e,t,n,i=!l[3]&&Be(),a=l[5],s=[];for(let o=0;o<a.length;o+=1)s[o]=Re(Te(l,a,o));return{c(){e=E("div"),i&&i.c(),t=L();for(let o=0;o<s.length;o+=1)s[o].c();d(e,"class","touch-none relative bg-red-500 h-full w-full"),Ve(()=>l[16].call(e))},m(o,r){y(o,e,r),i&&i.m(e,null),C(e,t);for(let c=0;c<s.length;c+=1)s[c].m(e,null);l[15](e),n=xe(e,l[16].bind(e))},p(o,r){if(o[3]?i&&(i.d(1),i=null):i||(i=Be(),i.c(),i.m(e,t)),r[0]&487){a=o[5];let c;for(c=0;c<a.length;c+=1){const u=Te(o,a,c);s[c]?s[c].p(u,r):(s[c]=Re(u),s[c].c(),s[c].m(e,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=a.length}},i:M,o:M,d(o){o&&I(e),i&&i.d(),$e(s,o),l[15](null),n()}}}let ee=50,de="#090f1f",he="#aaa";function Mt(l,e){return{x:l.x+(e.x-l.x)/2,y:l.y+(e.y-l.y)/2}}function St(l,e,t){const n=G();let{value:i}=e,a,s=400,o=400;const r=[{name:"interface",zIndex:15},{name:"drawing",zIndex:11},{name:"temp",zIndex:12}];let c={},u={},h=[],_=[],p=!0,A=!0,B=!1,N=!1,U=!1,S=null,Y=null,g=null,Z=null;_e(()=>{Object.keys(c).forEach(f=>{u[f]=c[f].getContext("2d")}),S=new It({radius:ee/1.5,enabled:!0,initialPoint:{x:window.innerWidth/2,y:window.innerHeight/2}}),Y=ee,Z=new rt((f,m)=>Pe(f,m)),Z.observe(g),ue(),t(13,a=!0),window.setTimeout(()=>{const f=window.innerWidth/2,m=window.innerHeight/2;S.update({x:f-Y/4,y:m},{both:!0}),S.update({x:f+Y/4,y:m},{both:!1}),p=!0,A=!0,Q()},100)}),et(()=>{t(13,a=!1),Z.unobserve(g)});function se(){const f=_.slice(0,-1);Q(),b({lines:f}),ke()}let ae=()=>JSON.stringify({lines:_,width:s,height:o}),re=f=>{if(typeof f!="string")throw new Error("save_data needs to be of type string!");const{lines:m,width:w,height:z}=JSON.parse(f);if(!m||typeof m.push!="function")throw new Error("save_data.lines needs to be an array!");if(Q(),w===s&&z===o)b({lines:m});else{const R=s/w,K=o/z;b({lines:m.map(V=>Se(Me({},V),{points:V.points.map(x=>({x:x.x*R,y:x.y*K})),brush_radius:V.brush_radius}))})}},b=({lines:f})=>{f.forEach(m=>{const{points:w,brush_color:z,brush_radius:R}=m;we({points:w,brush_color:z,brush_radius:R}),h=w,ve()})},qe=f=>{f.preventDefault(),t(3,U=!0),N=!0;const{x:m,y:w}=be(f);f.touches&&f.touches.length>0&&S.update({x:m,y:w},{both:!0}),pe(m,w)},me=f=>{f.preventDefault();const{x:m,y:w}=be(f);pe(m,w)},We=f=>{f.preventDefault(),me(f),B=!1,N=!1,ve()},Pe=f=>{const m=ae();for(const w of f){const{width:z,height:R}=w.contentRect;oe(c.interface,z,R),oe(c.drawing,z,R),oe(c.temp,z,R),ue({once:!0})}re(m)},oe=(f,m,w)=>{f.width=m*3,f.height=w*3,f.style.width=m,f.style.height=w},be=f=>{const m=c.interface.getBoundingClientRect();let w=f.clientX,z=f.clientY;return f.changedTouches&&f.changedTouches.length>0&&(w=f.changedTouches[0].clientX,z=f.changedTouches[0].clientY),{x:w-m.left,y:z-m.top}},pe=(f,m)=>{S.update({x:f*3,y:m*3});const w=!S.isEnabled();(N&&!B||w&&N)&&(B=!0,h.push(S.brush.toObject())),B&&(h.push(S.brush.toObject()),we({points:h,brush_color:de,brush_radius:ee})),p=!0},we=({points:f,brush_color:m,brush_radius:w})=>{u.temp.lineJoin="round",u.temp.lineCap="round",u.temp.strokeStyle=m,u.temp.clearRect(0,0,u.temp.canvas.width,u.temp.canvas.height),u.temp.lineWidth=w;let z=f[0],R=f[1];u.temp.moveTo(R.x,R.y),u.temp.beginPath();for(var K=1,V=f.length;K<V;K++){var x=Mt(z,R);u.temp.quadraticCurveTo(z.x,z.y,x.x,x.y),z=f[K],R=f[K+1]}u.temp.lineTo(z.x,z.y),u.temp.stroke()},ve=()=>{if(h.length<2)return;_.push({points:[...h],brush_color:de,brush_radius:ee}),h.length=0;const f=c.temp.width,m=c.temp.height;u.drawing.drawImage(c.temp,0,0,f,m),u.temp.clearRect(0,0,f,m),ke()},ke=()=>{n("change",ye())};function Q(){t(3,U=!1),_=[],A=!0,u.drawing.clearRect(0,0,c.drawing.width,c.drawing.height),u.temp.clearRect(0,0,c.temp.width,c.temp.height),u.drawing.fillStyle="#FFFFFF",u.drawing.fillRect(0,0,c.drawing.width,c.drawing.height)}let ue=({once:f=!1}={})=>{if(p||A){const m=S.getPointerCoordinates(),w=S.getBrushCoordinates();Ne(u.interface,m,w),p=!1,A=!1}f||window.requestAnimationFrame(()=>{ue()})},Ne=(f,m,w)=>{f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.fillStyle=de,f.arc(w.x,w.y,ee/2,0,Math.PI*2,!0),f.fill(),f.beginPath(),f.fillStyle=he,f.arc(m.x,m.y,4,0,Math.PI*2,!0),f.fill(),S.isEnabled()&&(f.beginPath(),f.lineWidth=2,f.lineCap="round",f.setLineDash([2,4]),f.strokeStyle=he,f.stroke()),f.beginPath(),f.fillStyle=he,f.arc(w.x,w.y,2,0,Math.PI*2,!0),f.fill()};function ye(){return c.drawing.toDataURL("image/png")}function Xe(f,m){J[f?"unshift":"push"](()=>{c[m]=f,t(2,c)})}function Ye(f){J[f?"unshift":"push"](()=>{g=f,t(4,g)})}function He(){s=this.offsetWidth,o=this.offsetHeight,t(0,s),t(1,o)}return l.$$set=f=>{"value"in f&&t(9,i=f.value)},l.$$.update=()=>{l.$$.dirty[0]&8704&&a&&!i&&Q()},[s,o,c,U,g,r,qe,me,We,i,se,Q,ye,a,Xe,Ye,He]}class zt extends O{constructor(e){super(),q(this,e,St,Ct,W,{value:9,undo:10,clear:11,get_image_data:12},null,[-1,-1])}get undo(){return this.$$.ctx[10]}get clear(){return this.$$.ctx[11]}get get_image_data(){return this.$$.ctx[12]}}function Et(l){let e,t,n,i,a;return t=new ze({props:{Icon:bt}}),t.$on("click",l[1]),i=new ze({props:{Icon:ct}}),i.$on("click",l[2]),{c(){e=E("div"),j(t.$$.fragment),n=L(),j(i.$$.fragment),d(e,"class","z-50 top-2 right-2 justify-end flex gap-1 absolute")},m(s,o){y(s,e,o),D(t,e,null),C(e,n),D(i,e,null),a=!0},p:M,i(s){a||(v(t.$$.fragment,s),v(i.$$.fragment,s),a=!0)},o(s){k(t.$$.fragment,s),k(i.$$.fragment,s),a=!1},d(s){s&&I(e),T(t),T(i)}}}function jt(l){const e=G();return[e,()=>e("undo"),()=>e("clear")]}class Dt extends O{constructor(e){super(),q(this,e,jt,Et,W,{})}}function Tt(l){let e,t,n,i,a,s,o,r,c;return{c(){e=E("div"),t=E("div"),n=E("button"),n.textContent="Save",i=L(),a=E("button"),a.textContent="Cancel",s=L(),o=E("div"),d(t,"class","image_editor_buttons"),d(e,"class","fixed w-screen h-screen top-0 left-0 bg-black bg-opacity-50 z-40 flex flex-col justify-center items-center")},m(u,h){y(u,e,h),C(e,t),C(t,n),C(t,i),C(t,a),C(e,s),C(e,o),l[6](o),r||(c=[F(n,"click",l[4]),F(a,"click",l[5])],r=!0)},p:M,i:M,o:M,d(u){u&&I(e),l[6](null),r=!1,Ae(c)}}}function Bt(l,e,t){let{value:n}=e,i,a;const s=G();function o(){t(1,a=new ot(i,{usageStatistics:!1,includeUI:{loadImage:{path:n,name:"Edit Image"},menuBarPosition:"left",uiSize:{width:"800px",height:"600px"}},cssMaxWidth:700,cssMaxHeight:500,selectionStyle:{cornerSize:20,rotatingPointOffset:70}}))}_e(o);const r=()=>s("save",a.toDataURL()),c=()=>s("cancel");function u(h){J[h?"unshift":"push"](()=>{i=h,t(0,i)})}return l.$$set=h=>{"value"in h&&t(3,n=h.value)},[i,a,s,n,r,c,u]}class Rt extends O{constructor(e){super(),q(this,e,Bt,Tt,W,{value:3})}}function Lt(l){let e,t;return{c(){e=E("img"),d(e,"class","w-full h-full object-contain svelte-i8mnhh"),X(e.src,t=l[0])||d(e,"src",t),d(e,"style",l[2]),d(e,"alt","")},m(n,i){y(n,e,i)},p(n,i){i&1&&!X(e.src,t=n[0])&&d(e,"src",t),i&4&&d(e,"style",n[2])},i:M,o:M,d(n){n&&I(e)}}}function At(l){let e,t,n,i,a,s,o=l[10]==="edit"&&Le(l);return t=new ft({props:{editable:!0}}),t.$on("edit",l[20]),t.$on("clear",l[13]),{c(){o&&o.c(),e=L(),j(t.$$.fragment),n=L(),i=E("img"),d(i,"class","w-full h-full object-contain svelte-i8mnhh"),X(i.src,a=l[0])||d(i,"src",a),d(i,"style",l[2]),d(i,"alt","")},m(r,c){o&&o.m(r,c),y(r,e,c),D(t,r,c),y(r,n,c),y(r,i,c),s=!0},p(r,c){r[10]==="edit"?o?(o.p(r,c),c&1024&&v(o,1)):(o=Le(r),o.c(),v(o,1),o.m(e.parentNode,e)):o&&(te(),k(o,1,1,()=>{o=null}),ne()),(!s||c&1&&!X(i.src,a=r[0]))&&d(i,"src",a),(!s||c&4)&&d(i,"style",r[2])},i(r){s||(v(o),v(t.$$.fragment,r),s=!0)},o(r){k(o),k(t.$$.fragment,r),s=!1},d(r){o&&o.d(r),r&&I(e),T(t,r),r&&I(n),r&&I(i)}}}function Ut(l){let e,t;return e=new kt({props:{image:l[0]}}),e.$on("crop",l[14]),{c(){j(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,i){const a={};i&1&&(a.image=n[0]),e.$set(a)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function Ft(l){let e,t,n,i;const a=[Wt,qt],s=[];function o(r,c){return r[4]==="upload"?0:r[4]==="webcam"?1:-1}return~(e=o(l))&&(t=s[e]=a[e](l)),{c(){t&&t.c(),n=ge()},m(r,c){~e&&s[e].m(r,c),y(r,n,c),i=!0},p(r,c){let u=e;e=o(r),e===u?~e&&s[e].p(r,c):(t&&(te(),k(s[u],1,1,()=>{s[u]=null}),ne()),~e?(t=s[e],t?t.p(r,c):(t=s[e]=a[e](r),t.c()),v(t,1),t.m(n.parentNode,n)):t=null)},i(r){i||(v(t),i=!0)},o(r){k(t),i=!1},d(r){~e&&s[e].d(r),r&&I(n)}}}function Ot(l){let e,t,n,i;e=new Dt({}),e.$on("undo",l[15]),e.$on("clear",l[16]);let a={value:l[0]};return n=new zt({props:a}),l[17](n),n.$on("change",l[14]),{c(){j(e.$$.fragment),t=L(),j(n.$$.fragment)},m(s,o){D(e,s,o),y(s,t,o),D(n,s,o),i=!0},p(s,o){const r={};o&1&&(r.value=s[0]),n.$set(r)},i(s){i||(v(e.$$.fragment,s),v(n.$$.fragment,s),i=!0)},o(s){k(e.$$.fragment,s),k(n.$$.fragment,s),i=!1},d(s){T(e,s),s&&I(t),l[17](null),T(n,s)}}}function Le(l){let e,t;return e=new Rt({props:{value:l[0]}}),e.$on("cancel",l[19]),e.$on("save",l[14]),{c(){j(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,i){const a={};i&1&&(a.value=n[0]),e.$set(a)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function qt(l){let e,t;return e=new ut({}),e.$on("capture",l[14]),{c(){j(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p:M,i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function Wt(l){let e,t,n;function i(s){l[18](s)}let a={filetype:"image/x-png,image/gif,image/jpeg",include_file_metadata:!1,$$slots:{default:[Pt]},$$scope:{ctx:l}};return l[9]!==void 0&&(a.dragging=l[9]),e=new dt({props:a}),J.push(()=>Ue(e,"dragging",i)),e.$on("load",l[12]),{c(){j(e.$$.fragment)},m(s,o){D(e,s,o),n=!0},p(s,o){const r={};o&4194752&&(r.$$scope={dirty:o,ctx:s}),!t&&o&512&&(t=!0,r.dragging=s[9],Fe(()=>t=!1)),e.$set(r)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){k(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Pt(l){let e,t,n,i,a,s,o,r,c;return{c(){e=E("div"),t=$(l[6]),n=L(),i=E("span"),a=$("- "),s=$(l[7]),o=$(" -"),r=L(),c=$(l[8]),d(i,"class","text-gray-300 svelte-i8mnhh"),d(e,"class","flex flex-col svelte-i8mnhh")},m(u,h){y(u,e,h),C(e,t),C(e,n),C(e,i),C(i,a),C(i,s),C(i,o),C(e,r),C(e,c)},p(u,h){h&64&&ce(t,u[6]),h&128&&ce(s,u[7]),h&256&&ce(c,u[8])},d(u){u&&I(e)}}}function Nt(l){let e,t,n,i,a,s;e=new Oe({props:{show_label:l[3],Icon:l[4]==="canvas"?Ee:ie,label:l[1]||(l[4]==="canvas"?"Sketch":"Image")}});const o=[Ot,Ft,Ut,At,Lt],r=[];function c(u,h){return u[4]==="canvas"?0:u[0]===null?1:u[5]==="select"?2:u[5]==="editor"?3:4}return i=c(l),a=r[i]=o[i](l),{c(){j(e.$$.fragment),t=L(),n=E("div"),a.c(),d(n,"class","svelte-i8mnhh"),le(n,"bg-gray-200",l[0]),le(n,"h-60",l[4]!=="webcam")},m(u,h){D(e,u,h),y(u,t,h),y(u,n,h),r[i].m(n,null),s=!0},p(u,[h]){const _={};h&8&&(_.show_label=u[3]),h&16&&(_.Icon=u[4]==="canvas"?Ee:ie),h&18&&(_.label=u[1]||(u[4]==="canvas"?"Sketch":"Image")),e.$set(_);let p=i;i=c(u),i===p?r[i].p(u,h):(te(),k(r[p],1,1,()=>{r[p]=null}),ne(),a=r[i],a?a.p(u,h):(a=r[i]=o[i](u),a.c()),v(a,1),a.m(n,null)),h&1&&le(n,"bg-gray-200",u[0]),h&16&&le(n,"h-60",u[4]!=="webcam")},i(u){s||(v(e.$$.fragment,u),v(a),s=!0)},o(u){k(e.$$.fragment,u),k(a),s=!1},d(u){T(e,u),u&&I(t),u&&I(n),r[i].d()}}}function Xt(l,e,t){let{value:n}=e,{label:i=void 0}=e,{style:a=""}=e,{show_label:s}=e,{source:o="upload"}=e,{tool:r="editor"}=e,{drop_text:c="Drop an image file"}=e,{or_text:u="or"}=e,{upload_text:h="click to upload"}=e,_="view",p;function A({detail:b}){t(0,n=b)}function B({detail:b}){t(0,n=null),U("clear")}function N({detail:b}){t(0,n=b),t(10,_="view"),U("edit")}const U=G();let S=!1;const Y=()=>p.undo(),g=()=>p.clear();function Z(b){J[b?"unshift":"push"](()=>{p=b,t(11,p)})}function se(b){S=b,t(9,S)}const ae=()=>t(10,_="view"),re=()=>t(10,_="edit");return l.$$set=b=>{"value"in b&&t(0,n=b.value),"label"in b&&t(1,i=b.label),"style"in b&&t(2,a=b.style),"show_label"in b&&t(3,s=b.show_label),"source"in b&&t(4,o=b.source),"tool"in b&&t(5,r=b.tool),"drop_text"in b&&t(6,c=b.drop_text),"or_text"in b&&t(7,u=b.or_text),"upload_text"in b&&t(8,h=b.upload_text)},l.$$.update=()=>{l.$$.dirty&1&&U("change",n),l.$$.dirty&512&&U("drag",S)},[n,i,a,s,o,r,c,u,h,S,_,p,A,B,N,Y,g,Z,se,ae,re]}class Yt extends O{constructor(e){super(),q(this,e,Xt,Nt,W,{value:0,label:1,style:2,show_label:3,source:4,tool:5,drop_text:6,or_text:7,upload_text:8})}}function Ht(l){let e,t;return{c(){e=E("img"),d(e,"class","w-full h-full object-contain"),X(e.src,t=l[0])||d(e,"src",t),d(e,"style",l[2]),d(e,"alt","")},m(n,i){y(n,e,i)},p(n,i){i&1&&!X(e.src,t=n[0])&&d(e,"src",t),i&4&&d(e,"style",n[2])},i:M,o:M,d(n){n&&I(e)}}}function Jt(l){let e,t,n,i;return n=new ie({}),{c(){e=E("div"),t=E("div"),j(n.$$.fragment),d(t,"class","h-10 dark:text-white opacity-50"),d(e,"class","min-h-[16rem] flex justify-center items-center")},m(a,s){y(a,e,s),C(e,t),D(n,t,null),i=!0},p:M,i(a){i||(v(n.$$.fragment,a),i=!0)},o(a){k(n.$$.fragment,a),i=!1},d(a){a&&I(e),T(n)}}}function Gt(l){let e,t,n,i,a,s;e=new Oe({props:{show_label:l[3],Icon:ie,label:l[1]||"Image"}});const o=[Jt,Ht],r=[];function c(u,h){return u[0]===null?0:1}return n=c(l),i=r[n]=o[n](l),{c(){j(e.$$.fragment),t=L(),i.c(),a=ge()},m(u,h){D(e,u,h),y(u,t,h),r[n].m(u,h),y(u,a,h),s=!0},p(u,[h]){const _={};h&8&&(_.show_label=u[3]),h&2&&(_.label=u[1]||"Image"),e.$set(_);let p=n;n=c(u),n===p?r[n].p(u,h):(te(),k(r[p],1,1,()=>{r[p]=null}),ne(),i=r[n],i?i.p(u,h):(i=r[n]=o[n](u),i.c()),v(i,1),i.m(a.parentNode,a))},i(u){s||(v(e.$$.fragment,u),v(i),s=!0)},o(u){k(e.$$.fragment,u),k(i),s=!1},d(u){T(e,u),u&&I(t),r[n].d(u),u&&I(a)}}}function Kt(l,e,t){let{value:n}=e,{label:i=void 0}=e,{style:a=""}=e,{show_label:s}=e;const o=G();return l.$$set=r=>{"value"in r&&t(0,n=r.value),"label"in r&&t(1,i=r.label),"style"in r&&t(2,a=r.style),"show_label"in r&&t(3,s=r.show_label)},l.$$.update=()=>{l.$$.dirty&1&&n&&o("change",n)},[n,i,a,s]}class Zt extends O{constructor(e){super(),q(this,e,Kt,Gt,W,{value:0,label:1,style:2,show_label:3})}}function Qt(l){let e,t,n;function i(s){l[11](s)}let a={style:l[1],source:l[2],tool:l[3],label:l[4],show_label:l[5],drop_text:l[9]("interface.drop_image"),or_text:l[9]("or"),upload_text:l[9]("interface.click_to_upload")};return l[0]!==void 0&&(a.value=l[0]),e=new Yt({props:a}),J.push(()=>Ue(e,"value",i)),e.$on("edit",l[12]),e.$on("clear",l[13]),e.$on("change",l[14]),e.$on("drag",l[15]),{c(){j(e.$$.fragment)},m(s,o){D(e,s,o),n=!0},p(s,o){const r={};o&2&&(r.style=s[1]),o&4&&(r.source=s[2]),o&8&&(r.tool=s[3]),o&16&&(r.label=s[4]),o&32&&(r.show_label=s[5]),o&512&&(r.drop_text=s[9]("interface.drop_image")),o&512&&(r.or_text=s[9]("or")),o&512&&(r.upload_text=s[9]("interface.click_to_upload")),!t&&o&1&&(t=!0,r.value=s[0],Fe(()=>t=!1)),e.$set(r)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){k(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Vt(l){let e,t;return e=new Zt({props:{value:l[0],label:l[4],style:l[1],show_label:l[5]}}),{c(){j(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,i){const a={};i&1&&(a.value=n[0]),i&16&&(a.label=n[4]),i&2&&(a.style=n[1]),i&32&&(a.show_label=n[5]),e.$set(a)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function xt(l){let e,t,n,i,a,s;const o=[l[6]];let r={};for(let _=0;_<o.length;_+=1)r=lt(r,o[_]);e=new _t({props:r});const c=[Vt,Qt],u=[];function h(_,p){return _[7]==="static"?0:1}return n=h(l),i=u[n]=c[n](l),{c(){j(e.$$.fragment),t=L(),i.c(),a=ge()},m(_,p){D(e,_,p),y(_,t,p),u[n].m(_,p),y(_,a,p),s=!0},p(_,p){const A=p&64?it(o,[st(_[6])]):{};e.$set(A);let B=n;n=h(_),n===B?u[n].p(_,p):(te(),k(u[B],1,1,()=>{u[B]=null}),ne(),i=u[n],i?i.p(_,p):(i=u[n]=c[n](_),i.c()),v(i,1),i.m(a.parentNode,a))},i(_){s||(v(e.$$.fragment,_),v(i),s=!0)},o(_){k(e.$$.fragment,_),k(i),s=!1},d(_){T(e,_),_&&I(t),u[n].d(_),_&&I(a)}}}function $t(l){let e,t;return e=new ht({props:{variant:l[7]==="dynamic"&&l[0]===null&&l[2]==="upload"?"dashed":"solid",color:l[8]?"green":"grey",padding:!1,$$slots:{default:[xt]},$$scope:{ctx:l}}}),{c(){j(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,[i]){const a={};i&133&&(a.variant=n[7]==="dynamic"&&n[0]===null&&n[2]==="upload"?"dashed":"solid"),i&256&&(a.color=n[8]?"green":"grey"),i&132095&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function en(l,e,t){let n;tt(l,nt,g=>t(9,n=g));let{value:i=null}=e,{default_value:a=null}=e,{style:s=""}=e,{source:o="upload"}=e,{tool:r="editor"}=e,{label:c}=e,{show_label:u}=e,{loading_status:h}=e,{mode:_}=e;const p=G();a&&(i=a);let A;function B(g){i=g,t(0,i)}function N(g){fe.call(this,l,g)}function U(g){fe.call(this,l,g)}function S(g){fe.call(this,l,g)}const Y=({detail:g})=>t(8,A=g);return l.$$set=g=>{"value"in g&&t(0,i=g.value),"default_value"in g&&t(10,a=g.default_value),"style"in g&&t(1,s=g.style),"source"in g&&t(2,o=g.source),"tool"in g&&t(3,r=g.tool),"label"in g&&t(4,c=g.label),"show_label"in g&&t(5,u=g.show_label),"loading_status"in g&&t(6,h=g.loading_status),"mode"in g&&t(7,_=g.mode)},l.$$.update=()=>{l.$$.dirty&1&&p("change")},[i,s,o,r,c,u,h,_,A,n,a,B,N,U,S,Y]}class tn extends O{constructor(e){super(),q(this,e,en,$t,W,{value:0,default_value:10,style:1,source:2,tool:3,label:4,show_label:5,loading_status:6,mode:7})}}var dn=tn;const hn=["static","dynamic"];export{dn as Component,mn as ExampleComponent,hn as modes};
