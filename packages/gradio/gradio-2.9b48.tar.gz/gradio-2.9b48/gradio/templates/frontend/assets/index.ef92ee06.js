var Ze=Object.defineProperty,Qe=Object.defineProperties;var Ve=Object.getOwnPropertyDescriptors;var Ie=Object.getOwnPropertySymbols;var xe=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable;var Ce=(l,e,t)=>e in l?Ze(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,Me=(l,e)=>{for(var t in e||(e={}))xe.call(e,t)&&Ce(l,t,e[t]);if(Ie)for(var t of Ie(e))$e.call(e,t)&&Ce(l,t,e[t]);return l},Se=(l,e)=>Qe(l,Ve(e));import{S as O,i as q,s as W,a as P,b as f,c as y,d as C,n as M,e as I,f as E,G as X,A as J,Z as _e,C as H,a8 as Fe,ac as ze,Y,l as F,r as Oe,m as L,ad as et,v as w,y as Z,w as k,z as Q,o as tt,D as nt,q as j,u as D,x as T,t as le,k as ge,I as qe,F as We,h as te,j as ce,J as lt,X as it,K as st,L as rt,M as at,E as fe}from"./index.43a672aa.js";import{B as Pe}from"./BlockLabel.525e2884.js";import{C as ot,i as ut,I as ct,W as ft}from"./Image.svelte_svelte_type_style_lang.0f0905dc.js";import{f as Ee}from"./index.c0141c0f.js";import{I as je,C as dt,M as ht}from"./ModifyUpload.5afb1375.js";import{U as _t}from"./Upload.768f3905.js";import{B as gt}from"./Block.dd660513.js";import{S as mt}from"./StatusTracker.a32689a5.js";import{E as wn}from"./Image.cdcf4464.js";import"./_commonjsHelpers.88e99c8f.js";function bt(l){let e,t;return{c(){e=P("svg"),t=P("path"),f(t,"d","M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"width","100%"),f(e,"height","100%"),f(e,"viewBox","0 0 24 24"),f(e,"fill","none"),f(e,"stroke","currentColor"),f(e,"stroke-width","1.5"),f(e,"stroke-linecap","round"),f(e,"stroke-linejoin","round"),f(e,"class","feather feather-edit-2")},m(n,i){y(n,e,i),C(e,t)},p:M,i:M,o:M,d(n){n&&I(e)}}}class De extends O{constructor(e){super(),q(this,e,null,bt,W,{})}}function pt(l){let e,t,n;return{c(){e=P("svg"),t=P("polyline"),n=P("path"),f(t,"points","1 4 1 10 7 10"),f(n,"d","M3.51 15a9 9 0 1 0 2.13-9.36L1 10"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"width","100%"),f(e,"height","100%"),f(e,"viewBox","0 0 24 24"),f(e,"fill","none"),f(e,"stroke","currentColor"),f(e,"stroke-width","1.5"),f(e,"stroke-linecap","round"),f(e,"stroke-linejoin","round"),f(e,"class","feather feather-rotate-ccw")},m(i,a){y(i,e,a),C(e,t),C(e,n)},p:M,i:M,o:M,d(i){i&&I(e)}}}class wt extends O{constructor(e){super(),q(this,e,null,pt,W,{})}}function vt(l){let e,t,n,i;return{c(){e=P("svg"),t=P("rect"),n=P("circle"),i=P("polyline"),f(t,"x","3"),f(t,"y","3"),f(t,"width","18"),f(t,"height","18"),f(t,"rx","2"),f(t,"ry","2"),f(n,"cx","8.5"),f(n,"cy","8.5"),f(n,"r","1.5"),f(i,"points","21 15 16 10 5 21"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"width","100%"),f(e,"height","100%"),f(e,"viewBox","0 0 24 24"),f(e,"fill","none"),f(e,"stroke","currentColor"),f(e,"stroke-width","1.5"),f(e,"stroke-linecap","round"),f(e,"stroke-linejoin","round"),f(e,"class","feather feather-image")},m(a,s){y(a,e,s),C(e,t),C(e,n),C(e,i)},p:M,i:M,o:M,d(a){a&&I(e)}}}class ie extends O{constructor(e){super(),q(this,e,null,vt,W,{})}}function kt(l){let e,t;return{c(){e=E("img"),X(e.src,t=l[0])||f(e,"src",t),f(e,"alt","")},m(n,i){y(n,e,i),l[2](e)},p(n,[i]){i&1&&!X(e.src,t=n[0])&&f(e,"src",t)},i:M,o:M,d(n){n&&I(e),l[2](null)}}}function yt(l,e,t){let{image:n}=e,i;const a=J();_e(()=>{const u=new ot(i,{autoCropArea:1,cropend(){const r=u.getCroppedCanvas().toDataURL();a("crop",r)}});return a("crop",n),()=>{u.destroy()}});function s(u){H[u?"unshift":"push"](()=>{i=u,t(1,i)})}return l.$$set=u=>{"image"in u&&t(0,n=u.image)},[n,i,s]}class It extends O{constructor(e){super(),q(this,e,yt,kt,W,{image:0})}}class Te{constructor(e,t){this.x=e,this.y=t}}class Be extends Te{update(e){this.x=e.x,this.y=e.y}moveByAngle(e,t){const n=e+Math.PI/2;this.x=this.x+Math.sin(n)*t,this.y=this.y-Math.cos(n)*t}equalsTo(e){return this.x===e.x&&this.y===e.y}getDifferenceTo(e){return new Te(this.x-e.x,this.y-e.y)}getDistanceTo(e){const t=this.getDifferenceTo(e);return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}getAngleTo(e){const t=this.getDifferenceTo(e);return Math.atan2(t.y,t.x)}toObject(){return{x:this.x,y:this.y}}}const Ct=30;class Mt{constructor({radius:e=Ct,enabled:t=!0,initialPoint:n={x:0,y:0}}={}){this.radius=e,this._isEnabled=t,this.pointer=new Be(n.x,n.y),this.brush=new Be(n.x,n.y),this.angle=0,this.distance=0,this._hasMoved=!1}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}isEnabled(){return this._isEnabled}setRadius(e){this.radius=e}getRadius(){return this.radius}getBrushCoordinates(){return this.brush.toObject()}getPointerCoordinates(){return this.pointer.toObject()}getBrush(){return this.brush}getPointer(){return this.pointer}getAngle(){return this.angle}getDistance(){return this.distance}brushHasMoved(){return this._hasMoved}update(e,{both:t=!1}={}){return this._hasMoved=!1,this.pointer.equalsTo(e)&&!t?!1:(this.pointer.update(e),t?(this._hasMoved=!0,this.brush.update(e),!0):(this._isEnabled?(this.distance=this.pointer.getDistanceTo(this.brush),this.angle=this.pointer.getAngleTo(this.brush),this.distance>this.radius&&(this.brush.moveByAngle(this.angle,this.distance-this.radius),this._hasMoved=!0)):(this.distance=0,this.angle=0,this.brush.update(e),this._hasMoved=!0),!0))}}function Re(l,e,t){const n=l.slice();return n[40]=e[t].name,n[41]=e[t].zIndex,n[42]=e,n[43]=t,n}function Le(l){let e,t,n;return{c(){e=E("div"),e.textContent="Start drawing",f(e,"class","absolute inset-0 flex items-center justify-center z-40 pointer-events-none touch-none text-gray-400 md:text-xl")},m(i,a){y(i,e,a),n=!0},i(i){n||(Fe(()=>{t||(t=ze(e,Ee,{duration:50},!0)),t.run(1)}),n=!0)},o(i){t||(t=ze(e,Ee,{duration:50},!1)),t.run(0),n=!1},d(i){i&&I(e),i&&t&&t.end()}}}function Ae(l){let e,t,n=l[40],i,a;const s=()=>l[14](e,n),u=()=>l[14](null,n);return{c(){e=E("canvas"),f(e,"key",t=l[40]),Y(e,"display","block"),Y(e,"position","absolute"),Y(e,"z-index",l[41]),Y(e,"width",l[0]+"px"),Y(e,"height",l[1]+"px")},m(r,d){y(r,e,d),s(),i||(a=[F(e,"mousedown",l[40]==="interface"?l[6]:void 0),F(e,"mousemove",l[40]==="interface"?l[7]:void 0),F(e,"mouseup",l[40]==="interface"?l[8]:void 0),F(e,"mouseout",l[40]==="interface"?l[8]:void 0),F(e,"touchstart",l[40]==="interface"?l[6]:void 0),F(e,"touchmove",l[40]==="interface"?l[7]:void 0),F(e,"touchend",l[40]==="interface"?l[8]:void 0),F(e,"touchcancel",l[40]==="interface"?l[8]:void 0)],i=!0)},p(r,d){l=r,d[0]&1&&Y(e,"width",l[0]+"px"),d[0]&2&&Y(e,"height",l[1]+"px"),n!==l[40]&&(u(),n=l[40],s())},d(r){r&&I(e),u(),i=!1,Oe(a)}}}function St(l){let e,t,n,i,a=l[4]===0&&Le(),s=l[5],u=[];for(let r=0;r<s.length;r+=1)u[r]=Ae(Re(l,s,r));return{c(){e=E("div"),a&&a.c(),t=L();for(let r=0;r<u.length;r+=1)u[r].c();f(e,"class","touch-none relative bg-red-500 h-full w-full"),Fe(()=>l[16].call(e))},m(r,d){y(r,e,d),a&&a.m(e,null),C(e,t);for(let o=0;o<u.length;o+=1)u[o].m(e,null);l[15](e),n=et(e,l[16].bind(e)),i=!0},p(r,d){if(r[4]===0?a?d[0]&16&&w(a,1):(a=Le(),a.c(),w(a,1),a.m(e,t)):a&&(Z(),k(a,1,1,()=>{a=null}),Q()),d[0]&487){s=r[5];let o;for(o=0;o<s.length;o+=1){const h=Re(r,s,o);u[o]?u[o].p(h,d):(u[o]=Ae(h),u[o].c(),u[o].m(e,null))}for(;o<u.length;o+=1)u[o].d(1);u.length=s.length}},i(r){i||(w(a),i=!0)},o(r){k(a),i=!1},d(r){r&&I(e),a&&a.d(),tt(u,r),l[15](null),n()}}}let ne=50,de="#090f1f",he="#aaa";function zt(l,e){return{x:l.x+(e.x-l.x)/2,y:l.y+(e.y-l.y)/2}}function Et(l,e,t){const n=J();let{value:i}=e,a,s=400,u=400;const r=[{name:"interface",zIndex:15},{name:"drawing",zIndex:11},{name:"temp",zIndex:12}];let d={},o={},h=[],_=[],p=!0,A=!0,B=!1,N=!1,S=null,U=null,m=null,V=null,G=0;_e(()=>{Object.keys(d).forEach(c=>{o[c]=d[c].getContext("2d")}),S=new Mt({radius:ne/1.5,enabled:!0,initialPoint:{x:window.innerWidth/2,y:window.innerHeight/2}}),U=ne,V=new ut((c,g)=>Ye(c,g)),V.observe(m),ue(),t(13,a=!0),window.setTimeout(()=>{const c=window.innerWidth/2,g=window.innerHeight/2;S.update({x:c-U/4,y:g},{both:!0}),S.update({x:c+U/4,y:g},{both:!1}),p=!0,A=!0,x()},100)}),nt(()=>{t(13,a=!1),V.unobserve(m)});function se(){const c=_.slice(0,-1);x(),b({lines:c}),t(4,G=_.length),ke()}let re=()=>JSON.stringify({lines:_,width:s,height:u}),ae=c=>{if(typeof c!="string")throw new Error("save_data needs to be of type string!");const{lines:g,width:v,height:z}=JSON.parse(c);if(!g||typeof g.push!="function")throw new Error("save_data.lines needs to be an array!");if(x(),v===s&&z===u)b({lines:g});else{const R=s/v,K=u/z;b({lines:g.map($=>Se(Me({},$),{points:$.points.map(ee=>({x:ee.x*R,y:ee.y*K})),brush_radius:$.brush_radius}))})}},b=({lines:c})=>{c.forEach(g=>{const{points:v,brush_color:z,brush_radius:R}=g;we({points:v,brush_color:z,brush_radius:R}),h=v,ve()})},Ne=c=>{c.preventDefault(),N=!0;const{x:g,y:v}=be(c);c.touches&&c.touches.length>0&&S.update({x:g,y:v},{both:!0}),pe(g,v),t(4,G+=1)},me=c=>{c.preventDefault();const{x:g,y:v}=be(c);pe(g,v)},Xe=c=>{c.preventDefault(),me(c),B=!1,N=!1,ve()},Ye=c=>{const g=re();for(const v of c){const{width:z,height:R}=v.contentRect;oe(d.interface,z,R),oe(d.drawing,z,R),oe(d.temp,z,R),ue({once:!0})}ae(g)},oe=(c,g,v)=>{c.width=g*3,c.height=v*3,c.style.width=g,c.style.height=v},be=c=>{const g=d.interface.getBoundingClientRect();let v=c.clientX,z=c.clientY;return c.changedTouches&&c.changedTouches.length>0&&(v=c.changedTouches[0].clientX,z=c.changedTouches[0].clientY),{x:v-g.left,y:z-g.top}},pe=(c,g)=>{S.update({x:c*3,y:g*3});const v=!S.isEnabled();(N&&!B||v&&N)&&(B=!0,h.push(S.brush.toObject())),B&&(h.push(S.brush.toObject()),we({points:h,brush_color:de,brush_radius:ne})),p=!0},we=({points:c,brush_color:g,brush_radius:v})=>{o.temp.lineJoin="round",o.temp.lineCap="round",o.temp.strokeStyle=g,o.temp.clearRect(0,0,o.temp.canvas.width,o.temp.canvas.height),o.temp.lineWidth=v;let z=c[0],R=c[1];o.temp.moveTo(R.x,R.y),o.temp.beginPath();for(var K=1,$=c.length;K<$;K++){var ee=zt(z,R);o.temp.quadraticCurveTo(z.x,z.y,ee.x,ee.y),z=c[K],R=c[K+1]}o.temp.lineTo(z.x,z.y),o.temp.stroke()},ve=()=>{if(h.length<2)return;_.push({points:[...h],brush_color:de,brush_radius:ne}),h.length=0;const c=d.temp.width,g=d.temp.height;o.drawing.drawImage(d.temp,0,0,c,g),o.temp.clearRect(0,0,c,g),ke()},ke=()=>{n("change",ye())};function x(){_=[],A=!0,o.drawing.clearRect(0,0,d.drawing.width,d.drawing.height),o.temp.clearRect(0,0,d.temp.width,d.temp.height),o.drawing.fillStyle="#FFFFFF",o.drawing.fillRect(0,0,d.drawing.width,d.drawing.height),t(4,G=0)}let ue=({once:c=!1}={})=>{if(p||A){const g=S.getPointerCoordinates(),v=S.getBrushCoordinates();He(o.interface,g,v),p=!1,A=!1}c||window.requestAnimationFrame(()=>{ue()})},He=(c,g,v)=>{c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.fillStyle=de,c.arc(v.x,v.y,ne/2,0,Math.PI*2,!0),c.fill(),c.beginPath(),c.fillStyle=he,c.arc(g.x,g.y,4,0,Math.PI*2,!0),c.fill(),S.isEnabled()&&(c.beginPath(),c.lineWidth=2,c.lineCap="round",c.setLineDash([2,4]),c.strokeStyle=he,c.stroke()),c.beginPath(),c.fillStyle=he,c.arc(v.x,v.y,2,0,Math.PI*2,!0),c.fill()};function ye(){return d.drawing.toDataURL("image/png")}function Je(c,g){H[c?"unshift":"push"](()=>{d[g]=c,t(2,d)})}function Ge(c){H[c?"unshift":"push"](()=>{m=c,t(3,m)})}function Ke(){s=this.offsetWidth,u=this.offsetHeight,t(0,s),t(1,u)}return l.$$set=c=>{"value"in c&&t(9,i=c.value)},l.$$.update=()=>{l.$$.dirty[0]&8704&&a&&!i&&x()},[s,u,d,m,G,r,Ne,me,Xe,i,se,x,ye,a,Je,Ge,Ke]}class jt extends O{constructor(e){super(),q(this,e,Et,St,W,{value:9,undo:10,clear:11,get_image_data:12},null,[-1,-1])}get undo(){return this.$$.ctx[10]}get clear(){return this.$$.ctx[11]}get get_image_data(){return this.$$.ctx[12]}}function Dt(l){let e,t,n,i,a;return t=new je({props:{Icon:wt}}),t.$on("click",l[1]),i=new je({props:{Icon:dt}}),i.$on("click",l[2]),{c(){e=E("div"),j(t.$$.fragment),n=L(),j(i.$$.fragment),f(e,"class","z-50 top-2 right-2 justify-end flex gap-1 absolute")},m(s,u){y(s,e,u),D(t,e,null),C(e,n),D(i,e,null),a=!0},p:M,i(s){a||(w(t.$$.fragment,s),w(i.$$.fragment,s),a=!0)},o(s){k(t.$$.fragment,s),k(i.$$.fragment,s),a=!1},d(s){s&&I(e),T(t),T(i)}}}function Tt(l){const e=J();return[e,()=>e("undo"),()=>e("clear")]}class Bt extends O{constructor(e){super(),q(this,e,Tt,Dt,W,{})}}function Rt(l){let e,t,n,i,a,s,u,r,d;return{c(){e=E("div"),t=E("div"),n=E("button"),n.textContent="Save",i=L(),a=E("button"),a.textContent="Cancel",s=L(),u=E("div"),f(t,"class","image_editor_buttons"),f(e,"class","fixed w-screen h-screen top-0 left-0 bg-black bg-opacity-50 z-40 flex flex-col justify-center items-center")},m(o,h){y(o,e,h),C(e,t),C(t,n),C(t,i),C(t,a),C(e,s),C(e,u),l[6](u),r||(d=[F(n,"click",l[4]),F(a,"click",l[5])],r=!0)},p:M,i:M,o:M,d(o){o&&I(e),l[6](null),r=!1,Oe(d)}}}function Lt(l,e,t){let{value:n}=e,i,a;const s=J();function u(){t(1,a=new ct(i,{usageStatistics:!1,includeUI:{loadImage:{path:n,name:"Edit Image"},menuBarPosition:"left",uiSize:{width:"800px",height:"600px"}},cssMaxWidth:700,cssMaxHeight:500,selectionStyle:{cornerSize:20,rotatingPointOffset:70}}))}_e(u);const r=()=>s("save",a.toDataURL()),d=()=>s("cancel");function o(h){H[h?"unshift":"push"](()=>{i=h,t(0,i)})}return l.$$set=h=>{"value"in h&&t(3,n=h.value)},[i,a,s,n,r,d,o]}class At extends O{constructor(e){super(),q(this,e,Lt,Rt,W,{value:3})}}function Ut(l){let e,t;return{c(){e=E("img"),f(e,"class","w-full h-full object-contain svelte-i8mnhh"),X(e.src,t=l[0])||f(e,"src",t),f(e,"style",l[2]),f(e,"alt","")},m(n,i){y(n,e,i)},p(n,i){i&1&&!X(e.src,t=n[0])&&f(e,"src",t),i&4&&f(e,"style",n[2])},i:M,o:M,d(n){n&&I(e)}}}function Ft(l){let e,t,n,i,a,s,u=l[10]==="edit"&&Ue(l);return t=new ht({props:{editable:!0}}),t.$on("edit",l[20]),t.$on("clear",l[13]),{c(){u&&u.c(),e=L(),j(t.$$.fragment),n=L(),i=E("img"),f(i,"class","w-full h-full object-contain svelte-i8mnhh"),X(i.src,a=l[0])||f(i,"src",a),f(i,"style",l[2]),f(i,"alt","")},m(r,d){u&&u.m(r,d),y(r,e,d),D(t,r,d),y(r,n,d),y(r,i,d),s=!0},p(r,d){r[10]==="edit"?u?(u.p(r,d),d&1024&&w(u,1)):(u=Ue(r),u.c(),w(u,1),u.m(e.parentNode,e)):u&&(Z(),k(u,1,1,()=>{u=null}),Q()),(!s||d&1&&!X(i.src,a=r[0]))&&f(i,"src",a),(!s||d&4)&&f(i,"style",r[2])},i(r){s||(w(u),w(t.$$.fragment,r),s=!0)},o(r){k(u),k(t.$$.fragment,r),s=!1},d(r){u&&u.d(r),r&&I(e),T(t,r),r&&I(n),r&&I(i)}}}function Ot(l){let e,t;return e=new It({props:{image:l[0]}}),e.$on("crop",l[14]),{c(){j(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,i){const a={};i&1&&(a.image=n[0]),e.$set(a)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function qt(l){let e,t,n,i;const a=[Nt,Pt],s=[];function u(r,d){return r[4]==="upload"?0:r[4]==="webcam"?1:-1}return~(e=u(l))&&(t=s[e]=a[e](l)),{c(){t&&t.c(),n=ge()},m(r,d){~e&&s[e].m(r,d),y(r,n,d),i=!0},p(r,d){let o=e;e=u(r),e===o?~e&&s[e].p(r,d):(t&&(Z(),k(s[o],1,1,()=>{s[o]=null}),Q()),~e?(t=s[e],t?t.p(r,d):(t=s[e]=a[e](r),t.c()),w(t,1),t.m(n.parentNode,n)):t=null)},i(r){i||(w(t),i=!0)},o(r){k(t),i=!1},d(r){~e&&s[e].d(r),r&&I(n)}}}function Wt(l){let e,t,n,i;e=new Bt({}),e.$on("undo",l[15]),e.$on("clear",l[16]);let a={value:l[0]};return n=new jt({props:a}),l[17](n),n.$on("change",l[14]),{c(){j(e.$$.fragment),t=L(),j(n.$$.fragment)},m(s,u){D(e,s,u),y(s,t,u),D(n,s,u),i=!0},p(s,u){const r={};u&1&&(r.value=s[0]),n.$set(r)},i(s){i||(w(e.$$.fragment,s),w(n.$$.fragment,s),i=!0)},o(s){k(e.$$.fragment,s),k(n.$$.fragment,s),i=!1},d(s){T(e,s),s&&I(t),l[17](null),T(n,s)}}}function Ue(l){let e,t;return e=new At({props:{value:l[0]}}),e.$on("cancel",l[19]),e.$on("save",l[14]),{c(){j(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,i){const a={};i&1&&(a.value=n[0]),e.$set(a)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function Pt(l){let e,t;return e=new ft({}),e.$on("capture",l[14]),{c(){j(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p:M,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function Nt(l){let e,t,n;function i(s){l[18](s)}let a={filetype:"image/x-png,image/gif,image/jpeg",include_file_metadata:!1,$$slots:{default:[Xt]},$$scope:{ctx:l}};return l[9]!==void 0&&(a.dragging=l[9]),e=new _t({props:a}),H.push(()=>qe(e,"dragging",i)),e.$on("load",l[12]),{c(){j(e.$$.fragment)},m(s,u){D(e,s,u),n=!0},p(s,u){const r={};u&4194752&&(r.$$scope={dirty:u,ctx:s}),!t&&u&512&&(t=!0,r.dragging=s[9],We(()=>t=!1)),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){k(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Xt(l){let e,t,n,i,a,s,u,r,d;return{c(){e=E("div"),t=te(l[6]),n=L(),i=E("span"),a=te("- "),s=te(l[7]),u=te(" -"),r=L(),d=te(l[8]),f(i,"class","text-gray-300 svelte-i8mnhh"),f(e,"class","flex flex-col svelte-i8mnhh")},m(o,h){y(o,e,h),C(e,t),C(e,n),C(e,i),C(i,a),C(i,s),C(i,u),C(e,r),C(e,d)},p(o,h){h&64&&ce(t,o[6]),h&128&&ce(s,o[7]),h&256&&ce(d,o[8])},d(o){o&&I(e)}}}function Yt(l){let e,t,n,i,a,s;e=new Pe({props:{show_label:l[3],Icon:l[4]==="canvas"?De:ie,label:l[1]||(l[4]==="canvas"?"Sketch":"Image")}});const u=[Wt,qt,Ot,Ft,Ut],r=[];function d(o,h){return o[4]==="canvas"?0:o[0]===null?1:o[5]==="select"?2:o[5]==="editor"?3:4}return i=d(l),a=r[i]=u[i](l),{c(){j(e.$$.fragment),t=L(),n=E("div"),a.c(),f(n,"class","svelte-i8mnhh"),le(n,"bg-gray-200",l[0]),le(n,"h-60",l[4]!=="webcam")},m(o,h){D(e,o,h),y(o,t,h),y(o,n,h),r[i].m(n,null),s=!0},p(o,[h]){const _={};h&8&&(_.show_label=o[3]),h&16&&(_.Icon=o[4]==="canvas"?De:ie),h&18&&(_.label=o[1]||(o[4]==="canvas"?"Sketch":"Image")),e.$set(_);let p=i;i=d(o),i===p?r[i].p(o,h):(Z(),k(r[p],1,1,()=>{r[p]=null}),Q(),a=r[i],a?a.p(o,h):(a=r[i]=u[i](o),a.c()),w(a,1),a.m(n,null)),h&1&&le(n,"bg-gray-200",o[0]),h&16&&le(n,"h-60",o[4]!=="webcam")},i(o){s||(w(e.$$.fragment,o),w(a),s=!0)},o(o){k(e.$$.fragment,o),k(a),s=!1},d(o){T(e,o),o&&I(t),o&&I(n),r[i].d()}}}function Ht(l,e,t){let{value:n}=e,{label:i=void 0}=e,{style:a=""}=e,{show_label:s}=e,{source:u="upload"}=e,{tool:r="editor"}=e,{drop_text:d="Drop an image file"}=e,{or_text:o="or"}=e,{upload_text:h="click to upload"}=e,_="view",p;function A({detail:b}){t(0,n=b)}function B({detail:b}){t(0,n=null),S("clear")}function N({detail:b}){t(0,n=b),t(10,_="view"),S("edit")}const S=J();let U=!1;const m=()=>p.undo(),V=()=>p.clear();function G(b){H[b?"unshift":"push"](()=>{p=b,t(11,p)})}function se(b){U=b,t(9,U)}const re=()=>t(10,_="view"),ae=()=>t(10,_="edit");return l.$$set=b=>{"value"in b&&t(0,n=b.value),"label"in b&&t(1,i=b.label),"style"in b&&t(2,a=b.style),"show_label"in b&&t(3,s=b.show_label),"source"in b&&t(4,u=b.source),"tool"in b&&t(5,r=b.tool),"drop_text"in b&&t(6,d=b.drop_text),"or_text"in b&&t(7,o=b.or_text),"upload_text"in b&&t(8,h=b.upload_text)},l.$$.update=()=>{l.$$.dirty&1&&S("change",n),l.$$.dirty&512&&S("drag",U)},[n,i,a,s,u,r,d,o,h,U,_,p,A,B,N,m,V,G,se,re,ae]}class Jt extends O{constructor(e){super(),q(this,e,Ht,Yt,W,{value:0,label:1,style:2,show_label:3,source:4,tool:5,drop_text:6,or_text:7,upload_text:8})}}function Gt(l){let e,t;return{c(){e=E("img"),f(e,"class","w-full h-full object-contain"),X(e.src,t=l[0])||f(e,"src",t),f(e,"style",l[2]),f(e,"alt","")},m(n,i){y(n,e,i)},p(n,i){i&1&&!X(e.src,t=n[0])&&f(e,"src",t),i&4&&f(e,"style",n[2])},i:M,o:M,d(n){n&&I(e)}}}function Kt(l){let e,t,n,i;return n=new ie({}),{c(){e=E("div"),t=E("div"),j(n.$$.fragment),f(t,"class","h-10 dark:text-white opacity-50"),f(e,"class","min-h-[16rem] flex justify-center items-center")},m(a,s){y(a,e,s),C(e,t),D(n,t,null),i=!0},p:M,i(a){i||(w(n.$$.fragment,a),i=!0)},o(a){k(n.$$.fragment,a),i=!1},d(a){a&&I(e),T(n)}}}function Zt(l){let e,t,n,i,a,s;e=new Pe({props:{show_label:l[3],Icon:ie,label:l[1]||"Image"}});const u=[Kt,Gt],r=[];function d(o,h){return o[0]===null?0:1}return n=d(l),i=r[n]=u[n](l),{c(){j(e.$$.fragment),t=L(),i.c(),a=ge()},m(o,h){D(e,o,h),y(o,t,h),r[n].m(o,h),y(o,a,h),s=!0},p(o,[h]){const _={};h&8&&(_.show_label=o[3]),h&2&&(_.label=o[1]||"Image"),e.$set(_);let p=n;n=d(o),n===p?r[n].p(o,h):(Z(),k(r[p],1,1,()=>{r[p]=null}),Q(),i=r[n],i?i.p(o,h):(i=r[n]=u[n](o),i.c()),w(i,1),i.m(a.parentNode,a))},i(o){s||(w(e.$$.fragment,o),w(i),s=!0)},o(o){k(e.$$.fragment,o),k(i),s=!1},d(o){T(e,o),o&&I(t),r[n].d(o),o&&I(a)}}}function Qt(l,e,t){let{value:n}=e,{label:i=void 0}=e,{style:a=""}=e,{show_label:s}=e;const u=J();return l.$$set=r=>{"value"in r&&t(0,n=r.value),"label"in r&&t(1,i=r.label),"style"in r&&t(2,a=r.style),"show_label"in r&&t(3,s=r.show_label)},l.$$.update=()=>{l.$$.dirty&1&&n&&u("change",n)},[n,i,a,s]}class Vt extends O{constructor(e){super(),q(this,e,Qt,Zt,W,{value:0,label:1,style:2,show_label:3})}}function xt(l){let e,t,n;function i(s){l[10](s)}let a={style:l[1],source:l[2],tool:l[3],label:l[4],show_label:l[5],drop_text:l[9]("interface.drop_image"),or_text:l[9]("or"),upload_text:l[9]("interface.click_to_upload")};return l[0]!==void 0&&(a.value=l[0]),e=new Jt({props:a}),H.push(()=>qe(e,"value",i)),e.$on("edit",l[11]),e.$on("clear",l[12]),e.$on("change",l[13]),e.$on("drag",l[14]),{c(){j(e.$$.fragment)},m(s,u){D(e,s,u),n=!0},p(s,u){const r={};u&2&&(r.style=s[1]),u&4&&(r.source=s[2]),u&8&&(r.tool=s[3]),u&16&&(r.label=s[4]),u&32&&(r.show_label=s[5]),u&512&&(r.drop_text=s[9]("interface.drop_image")),u&512&&(r.or_text=s[9]("or")),u&512&&(r.upload_text=s[9]("interface.click_to_upload")),!t&&u&1&&(t=!0,r.value=s[0],We(()=>t=!1)),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){k(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function $t(l){let e,t;return e=new Vt({props:{value:l[0],label:l[4],style:l[1],show_label:l[5]}}),{c(){j(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,i){const a={};i&1&&(a.value=n[0]),i&16&&(a.label=n[4]),i&2&&(a.style=n[1]),i&32&&(a.show_label=n[5]),e.$set(a)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function en(l){let e,t,n,i,a,s;const u=[l[6]];let r={};for(let _=0;_<u.length;_+=1)r=st(r,u[_]);e=new mt({props:r});const d=[$t,xt],o=[];function h(_,p){return _[7]==="static"?0:1}return n=h(l),i=o[n]=d[n](l),{c(){j(e.$$.fragment),t=L(),i.c(),a=ge()},m(_,p){D(e,_,p),y(_,t,p),o[n].m(_,p),y(_,a,p),s=!0},p(_,p){const A=p&64?rt(u,[at(_[6])]):{};e.$set(A);let B=n;n=h(_),n===B?o[n].p(_,p):(Z(),k(o[B],1,1,()=>{o[B]=null}),Q(),i=o[n],i?i.p(_,p):(i=o[n]=d[n](_),i.c()),w(i,1),i.m(a.parentNode,a))},i(_){s||(w(e.$$.fragment,_),w(i),s=!0)},o(_){k(e.$$.fragment,_),k(i),s=!1},d(_){T(e,_),_&&I(t),o[n].d(_),_&&I(a)}}}function tn(l){let e,t;return e=new gt({props:{variant:l[7]==="dynamic"&&l[0]===null&&l[2]==="upload"?"dashed":"solid",color:l[8]?"green":"grey",padding:!1,$$slots:{default:[en]},$$scope:{ctx:l}}}),{c(){j(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,[i]){const a={};i&133&&(a.variant=n[7]==="dynamic"&&n[0]===null&&n[2]==="upload"?"dashed":"solid"),i&256&&(a.color=n[8]?"green":"grey"),i&66559&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function nn(l,e,t){let n;lt(l,it,m=>t(9,n=m));let{value:i=null}=e,{style:a=""}=e,{source:s="upload"}=e,{tool:u="editor"}=e,{label:r}=e,{show_label:d}=e,{loading_status:o}=e,{mode:h}=e;const _=J();let p;function A(m){i=m,t(0,i)}function B(m){fe.call(this,l,m)}function N(m){fe.call(this,l,m)}function S(m){fe.call(this,l,m)}const U=({detail:m})=>t(8,p=m);return l.$$set=m=>{"value"in m&&t(0,i=m.value),"style"in m&&t(1,a=m.style),"source"in m&&t(2,s=m.source),"tool"in m&&t(3,u=m.tool),"label"in m&&t(4,r=m.label),"show_label"in m&&t(5,d=m.show_label),"loading_status"in m&&t(6,o=m.loading_status),"mode"in m&&t(7,h=m.mode)},l.$$.update=()=>{l.$$.dirty&1&&_("change")},[i,a,s,u,r,d,o,h,p,n,A,B,N,S,U]}class ln extends O{constructor(e){super(),q(this,e,nn,tn,W,{value:0,style:1,source:2,tool:3,label:4,show_label:5,loading_status:6,mode:7})}}var gn=ln;const mn=["static","dynamic"];export{gn as Component,wn as ExampleComponent,mn as modes};
