"use strict";(self["webpackChunkunmanic_frontend"]=self["webpackChunkunmanic_frontend"]||[]).push([[6],{9006:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Ue});var s=o(9835),l=o(6970);const i={class:"q-pa-none"},n={class:"row"},a={class:"col q-ma-sm"},r={class:"q-pa-md",style:{"max-width":"500px"}},u={class:"q-mb-none"},d={class:"q-gutter-sm"},c={class:"text-weight-medium"},h={class:"text-weight-bold"},p={class:"text-weight-bold"},m={class:"text-weight-bold"},w=(0,s._)("br",null,null,-1),g={class:"text-weight-bold"},k={class:"text-grey-8 q-gutter-xs"},f={class:"q-mb-none"},_={class:"q-gutter-sm"},b={key:0},v={class:"row"},y={class:"col-6 text-center"},q={class:"col-6 text-center"};function W(e,t,o,W,$,C){const x=(0,s.up)("q-skeleton"),T=(0,s.up)("q-avatar"),Q=(0,s.up)("q-item-section"),Z=(0,s.up)("q-item-label"),S=(0,s.up)("q-tooltip"),z=(0,s.up)("q-separator"),H=(0,s.up)("q-btn"),L=(0,s.up)("q-item"),D=(0,s.up)("q-list"),j=(0,s.up)("q-space"),G=(0,s.up)("q-bar"),V=(0,s.up)("q-icon"),U=(0,s.up)("q-input"),I=(0,s.up)("q-form"),O=(0,s.up)("q-card"),P=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(P,{padding:""},{default:(0,s.w5)((()=>[(0,s._)("div",i,[(0,s._)("div",n,[(0,s._)("div",a,[(0,s._)("div",r,[(0,s.Wm)(I,{onSubmit:C.save,class:"q-gutter-md"},{default:(0,s.w5)((()=>[(0,s._)("h5",u,(0,l.zw)(e.$t("components.settings.workers.workerGroups")),1),(0,s._)("div",d,[null===$.workerGroups?((0,s.wg)(),(0,s.j4)(x,{key:0,type:"text"})):(0,s.kq)("",!0),(0,s.Wm)(D,{bordered:"",separator:"",class:"rounded-borders"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)($.workerGroups,((t,o)=>((0,s.wg)(),(0,s.j4)(L,{key:o,"active-class":"library-path-list-item"},{default:(0,s.w5)((()=>[(0,s.Wm)(Q,{avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(T,{"text-color":"grey-8",icon:"workspaces"})])),_:1}),(0,s.Wm)(Q,null,{default:(0,s.w5)((()=>[(0,s.Wm)(Z,null,{default:(0,s.w5)((()=>[(0,s._)("span",c,(0,l.zw)(e.$t("components.settings.workers.workerGroupName"))+":",1),(0,s.Uk)(" "+(0,l.zw)(t.name),1)])),_:2},1024),(0,s.Wm)(Z,{caption:"",lines:"1"},{default:(0,s.w5)((()=>[(0,s._)("span",h,(0,l.zw)(e.$t("components.settings.workers.workerCount"))+":",1),(0,s.Uk)(" "+(0,l.zw)(t.workerCount),1)])),_:2},1024),(0,s.Wm)(Z,{caption:"",lines:"1"},{default:(0,s.w5)((()=>[(0,s._)("span",p,(0,l.zw)(e.$t("components.settings.common.tags"))+":",1),(0,s.Uk)(" "+(0,l.zw)(t.tags.join(", ")||"None"),1)])),_:2},1024),(0,s.Wm)(S,null,{default:(0,s.w5)((()=>[(0,s._)("span",m,(0,l.zw)(e.$t("components.settings.workers.workerCount"))+":",1),(0,s.Uk)(" "+(0,l.zw)(t.workerCount)+" ",1),w,(0,s._)("span",g,(0,l.zw)(e.$t("components.settings.common.tags"))+":",1),(0,s.Uk)(" "+(0,l.zw)(t.tags.join(", ")||"None"),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(z,{inset:"",vertical:"",class:"q-mx-sm"}),(0,s.Wm)(Q,{center:"",side:""},{default:(0,s.w5)((()=>[(0,s._)("div",k,[(0,s.Wm)(H,{flat:"",dense:"",round:"",size:"12px",color:"grey-8",icon:"tune",onClick:e=>C.configureWorkerGroup(o)},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{class:"bg-white text-primary"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.$t("tooltips.configure")),1)])),_:1})])),_:2},1032,["onClick"]),(0,s.Wm)(H,{flat:"",dense:"",round:"",size:"12px",color:"negative",icon:"delete",disable:t.locked,onClick:e=>C.deleteWorkerGroup(o)},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{class:"bg-white text-primary"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.$t("tooltips.delete")),1)])),_:1})])),_:2},1032,["disable","onClick"])])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,s.Wm)(G,{class:"bg-transparent"},{default:(0,s.w5)((()=>[(0,s.Wm)(j),(0,s.Wm)(H,{round:"",flat:"",color:"primary",icon:"add",onClick:t[0]||(t[0]=e=>C.configureWorkerGroup("new"))},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{class:"bg-white text-primary"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.$t("tooltips.add")),1)])),_:1})])),_:1})])),_:1})]),(0,s._)("h5",f,(0,l.zw)(e.$t("components.settings.workers.path")),1),(0,s._)("div",_,[null===$.cachePath?((0,s.wg)(),(0,s.j4)(x,{key:0,type:"QInput"})):((0,s.wg)(),(0,s.j4)(U,{key:1,readonly:"",outlined:"",color:"primary",modelValue:$.cachePath,"onUpdate:modelValue":t[1]||(t[1]=e=>$.cachePath=e),label:e.$t("components.settings.workers.path"),placeholder:$.cachePath,onClick:C.updateCacheWithDirectoryBrowser},{append:(0,s.w5)((()=>[(0,s.Wm)(V,{onClick:C.updateCacheWithDirectoryBrowser,class:"cursor-pointer",name:"folder_open"},null,8,["onClick"])])),_:1},8,["modelValue","label","placeholder","onClick"]))]),(0,s._)("div",null,[(0,s.Wm)(H,{label:e.$t("navigation.submit"),type:"submit",color:"secondary"},null,8,["label"])])])),_:1},8,["onSubmit"])])])]),e.$q.platform.is.mobile?((0,s.wg)(),(0,s.iD)("div",b,[(0,s.Wm)(z,{class:"q-mb-lg"}),(0,s._)("div",v,[(0,s._)("div",y,[(0,s.Wm)(O,{flat:"",bordered:"",onClick:t[2]||(t[2]=t=>e.$router.push("/ui/settings-library")),class:"q-ma-xs"},{default:(0,s.w5)((()=>[(0,s.Wm)(H,{icon:"navigate_before",flat:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.$t("navigation.library")),1)])),_:1})])),_:1})]),(0,s._)("div",q,[(0,s.Wm)(O,{flat:"",bordered:"",onClick:t[3]||(t[3]=t=>e.$router.push("/ui/settings-plugins")),class:"q-ma-xs"},{default:(0,s.w5)((()=>[(0,s.Wm)(H,{"icon-right":"navigate_next",flat:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.$t("navigation.plugins")),1)])),_:1})])),_:1})])])])):(0,s.kq)("",!0)])])),_:1})}var $=o(586),C=o(499),x=o(9302),T=o(9991),Q=o(9370),Z=o(9981),S=o.n(Z),z=o(6888),H=o(1957);const L={class:"row items-center no-wrap"},D={key:0,class:"col"},j={class:"col"},G={class:"text-h6 text-blue-10"},V={key:1,class:"col-auto"},U={class:"row items-center no-wrap q-mb-md"},I={class:"col"},O={class:"text-h5"},P={class:"col-auto"},B={class:"q-pb-sm"},E={class:"q-gutter-sm"},N={class:"q-pb-sm"},R={class:"q-mb-none"},J={class:"q-gutter-sm"},A={class:"text-weight-bold"},K={class:"text-weight-bold"},F={class:"text-grey-8 q-gutter-xs"};function Y(e,t,o,i,n,a){const r=(0,s.up)("q-btn"),u=(0,s.up)("q-tooltip"),d=(0,s.up)("q-card-section"),c=(0,s.up)("q-skeleton"),h=(0,s.up)("q-input"),p=(0,s.up)("q-slider"),m=(0,s.up)("q-select"),w=(0,s.up)("q-separator"),g=(0,s.up)("q-icon"),k=(0,s.up)("q-avatar"),f=(0,s.up)("q-item-section"),_=(0,s.up)("q-item-label"),b=(0,s.up)("q-item"),v=(0,s.up)("draggable"),y=(0,s.up)("q-list"),q=(0,s.up)("q-space"),W=(0,s.up)("q-bar"),$=(0,s.up)("q-card"),C=(0,s.up)("q-dialog"),x=(0,s.Q2)("close-popup"),T=(0,s.Q2)("touch-swipe");return(0,s.wg)(),(0,s.j4)(C,{ref:"workerGroupConfigureDialogRef",maximized:e.$q.platform.is.mobile,"transition-show":e.$q.platform.is.mobile?"jump-left":"slide-left","transition-hide":e.$q.platform.is.mobile?"jump-right":"slide-right","full-height":"",position:"right",onBeforeHide:a.beforeDialogHide,onHide:a.onDialogHide},{default:(0,s.w5)((()=>[(0,s.wy)(((0,s.wg)(),(0,s.j4)($,{style:(0,l.j5)([e.$q.platform.is.mobile?"max-width: 100vw;":"max-width: 95vw;",{width:"700px"}])},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{class:"bg-card-head"},{default:(0,s.w5)((()=>[(0,s._)("div",L,[e.$q.platform.is.mobile?((0,s.wg)(),(0,s.iD)("div",D,[(0,s.wy)((0,s.Wm)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_back"},null,512),[[x]])])):(0,s.kq)("",!0),(0,s._)("div",j,[(0,s._)("div",G,(0,l.zw)(o.dialogHeader),1)]),e.$q.platform.is.mobile?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",V,[(0,s.wy)(((0,s.wg)(),(0,s.j4)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_forward"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"bg-white text-primary"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.$t("tooltips.close")),1)])),_:1})])),_:1})),[[x]])]))])])),_:1}),(0,s.Wm)(d,{class:"q-pt-none"},{default:(0,s.w5)((()=>[(0,s._)("div",{class:(0,l.C_)(e.$q.platform.is.mobile?"q-px-none":"")},[(0,s.Wm)($,{flat:""},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{class:(0,l.C_)(e.$q.platform.is.mobile?"q-px-none":"")},{default:(0,s.w5)((()=>[(0,s._)("div",U,[(0,s._)("div",I,[(0,s._)("div",O,(0,l.zw)(e.$t("components.settings.common.configuration")),1)]),(0,s._)("div",P,[e.locked?((0,s.wg)(),(0,s.j4)(r,{key:0,round:"",flat:"",color:"negative",icon:"lock",onClick:t[0]||(t[0]=t=>e.locked=!1)},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"bg-white text-primary"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.$t("components.settings.workers.locked")),1)])),_:1})])),_:1})):((0,s.wg)(),(0,s.j4)(r,{key:1,round:"",flat:"",color:"primary",icon:"lock_open",onClick:t[1]||(t[1]=t=>e.locked=!0)},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"bg-white text-primary"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.$t("components.settings.workers.unlocked")),1)])),_:1})])),_:1}))])]),(0,s._)("div",B,[null===e.name?((0,s.wg)(),(0,s.j4)(c,{key:0,type:"QInput"})):(0,s.kq)("",!0),null!==e.name?((0,s.wg)(),(0,s.j4)(h,{key:1,outlined:"",color:"primary",modelValue:e.name,"onUpdate:modelValue":t[2]||(t[2]=t=>e.name=t),label:e.$t("components.settings.workers.workerGroupName"),placeholder:e.name},null,8,["modelValue","label","placeholder"])):(0,s.kq)("",!0)]),(0,s._)("div",E,[null===e.workerCount?((0,s.wg)(),(0,s.j4)(c,{key:0,type:"QInput"})):(0,s.kq)("",!0),null!==e.workerCount?((0,s.wg)(),(0,s.j4)(h,{key:1,readonly:"",outlined:"",color:"primary",modelValue:e.workerCount,"onUpdate:modelValue":t[3]||(t[3]=t=>e.workerCount=t),label:e.$t("components.settings.workers.workerCount"),placeholder:e.workerCount},null,8,["modelValue","label","placeholder"])):(0,s.kq)("",!0),null===e.workerCount?((0,s.wg)(),(0,s.j4)(c,{key:2,type:"QSlider"})):(0,s.kq)("",!0),null!==e.workerCount?((0,s.wg)(),(0,s.j4)(p,{key:3,modelValue:e.workerCount,"onUpdate:modelValue":t[4]||(t[4]=t=>e.workerCount=t),min:0,max:12,color:"primary"},null,8,["modelValue"])):(0,s.kq)("",!0)]),(0,s._)("div",N,[null===e.tags?((0,s.wg)(),(0,s.j4)(c,{key:0,type:"QInput"})):(0,s.kq)("",!0),(0,s.Wm)(m,{filled:"","use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique",modelValue:e.tags,"onUpdate:modelValue":t[5]||(t[5]=t=>e.tags=t),label:e.$t("components.settings.common.tags"),onKeyup:(0,H.D2)(a.addTag,["tab"])},null,8,["modelValue","label","onKeyup"])])])),_:1},8,["class"]),(0,s.Wm)(w),(0,s.Wm)(d,{class:(0,l.C_)(e.$q.platform.is.mobile?"q-px-none":"")},{default:(0,s.w5)((()=>[(0,s._)("h5",R,(0,l.zw)(e.$t("components.settings.workers.schedule")),1),(0,s._)("div",J,[null===e.schedules?((0,s.wg)(),(0,s.j4)(c,{key:0,type:"text"})):(0,s.kq)("",!0),(0,s.Wm)(y,{bordered:"",separator:"",class:"rounded-borders"},{default:(0,s.w5)((()=>[(0,s.Wm)(v,(0,s.dG)({class:"schedule-list-group","item-key":"order","component-data":{tag:"ul",name:"flip-list",type:"transition"},modelValue:e.schedules,"onUpdate:modelValue":t[6]||(t[6]=t=>e.schedules=t)},a.dragOptions),{item:(0,s.w5)((({element:t,index:o})=>[((0,s.wg)(),(0,s.j4)(b,{key:o,class:"q-pa-none rounded-borders","active-class":"schedule-list-item"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{avatar:"",class:"q-px-sm q-mx-sm"},{default:(0,s.w5)((()=>[(0,s.Wm)(k,{rounded:""},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{name:"drag_handle",class:"",style:{"max-width":"30px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"bg-white text-primary"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.$t("tooltips.move")),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(w,{inset:"",vertical:"",class:"q-mr-sm"}),(0,s.Wm)(f,{class:"q-px-sm q-mx-sm"},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{lines:"1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(t.repetitionLabel)+" @ "+(0,l.zw)(t.scheduleTime),1)])),_:2},1024),"count"===t.scheduleTask?((0,s.wg)(),(0,s.j4)(_,{key:0,caption:"",lines:"2"},{default:(0,s.w5)((()=>[(0,s._)("span",A,(0,l.zw)(t.scheduleTaskLabel),1),(0,s.Uk)(" = "+(0,l.zw)(t.scheduleWorkerCount),1)])),_:2},1024)):((0,s.wg)(),(0,s.j4)(_,{key:1,caption:"",lines:"2"},{default:(0,s.w5)((()=>[(0,s._)("span",K,(0,l.zw)(t.scheduleTaskLabel),1)])),_:2},1024))])),_:2},1024),(0,s.Wm)(w,{inset:"",vertical:"",class:"q-mx-sm"}),(0,s.Wm)(f,{center:"",side:""},{default:(0,s.w5)((()=>[(0,s._)("div",F,[(0,s.Wm)(r,{flat:"",dense:"",round:"",size:"12px",color:"negative",icon:"delete",onClick:e=>a.deleteSchedule(o)},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"bg-white text-primary"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.$t("tooltips.delete")),1)])),_:1})])),_:2},1032,["onClick"])])])),_:2},1024)])),_:2},1024))])),_:1},16,["modelValue"])])),_:1}),(0,s.Wm)(W,{class:"bg-transparent"},{default:(0,s.w5)((()=>[(0,s.Wm)(q),(0,s.Wm)(r,{round:"",flat:"",color:"primary",icon:"add",onClick:a.addNewScheduledEvent},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"bg-white text-primary"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.$t("tooltips.add")),1)])),_:1})])),_:1},8,["onClick"])])),_:1})])])),_:1},8,["class"])])),_:1})],2)])),_:1})])),_:1},8,["style"])),[[T,a.hide,void 0,{touch:!0,right:!0}]])])),_:1},8,["maximized","transition-show","transition-hide","onBeforeHide","onHide"])}var M=o(3130),X=o.n(M);const ee={class:"text-h6"},te={class:"row items-center justify-end"};function oe(e,t,o,i,n,a){const r=(0,s.up)("q-card-section"),u=(0,s.up)("q-select"),d=(0,s.up)("q-btn"),c=(0,s.up)("q-time"),h=(0,s.up)("q-popup-proxy"),p=(0,s.up)("q-icon"),m=(0,s.up)("q-input"),w=(0,s.up)("q-slider"),g=(0,s.up)("q-card-actions"),k=(0,s.up)("q-card"),f=(0,s.up)("q-dialog"),_=(0,s.Q2)("close-popup"),b=(0,s.Q2)("touch-swipe");return(0,s.wg)(),(0,s.j4)(f,{ref:"workerEventCreateDialogRef","transition-show":e.$q.platform.is.mobile?"jump-down":"scale","transition-hide":e.$q.platform.is.mobile?"jump-up":"scale",onBeforeHide:a.beforeDialogHide,onHide:a.onDialogHide},{default:(0,s.w5)((()=>[(0,s.wy)(((0,s.wg)(),(0,s.j4)(k,{style:(0,l.j5)([e.$q.platform.is.mobile?"max-width: 100vw;":"max-width: 95vw;",{width:"350px"}])},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s._)("div",ee,(0,l.zw)(e.$t("components.settings.workers.newScheduledEvent")),1)])),_:1}),(0,s.Wm)(r,{class:"q-pt-none"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{filled:"",modelValue:e.repetition,"onUpdate:modelValue":t[0]||(t[0]=t=>e.repetition=t),options:e.repetitionOptions,label:e.$t("components.settings.workers.repetition")},null,8,["modelValue","options","label"])])),_:1}),(0,s.Wm)(r,{class:"q-pt-none"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{filled:"",modelValue:e.scheduleTime,"onUpdate:modelValue":t[2]||(t[2]=t=>e.scheduleTime=t),mask:"time"},{append:(0,s.w5)((()=>[(0,s.Wm)(p,{name:"access_time",class:"cursor-pointer"},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{"transition-show":"scale","transition-hide":"scale"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{modelValue:e.scheduleTime,"onUpdate:modelValue":t[1]||(t[1]=t=>e.scheduleTime=t)},{default:(0,s.w5)((()=>[(0,s._)("div",te,[(0,s.wy)((0,s.Wm)(d,{label:e.$t("navigation.close"),color:"primary",flat:""},null,8,["label"]),[[_]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,s.Wm)(r,{class:"q-pt-none"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{filled:"",modelValue:e.scheduleTask,"onUpdate:modelValue":t[3]||(t[3]=t=>e.scheduleTask=t),options:e.scheduleTaskOptions,label:e.$t("components.settings.workers.task")},null,8,["modelValue","options","label"])])),_:1}),"count"===e.scheduleTask.value?((0,s.wg)(),(0,s.j4)(r,{key:0,class:"q-pt-none q-mt-md q-mx-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{modelValue:e.scheduleWorkerCount,"onUpdate:modelValue":t[4]||(t[4]=t=>e.scheduleWorkerCount=t),min:0,max:12,label:"","label-value":"Worker count: "+e.scheduleWorkerCount,"label-always":"",color:"primary"},null,8,["modelValue","label-value"])])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(g,{align:"right",class:"text-primary"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{flat:"",label:e.$t("navigation.cancel")},null,8,["label"]),(0,s.Wm)(d,{onClick:a.addNewScheduledEvent,flat:"",label:e.$t("components.settings.workers.addEvent")},null,8,["onClick","label"])])),_:1})])),_:1},8,["style"])),[[b,a.hide,void 0,{touch:!0,right:!0}]])])),_:1},8,["transition-show","transition-hide","onBeforeHide","onHide"])}const se={name:"WorkerEventCreateDialog",components:{},props:{},emits:["ok","hide","path"],methods:{show(){this.$refs.workerEventCreateDialogRef.show()},hide(){this.$refs.workerEventCreateDialogRef.hide()},onDialogHide(){this.$emit("ok",{repetition:this.repetitionOut,scheduleTime:this.scheduleTimeOut,scheduleTask:this.scheduleTaskOut,scheduleWorkerCount:this.scheduleWorkerCountOut}),this.$emit("hide")},beforeDialogHide(){},addNewScheduledEvent(){"undefined"!==typeof this.repetition.value&&"undefined"!==typeof this.scheduleTask.value?(this.repetitionOut=this.repetition.value,this.scheduleTimeOut=this.scheduleTime,this.scheduleTaskOut=this.scheduleTask.value,this.scheduleWorkerCountOut=this.scheduleWorkerCount,this.hide()):this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.invalidWorkerEvent"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}},watch:{libraryId(e){e.length>0&&(this.currentID=this.libraryId)}},data:function(){return{maximizedToggle:!0,repetition:(0,C.iH)(""),repetitionOptions:[{label:this.$t("components.settings.workers.scheduleLabels.daily"),value:"daily"},{label:this.$t("components.settings.workers.scheduleLabels.weekday"),value:"weekday"},{label:this.$t("components.settings.workers.scheduleLabels.weekend"),value:"weekend"},{label:this.$t("components.settings.workers.scheduleLabels.monday"),value:"monday"},{label:this.$t("components.settings.workers.scheduleLabels.tuesday"),value:"tuesday"},{label:this.$t("components.settings.workers.scheduleLabels.wednesday"),value:"wednesday"},{label:this.$t("components.settings.workers.scheduleLabels.thursday"),value:"thursday"},{label:this.$t("components.settings.workers.scheduleLabels.friday"),value:"friday"},{label:this.$t("components.settings.workers.scheduleLabels.saturday"),value:"saturday"},{label:this.$t("components.settings.workers.scheduleLabels.sunday"),value:"sunday"}],scheduleTime:(0,C.iH)("00:00"),scheduleTask:(0,C.iH)(""),scheduleTaskOptions:[{label:this.$t("components.settings.workers.scheduleLabels.count"),value:"count"},{label:this.$t("components.settings.workers.scheduleLabels.pause"),value:"pause"},{label:this.$t("components.settings.workers.scheduleLabels.resume"),value:"resume"}],scheduleWorkerCount:(0,C.iH)(1),repetitionOut:(0,C.iH)(null),scheduleTimeOut:(0,C.iH)(null),scheduleTaskOut:(0,C.iH)(null),scheduleWorkerCountOut:(0,C.iH)(null)}}};var le=o(1639),ie=o(2074),ne=o(4458),ae=o(3190),re=o(7887),ue=o(6611),de=o(2857),ce=o(2765),he=o(6770),pe=o(8879),me=o(8423),we=o(1821),ge=o(4871),ke=o(2146),fe=o(9984),_e=o.n(fe);const be=(0,le.Z)(se,[["render",oe]]),ve=be;_e()(se,"components",{QDialog:ie.Z,QCard:ne.Z,QCardSection:ae.Z,QSelect:re.Z,QInput:ue.Z,QIcon:de.Z,QPopupProxy:ce.Z,QTime:he.Z,QBtn:pe.Z,QSlider:me.Z,QCardActions:we.Z}),_e()(se,"directives",{TouchSwipe:ge.Z,ClosePopup:ke.Z});const ye={name:"WorkerGroupConfigureDialog",components:{draggable:X()},props:{dialogHeader:{type:String,default:" --- header --- "},workerGroupId:{type:Number,default:0}},emits:["ok","hide","path"],methods:{show(){this.$refs.workerGroupConfigureDialogRef.show(),this.fetchWorkerGroupConfig(this.workerGroupId)},hide(){this.$refs.workerGroupConfigureDialogRef.hide()},onDialogHide(){this.$emit("ok",{}),this.$emit("hide")},beforeDialogHide(){this.saveLibraryConfig()},fetchWorkerGroupConfig:function(e){if(0===e)return this.name="",this.workerCount=1,this.tags=[],void(this.schedules=[]);let t={id:e};S()({method:"post",url:(0,z.J4)("v2","settings/worker_group/read"),data:t}).then((e=>{this.currentID=e.data.id,this.locked=e.data.locked,this.name=e.data.name,this.workerCount=e.data.number_of_workers,this.tags=e.data.tags;let t=[];for(let o=0;o<e.data.worker_event_schedules.length;o++){let s=e.data.worker_event_schedules[o];t[t.length]={repetition:s.repetition,repetitionLabel:this.$t("components.settings.workers.scheduleLabels."+s.repetition),scheduleTime:s.schedule_time,scheduleTask:s.schedule_task,scheduleTaskLabel:this.$t("components.settings.workers.scheduleLabels."+s.schedule_task),scheduleWorkerCount:s.schedule_worker_count}}this.schedules=t}))},saveLibraryConfig:function(){let e=[];for(let o=0;o<this.schedules.length;o++)e[e.length]={repetition:this.schedules[o].repetition,schedule_time:this.schedules[o].scheduleTime,schedule_task:this.schedules[o].scheduleTask,schedule_worker_count:this.schedules[o].scheduleWorkerCount};let t={id:this.currentID,locked:this.locked,name:this.name,number_of_workers:this.workerCount,worker_event_schedules:e,tags:this.tags};S()({method:"post",url:(0,z.J4)("v2","settings/worker_group/write"),data:t}).then((e=>{this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200}),this.componentKey+=1})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},addTag:function(){this.newTag&&(this.tags[this.tags.length]=this.newTag,this.newTag=null)},addNewScheduledEvent:function(){this.$q.dialog({component:ve,componentProps:{}}).onOk((e=>{null!==e.repetition&&null!==e.scheduleTask&&(this.schedules[this.schedules.length]={repetition:e.repetition,repetitionLabel:this.$t("components.settings.workers.scheduleLabels."+e.repetition),scheduleTime:e.scheduleTime,scheduleTask:e.scheduleTask,scheduleTaskLabel:this.$t("components.settings.workers.scheduleLabels."+e.scheduleTask),scheduleWorkerCount:e.scheduleWorkerCount})})).onDismiss((()=>{}))},deleteSchedule:function(e){let t=[];for(let o=0;o<this.schedules.length;o++)o!==e&&(t[t.length]=this.schedules[o]);this.schedules=t}},watch:{workerGroupId(e){e.length>0&&(this.currentID=this.workerGroupId)}},computed:{dragOptions(){return{animation:100,group:"scheduleOrder",disabled:!1,ghostClass:"ghost",direction:"vertical",delay:200,delayOnTouchOnly:!0}}},data:function(){return{maximizedToggle:!0,showPluginSettings:(0,C.iH)(""),currentID:(0,C.iH)(null),locked:(0,C.iH)(!1),name:(0,C.iH)(null),workerCount:(0,C.iH)(null),newTag:(0,C.iH)(""),tags:(0,C.iH)([]),schedules:(0,C.iH)(null)}}};var qe=o(6858),We=o(7133),$e=o(926),Ce=o(3246),xe=o(490),Te=o(1233),Qe=o(1357),Ze=o(3115),Se=o(4526),ze=o(136);const He=(0,le.Z)(ye,[["render",Y]]),Le=He;_e()(ye,"components",{QDialog:ie.Z,QCard:ne.Z,QCardSection:ae.Z,QBtn:pe.Z,QTooltip:qe.Z,QSkeleton:We.ZP,QInput:ue.Z,QSlider:me.Z,QSelect:re.Z,QSeparator:$e.Z,QList:Ce.Z,QItem:xe.Z,QItemSection:Te.Z,QAvatar:Qe.Z,QIcon:de.Z,QItemLabel:Ze.Z,QBar:Se.Z,QSpace:ze.Z}),_e()(ye,"directives",{TouchSwipe:ge.Z,ClosePopup:ke.Z});const De={name:"SettingsWorkers",components:{},setup(){(0,x.Z)();const{t:e}=(0,T.QT)();let t=null,o=(0,$.A)(e);function l(){t=o.init()}function i(){o.close()}(0,s.bv)((()=>{l()})),(0,s.Ah)((()=>{i()}))},data(){return{workerGroups:(0,C.iH)(null),cachePath:(0,C.iH)(null)}},methods:{updateCacheWithDirectoryBrowser:function(){this.$q.dialog({component:Q.Z,componentProps:{dialogHeader:this.$t("headers.selectDirectory"),initialPath:this.cachePath,listType:"directories"}}).onOk((e=>{"undefined"!==typeof e.selectedPath&&null!==e.selectedPath&&(this.cachePath=e.selectedPath)})).onDismiss((()=>{}))},fetchSettings:function(){S()({method:"get",url:(0,z.J4)("v2","settings/read")}).then((e=>{this.cachePath=e.data.settings.cache_path})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToFetchSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},fetchWorkerGroupsList:function(){S()({method:"get",url:(0,z.J4)("v2","settings/worker_groups")}).then((e=>{let t=[];for(let o=0;o<e.data.worker_groups.length;o++){let s=e.data.worker_groups[o];t[t.length]={id:s.id,name:s.name,workerCount:s.number_of_workers,tags:s.tags,locked:s.locked}}this.workerGroups=t})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToFetchLibraryList"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},deleteWorkerGroup:function(e){let t;for(let o=0;o<this.workerGroups.length;o++)if(o===e){t=this.workerGroups[o].id;break}this.$q.dialog({title:this.$t("headers.confirm"),message:this.$t("components.settings.workers.confirmRemove"),cancel:this.$t("navigation.cancel"),ok:this.$t("navigation.yes"),persistent:!0}).onOk((()=>{let e={id:t};S()({method:"delete",url:(0,z.J4)("v2","settings/worker_group/remove"),data:e}).then((e=>{this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200}),this.fetchWorkerGroupsList()})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}))},save:function(){let e=[];for(let o=0;o<this.schedules.length;o++)e[e.length]={repetition:this.schedules[o].repetition,schedule_time:this.schedules[o].scheduleTime,schedule_task:this.schedules[o].scheduleTask,schedule_worker_count:this.schedules[o].scheduleWorkerCount};let t={settings:{worker_groups:this.workerGroups,number_of_workers:this.workerCount,cache_path:this.cachePath,worker_event_schedules:e}};S()({method:"post",url:(0,z.J4)("v2","settings/write"),data:t}).then((e=>{this.fetchSettings(),this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200})})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},configureWorkerGroup:function(e){let t;t="new"===e?0:this.workerGroups[e].id,this.$q.dialog({component:Le,componentProps:{dialogHeader:this.$t("headers.configureWorkerGroup"),workerGroupId:t}}).onOk((e=>{})).onDismiss((()=>{this.fetchSettings(),this.fetchWorkerGroupsList()}))}},created(){this.fetchSettings(),this.fetchWorkerGroupsList()}};var je=o(9885),Ge=o(8326);const Ve=(0,le.Z)(De,[["render",W]]),Ue=Ve;_e()(De,"components",{QPage:je.Z,QForm:Ge.Z,QSkeleton:We.ZP,QList:Ce.Z,QItem:xe.Z,QItemSection:Te.Z,QAvatar:Qe.Z,QItemLabel:Ze.Z,QTooltip:qe.Z,QSeparator:$e.Z,QBtn:pe.Z,QBar:Se.Z,QSpace:ze.Z,QInput:ue.Z,QIcon:de.Z,QCard:ne.Z})}}]);