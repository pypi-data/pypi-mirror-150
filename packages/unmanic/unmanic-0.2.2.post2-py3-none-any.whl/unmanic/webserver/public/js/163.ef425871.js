"use strict";(self["webpackChunkunmanic_frontend"]=self["webpackChunkunmanic_frontend"]||[]).push([[163],{7035:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Lt});var l=i(9835),a=i(6970);const n={class:"q-pa-none"},o={class:"row"},s={class:"col q-ma-sm"},r={class:"q-pa-md",style:{"max-width":"500px"}},c={class:"q-mb-none"},d={class:"q-gutter-sm"},u={class:"text-weight-bold"},p={class:"text-weight-bold"},m={class:"text-weight-bold"},g=(0,l._)("br",null,null,-1),h={class:"text-weight-bold"},y={class:"text-grey-8 q-gutter-xs"},f={class:"q-mb-none"},w={class:"q-gutter-sm"},b={key:2,class:"sub-setting"},_={class:"q-gutter-sm"},k={class:"q-gutter-sm"},q={class:"q-gutter-sm"},v={class:"q-mb-none"},S={class:"q-gutter-sm"},$={class:"q-mb-none"},x={class:"q-gutter-sm"},W={class:"q-mb-none"},P={class:"q-gutter-sm"},C={key:2,class:"sub-setting"},T={class:"q-gutter-sm"},L={class:"q-gutter-sm"},Q={key:0},Z={class:"row"},j=(0,l._)("div",{class:"col-6 text-center"},null,-1),D={class:"col-6 text-center"};function I(e,t,i,I,H,z){const V=(0,l.up)("q-skeleton"),F=(0,l.up)("q-avatar"),U=(0,l.up)("q-item-section"),O=(0,l.up)("q-item-label"),B=(0,l.up)("q-tooltip"),J=(0,l.up)("q-separator"),K=(0,l.up)("q-btn"),M=(0,l.up)("q-item"),A=(0,l.up)("q-list"),N=(0,l.up)("q-space"),R=(0,l.up)("q-bar"),E=(0,l.up)("q-toggle"),Y=(0,l.up)("q-input"),G=(0,l.up)("q-slider"),X=(0,l.up)("q-form"),ee=(0,l.up)("q-card"),te=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(te,{padding:""},{default:(0,l.w5)((()=>[(0,l._)("div",n,[(0,l._)("div",o,[(0,l._)("div",s,[(0,l._)("div",r,[(0,l.Wm)(X,{onSubmit:z.save,class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l._)("h5",c,(0,a.zw)(e.$t("components.settings.library.pathConfiguration")),1),(0,l._)("div",d,[null===H.libraryPaths?((0,l.wg)(),(0,l.j4)(V,{key:0,type:"text"})):(0,l.kq)("",!0),(0,l.Wm)(A,{bordered:"",separator:"",class:"rounded-borders"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(H.libraryPaths,((t,i)=>((0,l.wg)(),(0,l.j4)(M,{key:i,"active-class":"library-path-list-item"},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{"text-color":"grey-8",icon:"source"})])),_:1}),(0,l.Wm)(U,null,{default:(0,l.w5)((()=>[(0,l.Wm)(O,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(t.name),1)])),_:2},1024),(0,l.Wm)(O,{caption:"",lines:"1"},{default:(0,l.w5)((()=>[(0,l._)("span",u,(0,a.zw)(e.$t("components.settings.library.path"))+":",1),(0,l.Uk)(" "+(0,a.zw)(t.path),1)])),_:2},1024),(0,l.Wm)(O,{caption:"",lines:"1"},{default:(0,l.w5)((()=>[(0,l._)("span",p,(0,a.zw)(e.$t("components.settings.common.tags"))+":",1),(0,l.Uk)(" "+(0,a.zw)(t.tags.join(", ")||"None"),1)])),_:2},1024),(0,l.Wm)(B,null,{default:(0,l.w5)((()=>[(0,l._)("span",m,(0,a.zw)(e.$t("components.settings.library.path"))+":",1),(0,l.Uk)(" "+(0,a.zw)(t.path)+" ",1),g,(0,l._)("span",h,(0,a.zw)(e.$t("components.settings.common.tags"))+":",1),(0,l.Uk)(" "+(0,a.zw)(t.tags.join(", ")||"None"),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(J,{inset:"",vertical:"",class:"q-mx-sm"}),(0,l.Wm)(U,{center:"",side:""},{default:(0,l.w5)((()=>[(0,l._)("div",y,[(0,l.Wm)(K,{flat:"",dense:"",round:"",size:"12px",color:"grey-8",icon:"tune",onClick:e=>z.configureLibraryPath(i)},{default:(0,l.w5)((()=>[(0,l.Wm)(B,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("tooltips.configure")),1)])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(K,{flat:"",dense:"",round:"",size:"12px",color:"negative",icon:"delete",disable:t.locked,onClick:e=>z.deleteLibrary(i)},{default:(0,l.w5)((()=>[(0,l.Wm)(B,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("tooltips.delete")),1)])),_:1})])),_:2},1032,["disable","onClick"])])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,l.Wm)(R,{class:"bg-transparent"},{default:(0,l.w5)((()=>[(0,l.Wm)(N),(0,l.Wm)(K,{round:"",flat:"",color:"primary",icon:"add",onClick:z.addNewLibraryWithDirectoryBrowser},{default:(0,l.w5)((()=>[(0,l.Wm)(B,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("tooltips.add")),1)])),_:1})])),_:1},8,["onClick"])])),_:1})]),(0,l.Wm)(J,{class:"q-my-lg"}),(0,l._)("h5",f,(0,a.zw)(e.$t("components.settings.library.libraryScanner")),1),(0,l._)("div",w,[null===H.enableLibraryScanner?((0,l.wg)(),(0,l.j4)(V,{key:0,type:"QToggle"})):((0,l.wg)(),(0,l.j4)(E,{key:1,modelValue:H.enableLibraryScanner,"onUpdate:modelValue":t[0]||(t[0]=e=>H.enableLibraryScanner=e),label:e.$t("components.settings.library.enableLibraryScanner")},null,8,["modelValue","label"])),H.enableLibraryScanner?((0,l.wg)(),(0,l.iD)("div",b,[(0,l._)("div",_,[null===H.libraryScanSchedule?((0,l.wg)(),(0,l.j4)(V,{key:0,type:"QInput"})):(0,l.kq)("",!0),H.enableLibraryScanner&&null!==H.libraryScanSchedule?((0,l.wg)(),(0,l.j4)(Y,{key:1,outlined:"",type:"number",modelValue:H.libraryScanSchedule,"onUpdate:modelValue":t[1]||(t[1]=e=>H.libraryScanSchedule=e),label:e.$t("components.settings.library.libraryScannerSchedule"),"lazy-rules":"",rules:[t=>null!==t&&""!==t||e.$t("components.settings.library.libraryScannerScheduleNotValid"),t=>t>0||e.$t("components.settings.pleaseEnterAValidNumber")]},null,8,["modelValue","label","rules"])):(0,l.kq)("",!0)])])):(0,l.kq)("",!0)]),(0,l._)("div",k,[null===H.runLibraryScanOnStart?((0,l.wg)(),(0,l.j4)(V,{key:0,type:"QToggle"})):(0,l.kq)("",!0),null!==H.runLibraryScanOnStart?((0,l.wg)(),(0,l.j4)(E,{key:1,modelValue:H.runLibraryScanOnStart,"onUpdate:modelValue":t[2]||(t[2]=e=>H.runLibraryScanOnStart=e),label:e.$t("components.settings.library.runLibraryScanOnStart")},null,8,["modelValue","label"])):(0,l.kq)("",!0)]),(0,l._)("div",q,[null===H.libraryScanFollowSymlinks?((0,l.wg)(),(0,l.j4)(V,{key:0,type:"QToggle"})):(0,l.kq)("",!0),null!==H.libraryScanFollowSymlinks?((0,l.wg)(),(0,l.j4)(E,{key:1,modelValue:H.libraryScanFollowSymlinks,"onUpdate:modelValue":t[3]||(t[3]=e=>H.libraryScanFollowSymlinks=e),label:e.$t("components.settings.library.followSymlinks")},null,8,["modelValue","label"])):(0,l.kq)("",!0)]),(0,l.Wm)(J,{class:"q-my-lg"}),(0,l._)("h5",v,(0,a.zw)(e.$t("components.settings.library.fileTesting")),1),(0,l._)("div",S,[null===H.concurrentFileTesters?((0,l.wg)(),(0,l.j4)(V,{key:0,type:"QInput"})):(0,l.kq)("",!0),null!==H.concurrentFileTesters?((0,l.wg)(),(0,l.j4)(Y,{key:1,readonly:"",outlined:"",color:"primary",modelValue:H.concurrentFileTesters,"onUpdate:modelValue":t[4]||(t[4]=e=>H.concurrentFileTesters=e),label:e.$t("components.settings.library.concurrentFileTesters"),placeholder:H.concurrentFileTesters},null,8,["modelValue","label","placeholder"])):(0,l.kq)("",!0),null===H.concurrentFileTesters?((0,l.wg)(),(0,l.j4)(V,{key:2,type:"QSlider"})):(0,l.kq)("",!0),null!==H.concurrentFileTesters?((0,l.wg)(),(0,l.j4)(G,{key:3,modelValue:H.concurrentFileTesters,"onUpdate:modelValue":t[5]||(t[5]=e=>H.concurrentFileTesters=e),min:1,max:10,step:1,color:"primary"},null,8,["modelValue"])):(0,l.kq)("",!0)]),(0,l.Wm)(J,{class:"q-my-lg"}),(0,l._)("h5",$,(0,a.zw)(e.$t("components.settings.library.pendingTasks")),1),(0,l._)("div",x,[null===H.clearPendingTasksOnStart?((0,l.wg)(),(0,l.j4)(V,{key:0,type:"QToggle"})):((0,l.wg)(),(0,l.j4)(E,{key:1,modelValue:H.clearPendingTasksOnStart,"onUpdate:modelValue":t[6]||(t[6]=e=>H.clearPendingTasksOnStart=e),label:e.$t("components.settings.library.clearPendingTasksOnStart")},null,8,["modelValue","label"]))]),(0,l.Wm)(J,{class:"q-my-lg"}),(0,l._)("h5",W,(0,a.zw)(e.$t("components.settings.library.completedTasks")),1),(0,l._)("div",P,[null===H.autoManageCompletedTasks?((0,l.wg)(),(0,l.j4)(V,{key:0,type:"QToggle"})):((0,l.wg)(),(0,l.j4)(E,{key:1,modelValue:H.autoManageCompletedTasks,"onUpdate:modelValue":t[7]||(t[7]=e=>H.autoManageCompletedTasks=e),label:e.$t("components.settings.library.autoManageCompletedTasks")},null,8,["modelValue","label"])),H.autoManageCompletedTasks?((0,l.wg)(),(0,l.iD)("div",C,[(0,l._)("div",T,[null===H.maxAgeOfCompletedTasks?((0,l.wg)(),(0,l.j4)(V,{key:0,type:"QInput"})):(0,l.kq)("",!0),H.autoManageCompletedTasks&&null!==H.maxAgeOfCompletedTasks?((0,l.wg)(),(0,l.j4)(Y,{key:1,outlined:"",type:"number",modelValue:H.maxAgeOfCompletedTasks,"onUpdate:modelValue":t[8]||(t[8]=e=>H.maxAgeOfCompletedTasks=e),label:e.$t("components.settings.library.maxAgeOfCompletedTasks"),"lazy-rules":"",rules:[t=>null!==t&&""!==t||e.$t("components.settings.pleaseEnterAValidNumber"),t=>t>0||e.$t("components.settings.pleaseEnterAValidNumber")]},null,8,["modelValue","label","rules"])):(0,l.kq)("",!0)]),(0,l._)("div",L,[null===H.alwaysKeepFailedTasks?((0,l.wg)(),(0,l.j4)(V,{key:0,type:"QInput"})):((0,l.wg)(),(0,l.j4)(E,{key:1,modelValue:H.alwaysKeepFailedTasks,"onUpdate:modelValue":t[9]||(t[9]=e=>H.alwaysKeepFailedTasks=e),label:e.$t("components.settings.library.alwaysKeepFailedTasks")},null,8,["modelValue","label"]))])])):(0,l.kq)("",!0)]),(0,l._)("div",null,[(0,l.Wm)(K,{label:e.$t("navigation.submit"),type:"submit",color:"secondary"},null,8,["label"])])])),_:1},8,["onSubmit"])])])]),e.$q.platform.is.mobile?((0,l.wg)(),(0,l.iD)("div",Q,[(0,l.Wm)(J,{class:"q-mb-lg"}),(0,l._)("div",Z,[j,(0,l._)("div",D,[(0,l.Wm)(ee,{flat:"",bordered:"",onClick:t[10]||(t[10]=t=>e.$router.push("/ui/settings-workers")),class:"q-ma-xs"},{default:(0,l.w5)((()=>[(0,l.Wm)(K,{"icon-right":"navigate_next",flat:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("navigation.workers")),1)])),_:1})])),_:1})])])])):(0,l.kq)("",!0)])])),_:1})}var H=i(586),z=i(499),V=i(9302),F=i(9991),U=i(9370),O=i(9981),B=i.n(O),J=i(6888),K=i(1957);const M={class:"row items-center no-wrap"},A={key:0,class:"col"},N={class:"col"},R={class:"text-h6 text-blue-10"},E={key:1,class:"col-auto"},Y={class:"row items-center no-wrap q-mb-md"},G={class:"col"},X={class:"text-h5"},ee={class:"col-auto"},te={class:"q-pb-sm"},ie={class:"q-pb-sm"},le={class:"q-pb-sm"},ae={class:"q-pb-sm"},ne={class:"q-pb-sm"},oe={class:"q-pb-sm"},se={class:"row items-center no-wrap q-mb-md"},re={class:"col"},ce={class:"text-h6"},de={class:"q-gutter-sm"},ue={class:"text-grey-8 q-gutter-xs"},pe={class:"text-h6"};function me(e,t,i,n,o,s){const r=(0,l.up)("q-btn"),c=(0,l.up)("q-tooltip"),d=(0,l.up)("q-card-section"),u=(0,l.up)("q-skeleton"),p=(0,l.up)("q-input"),m=(0,l.up)("q-icon"),g=(0,l.up)("q-item-label"),h=(0,l.up)("q-item-section"),y=(0,l.up)("q-toggle"),f=(0,l.up)("q-item"),w=(0,l.up)("q-select"),b=(0,l.up)("q-separator"),_=(0,l.up)("q-img"),k=(0,l.up)("q-list"),q=(0,l.up)("q-space"),v=(0,l.up)("q-bar"),S=(0,l.up)("LibraryConfigurePluginFlowList"),$=(0,l.up)("q-card"),x=(0,l.up)("PluginInfo"),W=(0,l.up)("q-dialog"),P=(0,l.Q2)("close-popup"),C=(0,l.Q2)("touch-swipe");return(0,l.wg)(),(0,l.j4)(W,{ref:"libraryConfigureDialogRef",maximized:e.$q.platform.is.mobile,"transition-show":e.$q.platform.is.mobile?"jump-left":"slide-left","transition-hide":e.$q.platform.is.mobile?"jump-right":"slide-right","full-height":"",position:"right",onBeforeHide:s.beforeDialogHide,onHide:s.onDialogHide},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)($,{style:(0,a.j5)([e.$q.platform.is.mobile?"max-width: 100vw;":"max-width: 95vw;",{width:"700px"}])},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"bg-card-head"},{default:(0,l.w5)((()=>[(0,l._)("div",M,[e.$q.platform.is.mobile?((0,l.wg)(),(0,l.iD)("div",A,[(0,l.wy)((0,l.Wm)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_back"},null,512),[[P]])])):(0,l.kq)("",!0),(0,l._)("div",N,[(0,l._)("div",R,(0,a.zw)(i.dialogHeader),1)]),e.$q.platform.is.mobile?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",E,[(0,l.wy)(((0,l.wg)(),(0,l.j4)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_forward"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("tooltips.close")),1)])),_:1})])),_:1})),[[P]])]))])])),_:1}),(0,l.Wm)(d,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l._)("div",{class:(0,a.C_)(e.$q.platform.is.mobile?"q-px-none":"")},[(0,l.Wm)($,{flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:(0,a.C_)(e.$q.platform.is.mobile?"q-px-none":"")},{default:(0,l.w5)((()=>[(0,l._)("div",Y,[(0,l._)("div",G,[(0,l._)("div",X,(0,a.zw)(e.$t("components.settings.common.configuration")),1)]),(0,l._)("div",ee,[(0,l.Wm)(r,{round:"",flat:"",color:"primary",icon:"download",onClick:s.exportPluginConfig},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("components.settings.library.exportLibraryConfig")),1)])),_:1})])),_:1},8,["onClick"]),(0,l.Wm)(r,{round:"",flat:"",color:"primary",icon:"publish",onClick:s.importPluginConfig},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("components.settings.library.importLibraryConfig")),1)])),_:1})])),_:1},8,["onClick"]),(0,l.Wm)(r,{round:"",flat:"",color:"primary",icon:"content_copy",onClick:s.cloneLibrary},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("components.settings.library.cloneLibrary")),1)])),_:1})])),_:1},8,["onClick"]),e.locked?((0,l.wg)(),(0,l.j4)(r,{key:0,round:"",flat:"",color:"negative",icon:"lock",onClick:t[0]||(t[0]=t=>e.locked=!1)},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("components.settings.library.locked")),1)])),_:1})])),_:1})):((0,l.wg)(),(0,l.j4)(r,{key:1,round:"",flat:"",color:"primary",icon:"lock_open",onClick:t[1]||(t[1]=t=>e.locked=!0)},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("components.settings.library.unlocked")),1)])),_:1})])),_:1}))])]),(0,l._)("div",te,[null===e.name?((0,l.wg)(),(0,l.j4)(u,{key:0,type:"QInput"})):(0,l.kq)("",!0),null!==e.name?((0,l.wg)(),(0,l.j4)(p,{key:1,outlined:"",color:"primary",modelValue:e.name,"onUpdate:modelValue":t[2]||(t[2]=t=>e.name=t),label:e.$t("components.settings.library.name"),placeholder:e.name},null,8,["modelValue","label","placeholder"])):(0,l.kq)("",!0)]),(0,l._)("div",ie,[null===e.path?((0,l.wg)(),(0,l.j4)(u,{key:0,type:"QInput"})):((0,l.wg)(),(0,l.j4)(p,{key:1,readonly:"",outlined:"",color:"primary",modelValue:e.path,"onUpdate:modelValue":t[3]||(t[3]=t=>e.path=t),label:e.$t("components.settings.library.path"),placeholder:e.path,onClick:s.updateLibraryWithDirectoryBrowser},{append:(0,l.w5)((()=>[(0,l.Wm)(m,{onClick:s.updateLibraryWithDirectoryBrowser,class:"cursor-pointer",name:"folder_open"},null,8,["onClick"])])),_:1},8,["modelValue","label","placeholder","onClick"]))]),(0,l._)("div",le,[null===e.enableScanner?((0,l.wg)(),(0,l.j4)(u,{key:0,type:"QToggle"})):((0,l.wg)(),(0,l.j4)(f,{key:1,tag:"label",class:"border-hover",style:{"padding-left":"12px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("components.settings.library.enableScanner")),1)])),_:1})])),_:1}),(0,l.Wm)(h,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{modelValue:e.enableScanner,"onUpdate:modelValue":t[4]||(t[4]=t=>e.enableScanner=t)},null,8,["modelValue"])])),_:1})])),_:1}))]),(0,l._)("div",ae,[null===e.enableInotify?((0,l.wg)(),(0,l.j4)(u,{key:0,type:"QToggle"})):((0,l.wg)(),(0,l.j4)(f,{key:1,tag:"label",class:"border-hover",style:{"padding-left":"12px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("components.settings.library.enableInotify")),1)])),_:1})])),_:1}),(0,l.Wm)(h,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{modelValue:e.enableInotify,"onUpdate:modelValue":t[5]||(t[5]=t=>e.enableInotify=t)},null,8,["modelValue"])])),_:1})])),_:1}))]),(0,l._)("div",ne,[null===e.priorityScore?((0,l.wg)(),(0,l.j4)(u,{key:0,type:"QInput"})):(0,l.kq)("",!0),null!==e.priorityScore?((0,l.wg)(),(0,l.j4)(p,{key:1,outlined:"",color:"primary",modelValue:e.priorityScore,"onUpdate:modelValue":t[6]||(t[6]=t=>e.priorityScore=t),modelModifiers:{number:!0},label:e.$t("components.settings.library.priorityScore"),type:"number"},null,8,["modelValue","label"])):(0,l.kq)("",!0)]),(0,l._)("div",oe,[null===e.tags?((0,l.wg)(),(0,l.j4)(u,{key:0,type:"QInput"})):(0,l.kq)("",!0),(0,l.Wm)(w,{filled:"","use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique",modelValue:e.tags,"onUpdate:modelValue":t[7]||(t[7]=t=>e.tags=t),label:e.$t("components.settings.common.tags"),onKeyup:(0,K.D2)(s.addTag,["tab"])},null,8,["modelValue","label","onKeyup"])])])),_:1},8,["class"]),(0,l.Wm)(b),(0,l.Wm)(d,{class:(0,a.C_)(e.$q.platform.is.mobile?"q-px-none":"")},{default:(0,l.w5)((()=>[(0,l._)("div",se,[(0,l._)("div",re,[(0,l._)("div",ce,(0,a.zw)(e.$t("components.settings.library.plugins")),1)])]),(0,l._)("div",de,[null===e.enabledPlugins?((0,l.wg)(),(0,l.j4)(u,{key:0,type:"text"})):(0,l.kq)("",!0),(0,l.Wm)(k,{bordered:"",separator:"",class:"rounded-borders"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.enabledPlugins,((t,i)=>((0,l.wg)(),(0,l.iD)("div",{key:i},[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{src:t.icon},null,8,["src"])])),_:2},1024),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(t.name),1)])),_:2},1024),(0,l.Wm)(g,{caption:"",lines:"2"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(t.description),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(b,{inset:"",vertical:"",class:"q-mx-sm"}),(0,l.Wm)(h,{center:"",side:""},{default:(0,l.w5)((()=>[(0,l._)("div",ue,[(0,l.Wm)(r,{flat:"",dense:"",round:"",size:"12px",color:"grey-8",icon:"tune",disable:!t.has_config,onClick:i=>e.showPluginSettings=t.plugin_id},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("tooltips.configureForThisLibrary")),1)])),_:1})])),_:2},1032,["disable","onClick"]),(0,l.Wm)(r,{flat:"",dense:"",round:"",size:"12px",color:"negative",icon:"remove_circle_outline",onClick:e=>s.removePluginFromList(i)},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("tooltips.removeFromThisLibrary")),1)])),_:1})])),_:2},1032,["onClick"])])])),_:2},1024)])),_:2},1024)])))),128))])),_:1}),(0,l.Wm)(v,{class:"bg-transparent q-mb-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(q),(0,l.Wm)(r,{round:"",flat:"",color:"primary",icon:"add",onClick:s.selectPluginFromList},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("components.settings.library.addPluginToThisLibrary")),1)])),_:1})])),_:1},8,["onClick"])])),_:1})]),(0,l._)("div",pe,(0,a.zw)(e.$t("components.settings.library.pluginFlow")),1),((0,l.wg)(),(0,l.j4)(S,{libraryId:i.libraryId,key:e.componentKey},null,8,["libraryId"]))])),_:1},8,["class"])])),_:1})],2)])),_:1})])),_:1},8,["style"])),[[C,s.hide,void 0,{touch:!0,right:!0}]]),(0,l.Wm)(x,{showPluginSettings:e.showPluginSettings,libraryId:i.libraryId,onHide:s.closePluginInfo},null,8,["showPluginSettings","libraryId","onHide"])])),_:1},8,["maximized","transition-show","transition-hide","onBeforeHide","onHide"])}var ge=i(6225);const he={class:"row items-center no-wrap"},ye={key:0,class:"col"},fe={class:"col"},we={class:"text-h6 text-blue-10"},be={key:1,class:"col-auto"},_e={class:"row q-gutter-xs q-mt-xs justify-between"},ke={class:"col-auto"},qe={class:"col-auto",style:{"max-width":"200px"}};function ve(e,t,i,n,o,s){const r=(0,l.up)("q-btn"),c=(0,l.up)("q-tooltip"),d=(0,l.up)("q-card-section"),u=(0,l.up)("q-icon"),p=(0,l.up)("q-input"),m=(0,l.up)("q-separator"),g=(0,l.up)("q-img"),h=(0,l.up)("q-item-section"),y=(0,l.up)("q-item-label"),f=(0,l.up)("q-item"),w=(0,l.up)("q-list"),b=(0,l.up)("q-card"),_=(0,l.up)("q-dialog"),k=(0,l.Q2)("close-popup"),q=(0,l.Q2)("ripple"),v=(0,l.Q2)("touch-swipe");return(0,l.wg)(),(0,l.j4)(_,{ref:"pluginSelectorDialogRef",maximized:e.$q.platform.is.mobile,"transition-show":"jump-left","transition-hide":"jump-right","full-height":"",onHide:s.onDialogHide},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(b,{style:(0,a.j5)([e.$q.platform.is.mobile?"max-width: 100vw;":"max-width: 95vw;",{width:"700px"}])},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"bg-card-head"},{default:(0,l.w5)((()=>[(0,l._)("div",he,[e.$q.platform.is.mobile?((0,l.wg)(),(0,l.iD)("div",ye,[(0,l.wy)((0,l.Wm)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_back"},null,512),[[k]])])):(0,l.kq)("",!0),(0,l._)("div",fe,[(0,l._)("div",we,(0,a.zw)(i.dialogHeader),1)]),e.$q.platform.is.mobile?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",be,[(0,l.wy)(((0,l.wg)(),(0,l.j4)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"close_fullscreen"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("tooltips.close")),1)])),_:1})])),_:1})),[[k]])]))])])),_:1}),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l._)("div",_e,[(0,l._)("div",ke,[(0,l.Wm)(r,{onClick:s.openPluginInstaller,class:"",color:"secondary","icon-right":"add",label:e.$t("components.plugins.installPlugins")},null,8,["onClick","label"])]),(0,l._)("div",qe,[(0,l.Wm)(p,{filled:"",dense:"",class:"shadow-1",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filter=t),placeholder:e.$t("navigation.search"),onUpdate:s.fetchPluginsList},{append:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"search"})])),_:1},8,["modelValue","placeholder","onUpdate"])])])])),_:1}),(0,l.Wm)(d,{class:(0,a.C_)(e.$q.platform.is.mobile?"q-px-none":"")},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"q-pa-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{bordered:"",padding:""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{spaced:"",inset:""}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.plugins,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t},[(0,l.wy)(((0,l.wg)(),(0,l.j4)(f,{clickable:"",onClick:t=>s.selectPlugin(e)},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{src:e.icon},null,8,["src"])])),_:2},1024),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.name),1)])),_:2},1024),(0,l.Wm)(y,{caption:"",lines:"2"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.description),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[q]]),(0,l.Wm)(m,{spaced:"",inset:""})])))),128))])),_:1})])),_:1})])),_:1})])),_:1},8,["class"])])),_:1},8,["style"])),[[v,s.hide,void 0,{touch:!0,left:!0,right:!0}]])])),_:1},8,["maximized","onHide"])}var Se=i(282);const $e={name:"PluginSelectorDialog",props:{dialogHeader:{type:String,default:" --- header --- "},hidePlugins:{type:Array}},emits:["ok","hide","path"],methods:{show(){this.$refs.pluginSelectorDialogRef.show(),this.fetchPluginsList()},hide(){this.$refs.pluginSelectorDialogRef.hide()},onDialogHide(){this.$emit("ok",{selectedPlugin:this.currentPlugin}),this.$emit("hide")},fetchPluginsList:function(){let e={start:0,length:1e3,search_value:this.filter,order_by:"name",order_direction:"asc"};B()({method:"post",url:(0,J.J4)("v2","plugins/installed"),data:e}).then((e=>{let t=e.data.results,i=[];for(let l=0;l<t.length;l++)this.hidePlugins.indexOf(t[l].plugin_id)>-1||(i[i.length]={plugin_id:t[l].plugin_id,name:t[l].name,author:t[l].author,description:t[l].description,version:t[l].version,icon:t[l].icon,tags:t[l].tags,has_config:t[l].has_config});this.plugins=i}))},selectPlugin(e){this.currentPlugin=e,this.hide()},openPluginInstaller(){this.$q.dialog({component:Se.Z,componentProps:{}}).onOk((e=>{})).onDismiss((()=>{this.fetchPluginsList()}))}},watch:{initialPath(e){e.length>0&&(this.currentPlugin=this.initialPath)},filter(e){this.fetchPluginsList()}},data:function(){return{maximizedToggle:!0,currentPlugin:(0,z.iH)(null),plugins:(0,z.iH)([]),filter:(0,z.iH)("")}}};var xe=i(1639),We=i(2074),Pe=i(4458),Ce=i(3190),Te=i(8879),Le=i(6858),Qe=i(6611),Ze=i(2857),je=i(3246),De=i(926),Ie=i(490),He=i(1233),ze=i(335),Ve=i(3115),Fe=i(4871),Ue=i(2146),Oe=i(1136),Be=i(9984),Je=i.n(Be);const Ke=(0,xe.Z)($e,[["render",ve]]),Me=Ke;Je()($e,"components",{QDialog:We.Z,QCard:Pe.Z,QCardSection:Ce.Z,QBtn:Te.Z,QTooltip:Le.Z,QInput:Qe.Z,QIcon:Ze.Z,QList:je.Z,QSeparator:De.Z,QItem:Ie.Z,QItemSection:He.Z,QImg:ze.Z,QItemLabel:Ve.Z}),Je()($e,"directives",{TouchSwipe:Fe.Z,ClosePopup:Ue.Z,Ripple:Oe.Z});const Ae={class:"q-gutter-sm"},Ne={class:"row"},Re={class:"text-weight-medium q-ml-sm"},Ee={class:"text-weight-medium"};function Ye(e,t,i,n,o,s){const r=(0,l.up)("q-tooltip"),c=(0,l.up)("q-icon"),d=(0,l.up)("q-avatar"),u=(0,l.up)("q-item-section"),p=(0,l.up)("q-separator"),m=(0,l.up)("q-skeleton"),g=(0,l.up)("q-img"),h=(0,l.up)("q-item-label"),y=(0,l.up)("q-item"),f=(0,l.up)("draggable"),w=(0,l.up)("q-list"),b=(0,l.up)("q-card-section"),_=(0,l.up)("q-card"),k=(0,l.up)("q-expansion-item");return(0,l.wg)(),(0,l.iD)("div",Ae,[(0,l.Wm)(w,{style:{width:"100%"}},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.pluginTypes,(t=>((0,l.wg)(),(0,l.j4)(k,(0,l.dG)({key:t.type},t,{group:"pluginTypes",icon:"list_alt",label:e.$t(t.labelCode).length<50?e.$t(t.labelCode):e.$t(t.labelCode).substring(0,48)+"..",caption:e.$t(t.labelCode+"Caption")!==t.labelCode+"Caption"?e.$t(t.labelCode+"Caption"):"","caption-lines":"4",class:"text-h8 text-primary"}),{default:(0,l.w5)((()=>[(0,l.Wm)(_,{inline:"",style:{},class:"q-ma-lg-xs q-pa-lg-sm q-pa-sm-none"},{default:(0,l.w5)((()=>[(0,l._)("div",Ne,[(0,l.Wm)(b,{class:"col justify-center full-height full-width text-center q-px-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{bordered:"",class:"rounded-borders q-pl-none",style:{}},{default:(0,l.w5)((()=>[(0,l.Wm)(f,(0,l.dG)({class:"library-plugin-flow-group","item-key":"order",tag:"transition-group","component-data":{tag:"ul",name:"flip-list",type:"transition"},modelValue:e.pluginFlowByType[t.type],"onUpdate:modelValue":i=>e.pluginFlowByType[t.type]=i},s.dragOptions,{onEnd:e=>s.savePluginFlow(t.type)}),{item:(0,l.w5)((({element:t,index:i})=>[((0,l.wg)(),(0,l.j4)(y,{key:i,class:"q-px-none rounded-borders","active-class":"library-plugin-flow-item"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{avatar:"",class:"q-px-sm q-mx-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{rounded:""},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{name:"drag_handle",class:"",style:{"max-width":"30px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("tooltips.move")),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(p,{inset:"",vertical:"",class:"q-mr-sm"}),(0,l.Wm)(u,{top:"",class:"q-mx-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{lines:"1",class:"text-left"},{default:(0,l.w5)((()=>[t.icon?((0,l.wg)(),(0,l.j4)(d,{key:1,rounded:"",size:"35px"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{src:t.icon,class:"",style:{"max-width":"30px"}},null,8,["src"])])),_:2},1024)):((0,l.wg)(),(0,l.j4)(m,{key:0,width:"35px",height:"35px"})),(0,l._)("span",Re,(0,a.zw)(t.name),1)])),_:2},1024),(0,l.Wm)(h,{caption:"",lines:"1",class:"text-left q-ml-sm"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(t.description),1)])),_:2},1024),(0,l.Wm)(r,{anchor:"center middle",self:"center middle",class:"bg-white text-primary lt-sm"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(t.name),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(p,{inset:"",vertical:"",class:"gt-xs q-mx-sm"}),(0,l.Wm)(u,{side:"",class:"gt-xs q-px-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{lines:"1",class:"text-left"},{default:(0,l.w5)((()=>[(0,l._)("span",Ee,(0,a.zw)(i+1),1),(0,l.Wm)(r,{anchor:"center right",self:"center left",class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("tooltips.position")),1)])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1024))])),_:2},1040,["modelValue","onUpdate:modelValue","onEnd"])])),_:2},1024)])),_:2},1024)])])),_:2},1024)])),_:2},1040,["label","caption"])))),128))])),_:1})])}var Ge=i(3130),Xe=i.n(Ge);const et={name:"LibraryConfigurePluginFlowList",components:{draggable:Xe()},props:{libraryId:{type:Number,required:!1}},methods:{fetchPluginTypes:function(){B()({method:"get",url:(0,J.J4)("v2","plugins/flow/types")}).then((e=>{let t=e.data.results,i=[];for(let l=0;l<t.length;l++){let e=t[l].split("_").map(((e,t)=>0===t?e:e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase())).join("");i[i.length]={type:t[l],labelCode:"components.plugins.types."+e}}this.pluginTypes=i,this.fetchPluginFlow()}))},fetchPluginFlow:function(){for(let e=0;e<this.pluginTypes.length;e++){let t={plugin_type:this.pluginTypes[e].type,library_id:this.libraryId};B()({method:"post",url:(0,J.J4)("v2","plugins/flow"),data:t}).then((t=>{this.pluginFlowByType[this.pluginTypes[e].type]=t.data.results}))}},savePluginFlow:function(e){let t={plugin_type:e,plugin_flow:this.pluginFlowByType[e],library_id:this.libraryId};B()({method:"post",url:(0,J.J4)("v2","plugins/flow/save"),data:t}).then((e=>{})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("components.plugins.errorSavingFlow"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},movePluginInFlow:function(e,t,i,l){let a,n=this.pluginFlowByType[e].slice();if("up"===l){if(0===t)return void console.debug("Cannot move up - already at the top");a=t-1}if("down"===l&&(a=t+1,a===n.length))return void console.debug("Cannot move down - already at the bottom");let o=n[t];n.splice(t,1),n.splice(a,0,o),this.pluginFlowByType[e]=n,this.savePluginFlow(e)}},created(){this.fetchPluginTypes()},data:function(){return{options:{dropzoneSelector:".q-list",draggableSelector:".q-item"},pluginTypes:(0,z.iH)([]),pluginFlowByType:(0,z.iH)({}),files:(0,z.iH)([])}},computed:{dragOptions(){return{animation:100,group:"pluginFlow",disabled:!1,ghostClass:"ghost",direction:"vertical",delay:200,delayOnTouchOnly:!0}}},setup(){return{}}};var tt=i(1123),it=i(1357),lt=i(7133);const at=(0,xe.Z)(et,[["render",Ye]]),nt=at;Je()(et,"components",{QList:je.Z,QExpansionItem:tt.Z,QCard:Pe.Z,QCardSection:Ce.Z,QItem:Ie.Z,QItemSection:He.Z,QAvatar:it.Z,QIcon:Ze.Z,QTooltip:Le.Z,QSeparator:De.Z,QSkeleton:lt.ZP,QImg:ze.Z,QItemLabel:Ve.Z});const ot={class:"row items-center no-wrap"},st={key:0,class:"col"},rt={class:"col"},ct={class:"text-h6 text-blue-10"},dt={key:1,class:"col-auto"},ut={key:0},pt={class:"q-mt-md float-right"};function mt(e,t,i,n,o,s){const r=(0,l.up)("q-btn"),c=(0,l.up)("q-tooltip"),d=(0,l.up)("q-card-section"),u=(0,l.up)("q-input"),p=(0,l.up)("q-card"),m=(0,l.up)("q-dialog"),g=(0,l.Q2)("close-popup"),h=(0,l.Q2)("touch-swipe");return(0,l.wg)(),(0,l.j4)(m,{ref:"jsonDialogRef",maximized:e.$q.platform.is.mobile,"transition-show":"jump-left","transition-hide":"jump-right","full-height":"",onHide:s.onDialogHide},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(p,{style:(0,a.j5)([e.$q.platform.is.mobile?"max-width: 100vw;":"max-width: 95vw;",{width:"700px"}])},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"bg-card-head"},{default:(0,l.w5)((()=>[(0,l._)("div",ot,[e.$q.platform.is.mobile?((0,l.wg)(),(0,l.iD)("div",st,[(0,l.wy)((0,l.Wm)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_back"},null,512),[[g]])])):(0,l.kq)("",!0),(0,l._)("div",rt,[(0,l._)("div",ct,(0,a.zw)(i.dialogHeader),1)]),e.$q.platform.is.mobile?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",dt,[(0,l.wy)(((0,l.wg)(),(0,l.j4)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"close_fullscreen"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("tooltips.close")),1)])),_:1})])),_:1})),[[g]])]))])])),_:1}),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,{flat:"",bordered:"",class:"q-pa-sm",style:{width:"100%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"q-pt-none"},{default:(0,l.w5)((()=>["export"===i.mode?((0,l.wg)(),(0,l.iD)("pre",ut,(0,a.zw)(i.jsonData),1)):((0,l.wg)(),(0,l.j4)(u,{key:1,modelValue:e.importString,"onUpdate:modelValue":t[0]||(t[0]=t=>e.importString=t),rows:"30",type:"textarea"},null,8,["modelValue"]))])),_:1})])),_:1})])),_:1}),(0,l.Wm)(d,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l._)("div",pt,["export"===i.mode?((0,l.wg)(),(0,l.j4)(r,{key:0,label:e.$t("navigation.copy"),color:"secondary",onClick:s.copyJson},null,8,["label","onClick"])):((0,l.wg)(),(0,l.j4)(r,{key:1,label:e.$t("navigation.submit"),color:"secondary",onClick:s.hide},null,8,["label","onClick"]))])])),_:1})])),_:1},8,["style"])),[[h,s.hide,void 0,{touch:!0,left:!0,right:!0}]])])),_:1},8,["maximized","onHide"])}var gt=i(5054);const ht={props:{dialogHeader:{type:String,default:" --- header --- ",required:!0},jsonData:{type:String,default:" --- jsonData --- ",required:!0},mode:{type:String,default:"export",required:!0}},emits:["ok","hide"],methods:{show(){this.$refs.jsonDialogRef.show()},hide(){this.$refs.jsonDialogRef.hide()},onDialogHide(){this.$emit("ok",{importString:this.importString}),this.$emit("hide")},copyJson(){(0,gt.Z)(this.jsonData).then((()=>{this.$q.notify({color:"secondary",position:"top",message:this.$t("notifications.copied"),timeout:200})})).catch((()=>{}))}},data:function(){return{maximizedToggle:!0,importString:(0,z.iH)(null)}}},yt=(0,xe.Z)(ht,[["render",mt]]),ft=yt;Je()(ht,"components",{QDialog:We.Z,QCard:Pe.Z,QCardSection:Ce.Z,QBtn:Te.Z,QTooltip:Le.Z,QInput:Qe.Z}),Je()(ht,"directives",{TouchSwipe:Fe.Z,ClosePopup:Ue.Z});var wt=i(6950);const bt={name:"LibraryConfigureDialog",components:{LibraryConfigurePluginFlowList:nt,PluginInfo:ge.Z},props:{dialogHeader:{type:String,default:" --- header --- "},libraryId:{type:Number,default:0}},emits:["ok","hide","path"],methods:{show(){this.$refs.libraryConfigureDialogRef.show(),this.fetchLibraryConfig(this.libraryId)},hide(){this.$refs.libraryConfigureDialogRef.hide()},onDialogHide(){this.$emit("ok",{}),this.$emit("hide")},beforeDialogHide(){this.saveLibraryConfig()},fetchLibraryConfig:function(e){let t={id:e};B()({method:"post",url:(0,J.J4)("v2","settings/library/read"),data:t}).then((e=>{let t=e.data.library_config;this.currentID=t.id,this.locked=t.locked,this.name=t.name,this.path=t.path,this.enableScanner=t.enable_scanner,this.enableInotify=t.enable_inotify,this.priorityScore=t.priority_score,this.tags=t.tags,this.enabledPlugins=e.data.plugins.enabled_plugins}))},saveLibraryConfig:function(){let e={library_config:{id:this.currentID,locked:this.locked,name:this.name,path:this.path,enable_scanner:this.enableScanner,enable_inotify:this.enableInotify,priority_score:this.priorityScore,tags:this.tags},plugins:{enabled_plugins:this.enabledPlugins}};B()({method:"post",url:(0,J.J4)("v2","settings/library/write"),data:e}).then((e=>{this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200}),this.componentKey+=1})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},addTag:function(){this.newTag&&(this.tags[this.tags.length]=this.newTag,this.newTag=null)},deleteTag:function(e){for(let t=0;t<this.tags.length;t++)this.tags[t]===e&&this.tags.splice(t,1)},updateLibraryWithDirectoryBrowser:function(){this.$q.dialog({component:U.Z,componentProps:{dialogHeader:this.$t("headers.selectDirectory"),initialPath:this.path,listType:"directories"}}).onOk((e=>{"undefined"!==typeof e.selectedPath&&null!==e.selectedPath&&(this.path=e.selectedPath)})).onDismiss((()=>{}))},selectPluginFromList:function(){let e=[];for(let t=0;t<this.enabledPlugins.length;t++)e[e.length]=this.enabledPlugins[t].plugin_id;this.$q.dialog({component:Me,componentProps:{dialogHeader:this.$t("headers.selectPlugin"),hidePlugins:e}}).onOk((e=>{if("undefined"!==typeof e.selectedPlugin&&null!==e.selectedPlugin){let t=this.enabledPlugins;t.push(e.selectedPlugin),t.sort(((e,t)=>e.name.localeCompare(t.name))),this.enabledPlugins=t,this.saveLibraryConfig()}})).onDismiss((()=>{}))},removePluginFromList:function(e){let t=[];for(let i=0;i<this.enabledPlugins.length;i++){let l=this.enabledPlugins[i];i!==e&&(t[t.length]=l)}this.enabledPlugins=t,this.saveLibraryConfig()},closePluginInfo:function(){this.showPluginSettings=""},exportPluginConfig:function(){let e={id:this.currentID};B()({method:"post",url:(0,J.J4)("v2","settings/library/export"),data:e}).then((e=>{this.$q.dialog({component:ft,componentProps:{dialogHeader:this.$t("components.settings.library.exportLibraryConfig"),jsonData:JSON.stringify(e.data,null,2),mode:"export"}}).onDismiss((()=>{}))})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},importData:function(e,t){let i=JSON.parse(e);i.library_id=this.currentID,t?this.showLoading=!1:(this.showLoading=!0,wt.Z.show({message:this.$t("components.settings.library.importPluginConfigMessage"),messageColor:"transparent"})),setTimeout((()=>{this.showLoading&&wt.Z.show({message:this.$t("components.settings.library.importPluginConfigMessage"),messageColor:"white"})}),1e3),B()({method:"post",url:(0,J.J4)("v2","settings/library/import"),data:i}).then((e=>{this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200}),this.showLoading=!1,wt.Z.hide(),this.componentKey+=1,this.fetchLibraryConfig(this.currentID)})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]}),this.showLoading=!1,wt.Z.hide()}))},importPluginConfig:function(){console.log("importPluginConfig"),this.$q.dialog({component:ft,componentProps:{dialogHeader:this.$t("components.settings.library.importLibraryConfig"),jsonData:"",mode:"import"}}).onOk((e=>{"undefined"!==typeof e.importString&&null!==e.importString&&this.importData(e.importString)})).onDismiss((()=>{}))},cloneLibrary:function(){let e={id:this.currentID};B()({method:"post",url:(0,J.J4)("v2","settings/library/export"),data:e}).then((e=>{let t=e.data,i=(Math.random()+1).toString(36).substring(7),l=this.name+" ("+this.$t("navigation.copy")+" - "+i+")";t.library_config={name:l,path:this.path,enable_scanner:this.enableScanner,enable_inotify:this.enableInotify,priority_score:this.priorityScore,tags:this.tags};let a=JSON.stringify(t,null,2);this.currentID=0,this.importData(a,!0),this.currentID=this.libraryId,this.hide()})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}},watch:{libraryId(e){e.length>0&&(this.currentID=this.libraryId)}},data:function(){return{maximizedToggle:!0,showPluginSettings:(0,z.iH)(""),currentID:(0,z.iH)(null),locked:(0,z.iH)(!1),name:(0,z.iH)(""),path:(0,z.iH)(""),enableScanner:(0,z.iH)(!1),enableInotify:(0,z.iH)(!1),priorityScore:(0,z.iH)(0),newTag:(0,z.iH)(""),tags:(0,z.iH)([]),enabledPlugins:(0,z.iH)([]),componentKey:1,showLoading:(0,z.iH)(!1)}}};var _t=i(3175),kt=i(7887),qt=i(4526),vt=i(136);const St=(0,xe.Z)(bt,[["render",me]]),$t=St;Je()(bt,"components",{QDialog:We.Z,QCard:Pe.Z,QCardSection:Ce.Z,QBtn:Te.Z,QTooltip:Le.Z,QSkeleton:lt.ZP,QInput:Qe.Z,QIcon:Ze.Z,QItem:Ie.Z,QItemSection:He.Z,QItemLabel:Ve.Z,QToggle:_t.Z,QSelect:kt.Z,QSeparator:De.Z,QList:je.Z,QImg:ze.Z,QBar:qt.Z,QSpace:vt.Z}),Je()(bt,"directives",{TouchSwipe:Fe.Z,ClosePopup:Ue.Z});const xt={name:"SettingsLibrary",setup(){(0,V.Z)();const{t:e}=(0,F.QT)();let t=null,i=(0,H.A)(e);function a(){t=i.init()}function n(){i.close()}(0,l.bv)((()=>{a()})),(0,l.Ah)((()=>{n()}))},data(){return{libraryPath:(0,z.iH)(null),libraryPaths:(0,z.iH)(null),newLibraryPath:(0,z.iH)(!1),enableLibraryScanner:(0,z.iH)(null),libraryScanSchedule:(0,z.iH)(null),libraryScanFollowSymlinks:(0,z.iH)(null),concurrentFileTesters:(0,z.iH)(null),runLibraryScanOnStart:(0,z.iH)(null),enableLibraryFileMonitor:(0,z.iH)(null),clearPendingTasksOnStart:(0,z.iH)(null),autoManageCompletedTasks:(0,z.iH)(null),maxAgeOfCompletedTasks:(0,z.iH)(null),alwaysKeepFailedTasks:(0,z.iH)(null)}},methods:{addNewLibraryWithDirectoryBrowser:function(){this.$q.dialog({component:U.Z,componentProps:{dialogHeader:this.$t("headers.selectDirectory"),initialPath:this.libraryPath,listType:"directories"}}).onOk((e=>{if("undefined"!==typeof e.selectedPath&&null!==e.selectedPath){let t=(Math.random()+1).toString(36).substring(7),i=this.$t("components.settings.library.newLibrary")+" ("+t+")",l={library_config:{name:i,path:e.selectedPath}};B()({method:"post",url:(0,J.J4)("v2","settings/library/write"),data:l}).then((e=>{this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200}),this.fetchLibraryPathsList()})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}})).onDismiss((()=>{}))},deleteLibrary:function(e){let t;for(let i=0;i<this.libraryPaths.length;i++)if(i===e){t=this.libraryPaths[i].id;break}1!==t?this.$q.dialog({title:this.$t("headers.confirm"),message:this.$t("components.settings.library.confirmRemove"),cancel:this.$t("navigation.cancel"),ok:this.$t("navigation.yes"),persistent:!0}).onOk((()=>{let e={id:t};B()({method:"delete",url:(0,J.J4)("v2","settings/library/remove"),data:e}).then((e=>{this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200}),this.fetchLibraryPathsList()})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))})):this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.cannotRemoveDefaultLibrary"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})},fetchSettings:function(){B()({method:"get",url:(0,J.J4)("v2","settings/read")}).then((e=>{this.libraryPath=e.data.settings.library_path,this.enableLibraryScanner=e.data.settings.enable_library_scanner,this.libraryScanSchedule=e.data.settings.schedule_full_scan_minutes,this.libraryScanFollowSymlinks=e.data.settings.follow_symlinks,this.concurrentFileTesters=e.data.settings.concurrent_file_testers,this.runLibraryScanOnStart=e.data.settings.run_full_scan_on_start,this.enableLibraryFileMonitor=e.data.settings.enable_inotify,this.clearPendingTasksOnStart=e.data.settings.clear_pending_tasks_on_restart,this.autoManageCompletedTasks=e.data.settings.auto_manage_completed_tasks,this.maxAgeOfCompletedTasks=e.data.settings.max_age_of_completed_tasks,this.alwaysKeepFailedTasks=e.data.settings.always_keep_failed_tasks})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToFetchSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},save:function(){let e={settings:{library_path:this.libraryPath,enable_library_scanner:this.enableLibraryScanner,schedule_full_scan_minutes:this.libraryScanSchedule,follow_symlinks:this.libraryScanFollowSymlinks,concurrent_file_testers:this.concurrentFileTesters,run_full_scan_on_start:this.runLibraryScanOnStart,enable_inotify:this.enableLibraryFileMonitor,clear_pending_tasks_on_restart:this.clearPendingTasksOnStart,auto_manage_completed_tasks:this.autoManageCompletedTasks,max_age_of_completed_tasks:this.maxAgeOfCompletedTasks,always_keep_failed_tasks:this.alwaysKeepFailedTasks}};B()({method:"post",url:(0,J.J4)("v2","settings/write"),data:e}).then((e=>{this.fetchSettings(),this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200})})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},fetchLibraryPathsList:function(){B()({method:"get",url:(0,J.J4)("v2","settings/libraries")}).then((e=>{let t=[];for(let i=0;i<e.data.libraries.length;i++){let l=e.data.libraries[i];t[t.length]={id:l.id,name:l.name,path:l.path,tags:l.tags,locked:l.locked}}this.libraryPaths=t})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToFetchLibraryList"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},configureLibraryPath:function(e){let t=this.libraryPaths[e];this.$q.dialog({component:$t,componentProps:{dialogHeader:this.$t("headers.configureLibrary"),libraryId:t.id}}).onOk((e=>{})).onDismiss((()=>{this.fetchSettings(),this.fetchLibraryPathsList()}))}},created(){this.fetchSettings(),this.fetchLibraryPathsList()}};var Wt=i(9885),Pt=i(8326),Ct=i(8423);const Tt=(0,xe.Z)(xt,[["render",I]]),Lt=Tt;Je()(xt,"components",{QPage:Wt.Z,QForm:Pt.Z,QSkeleton:lt.ZP,QList:je.Z,QItem:Ie.Z,QItemSection:He.Z,QAvatar:it.Z,QItemLabel:Ve.Z,QTooltip:Le.Z,QSeparator:De.Z,QBtn:Te.Z,QBar:qt.Z,QSpace:vt.Z,QToggle:_t.Z,QInput:Qe.Z,QSlider:Ct.Z,QCard:Pe.Z})}}]);