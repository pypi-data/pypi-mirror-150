"use strict";(self["webpackChunkunmanic_frontend"]=self["webpackChunkunmanic_frontend"]||[]).push([[999],{1626:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ue});var n=l(9835),i=l(6970);const a={class:"q-pa-none"},o={class:"row"},s={class:"col q-ma-sm"},u={key:0},r={class:"row"},c={class:"col-6 text-center"},d={class:"col-6 text-center"};function g(e,t,l,g,p,m){const w=(0,n.up)("PluginsInstalledTable"),f=(0,n.up)("q-separator"),v=(0,n.up)("q-btn"),_=(0,n.up)("q-card"),h=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(h,{padding:""},{default:(0,n.w5)((()=>[(0,n._)("div",a,[(0,n._)("div",o,[(0,n._)("div",s,[(0,n.Wm)(w)])]),e.$q.platform.is.mobile?((0,n.wg)(),(0,n.iD)("div",u,[(0,n.Wm)(f,{class:"q-mb-lg"}),(0,n._)("div",r,[(0,n._)("div",c,[(0,n.Wm)(_,{flat:"",bordered:"",onClick:t[0]||(t[0]=t=>e.$router.push("/ui/settings-workers")),class:"q-ma-xs"},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{icon:"navigate_before",flat:""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("navigation.workers")),1)])),_:1})])),_:1})]),(0,n._)("div",d,[(0,n.Wm)(_,{flat:"",bordered:"",onClick:t[1]||(t[1]=t=>e.$router.push("/ui/settings-link")),class:"q-ma-xs"},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{"icon-right":"navigate_next",flat:""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("navigation.link")),1)])),_:1})])),_:1})])])])):(0,n.kq)("",!0)])])),_:1})}const p={class:"row q-gutter-xs q-mt-xs justify-between"},m={class:"col-auto"},w={class:"col-auto",style:{"max-width":"200px"}},f={class:"q-gutter-sm"},v=["innerHTML"],_={class:"row"},h=(0,n._)("div",{class:"col-6 text-right"},[(0,n._)("span",{class:"text-weight-medium"},"Author")],-1),b={class:"col-6 q-px-sm"},k={class:"row"},W=(0,n._)("div",{class:"col-6 text-right"},[(0,n._)("span",{class:"text-weight-medium"},"Version")],-1),q={class:"col-6 q-px-sm"},x={class:"text-grey-8 q-gutter-xs q-mr-lg"},P={key:0},y={key:1},C={class:"text-grey-8 q-gutter-xs"};function I(e,t,l,a,o,s){const u=(0,n.up)("q-btn"),r=(0,n.up)("q-icon"),c=(0,n.up)("q-input"),d=(0,n.up)("q-card-section"),g=(0,n.up)("q-img"),I=(0,n.up)("q-item-section"),$=(0,n.up)("q-item-label"),Z=(0,n.up)("q-tooltip"),z=(0,n.up)("q-separator"),Q=(0,n.up)("q-item"),S=(0,n.up)("q-list"),H=(0,n.up)("q-btn-dropdown"),U=(0,n.up)("q-card"),j=(0,n.up)("PluginInfo"),A=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(U,{flat:""},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:(0,i.C_)(e.$q.platform.is.mobile?"q-px-none":"")},{default:(0,n.w5)((()=>[(0,n._)("div",p,[(0,n._)("div",m,[(0,n.Wm)(u,{onClick:a.openPluginInstaller,class:"",color:"secondary","icon-right":"add",label:e.$t("components.plugins.installPlugins")},null,8,["onClick","label"])]),(0,n._)("div",w,[(0,n.Wm)(c,{filled:"",dense:"",class:"shadow-1",debounce:"300",color:"primary",modelValue:a.filter,"onUpdate:modelValue":t[0]||(t[0]=e=>a.filter=e),placeholder:e.$t("navigation.search")},{append:(0,n.w5)((()=>[(0,n.Wm)(r,{name:"search"})])),_:1},8,["modelValue","placeholder"])])])])),_:1},8,["class"]),(0,n.Wm)(d,{class:(0,i.C_)(e.$q.platform.is.mobile?"q-px-none":"")},{default:(0,n.w5)((()=>[(0,n._)("div",f,[(0,n.Wm)(S,{bordered:"",separator:"",class:"rounded-borders"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.listedPlugins,((t,l)=>((0,n.wg)(),(0,n.j4)(Q,{key:l,class:(0,i.C_)(t.status.update_available?"bg-warning":"")},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{src:t.icon},null,8,["src"])])),_:2},1024),(0,n.Wm)(I,{top:"",class:""},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.name),1)])),_:2},1024),(0,n.Wm)($,{caption:"",lines:"3"},{default:(0,n.w5)((()=>[(0,n._)("span",{innerHTML:t.description},null,8,v)])),_:2},1024)])),_:2},1024),(0,n.Wm)(I,{top:"",class:"gt-xs col-2"},{default:(0,n.w5)((()=>[(0,n.Wm)($,{lines:"1"},{default:(0,n.w5)((()=>[(0,n._)("div",_,[h,(0,n._)("div",b,[(0,n._)("span",{class:(0,i.C_)(e.$q.dark.isActive&&!t.status.update_available?"text-grey-5":"text-grey-8")},(0,i.zw)(t.author),3)])])])),_:2},1024),(0,n.Wm)($,{lines:"1"},{default:(0,n.w5)((()=>[(0,n._)("div",k,[W,(0,n._)("div",q,[(0,n._)("span",{class:(0,i.C_)(e.$q.dark.isActive&&!t.status.update_available?"text-grey-5":"text-grey-8")},(0,i.zw)(t.version),3)])])])),_:2},1024)])),_:2},1024),(0,n.Wm)(I,{center:"",side:""},{default:(0,n.w5)((()=>[(0,n._)("div",x,[t.status.update_available?((0,n.wg)(),(0,n.j4)(u,{key:0,flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"info",icon:"update",onClick:e=>a.updateSinglePlugin(t.id)},null,8,["onClick"])):((0,n.wg)(),(0,n.j4)(u,{key:1,disable:"",flat:"",dense:"",round:"",class:"gt-xs no-pointer-events",size:"12px",color:"positive",icon:"download_done"}))]),(0,n.Wm)(Z,{class:"bg-white text-primary"},{default:(0,n.w5)((()=>[t.status.update_available?((0,n.wg)(),(0,n.iD)("span",P,(0,i.zw)(e.$t("components.plugins.clickToUpdatePlugin")),1)):((0,n.wg)(),(0,n.iD)("span",y,(0,i.zw)(e.$t("components.plugins.pluginUpToDate")),1))])),_:2},1024)])),_:2},1024),(0,n.Wm)(z,{inset:"",vertical:"",class:"q-mx-sm"}),(0,n.Wm)(I,{center:"",side:""},{default:(0,n.w5)((()=>[(0,n._)("div",C,[(0,n.Wm)(H,{flat:"",dense:"",rounded:"",class:"lt-sm",size:"12px","no-icon-animation":"","dropdown-icon":"more_vert"},{default:(0,n.w5)((()=>[(0,n.Wm)(S,null,{default:(0,n.w5)((()=>[(0,n.wy)(((0,n.wg)(),(0,n.j4)(Q,{clickable:"",onClick:e=>a.openPluginInfo(t.id)},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{color:"info",name:"info"})])),_:1}),(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("headers.pluginInfo")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[A]]),t.has_config?(0,n.wy)(((0,n.wg)(),(0,n.j4)(Q,{key:0,clickable:"",onClick:e=>a.openPluginInfo(t.id,"settings")},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{color:"grey-8",name:"tune"})])),_:1}),(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("components.plugins.globalConfiguration")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[A]]):(0,n.kq)("",!0),t.status.update_available?(0,n.wy)(((0,n.wg)(),(0,n.j4)(Q,{key:1,clickable:"",onClick:e=>a.updateSinglePlugin(t.id)},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{color:"warning",name:"update"})])),_:1}),(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("components.plugins.updatePlugin")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[A]]):(0,n.kq)("",!0),(0,n.wy)(((0,n.wg)(),(0,n.j4)(Q,{clickable:"",onClick:e=>a.removeSinglePlugin(t.id)},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{color:"negative",name:"delete"})])),_:1}),(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("components.plugins.removePlugin")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[A]])])),_:2},1024)])),_:2},1024),(0,n.Wm)(u,{flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"secondary",icon:"info",onClick:e=>a.openPluginInfo(t.id)},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{class:"bg-white text-primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("headers.pluginInfo")),1)])),_:1})])),_:2},1032,["onClick"]),(0,n.Wm)(u,{disable:!t.has_config,flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"grey-8",icon:"tune",onClick:e=>a.openPluginInfo(t.id,"settings")},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{class:"bg-white text-primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("components.plugins.globalConfiguration")),1)])),_:1})])),_:2},1032,["disable","onClick"]),(0,n.Wm)(u,{flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"negative",icon:"delete",onClick:e=>a.removeSinglePlugin(t.id)},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{class:"bg-white text-primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("components.plugins.removePlugin")),1)])),_:1})])),_:2},1032,["onClick"])])])),_:2},1024),t.status.update_available?((0,n.wg)(),(0,n.j4)(Z,{key:0,class:"bg-white text-primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("components.plugins.updateAvailable")),1)])),_:1})):(0,n.kq)("",!0)])),_:2},1032,["class"])))),128))])),_:1})])])),_:1},8,["class"])])),_:1}),(0,n.Wm)(j,{showPluginInfo:a.showPluginInfo,showPluginSettings:a.showPluginSettings,onHide:a.closePluginInfo},null,8,["showPluginInfo","showPluginSettings","onHide"])],64)}l(702);var $=l(499),Z=l(6888),z=l(9302),Q=l(9981),S=l.n(Q),H=l(6225),U=l(1577),j=l(282);const A={components:{PluginInfo:H.Z},setup(){const e=(0,z.Z)(),t=(0,$.iH)([]),l=(0,$.iH)(""),i=(0,$.iH)(!1),a=(0,$.iH)({sortBy:"name",descending:!1,page:1,rowsPerPage:50,rowsNumber:10}),o=(0,$.iH)([]),s=(0,$.iH)([]),u=(0,$.iH)(0);function r(){let e="";return 0!==o.value.length&&(e=`${o.value.length} record${o.value.length>1?"s":""} selected of ${t.value.length}`),e}function c(){if(0!==o.value.length){let t=[];for(let e=0;e<o.value.length;e++){let l=o.value[e];t[t.length]=l.id}let n={id_list:t};S()({method:"post",url:(0,Z.J4)("v2","plugins/disable"),data:n}).then((e=>{f({pagination:a.value,filter:l.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be disabled",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}else e.notify({color:"warning",position:"top",message:"Nothing selected",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}function d(t){let n={id_list:t};S()({method:"post",url:(0,Z.J4)("v2","plugins/update"),data:n}).then((e=>{f({pagination:a.value,filter:l.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be updated",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}function g(e){d([e])}function p(t){let n={id_list:t};S()({method:"delete",url:(0,Z.J4)("v2","plugins/remove"),data:n}).then((e=>{f({pagination:a.value,filter:l.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be removed",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}function m(e){p([e])}function w(e){return e.length>280&&(e=e.substring(0,277)+"..."),e=e.split("\n")[0],(0,U.nx)(e)}function f(l){const{page:n,rowsPerPage:o,sortBy:u,descending:r}=l.pagination,c=l.filter;i.value=!0;const d=0===o?a.value.rowsNumber:o,g=(n-1)*o;let p={start:g,length:d,search_value:c,order_by:u,order_direction:r?"desc":"asc"};S()({method:"post",url:(0,Z.J4)("v2","plugins/installed"),data:p}).then((e=>{a.value.rowsNumber=e.data.recordsFiltered,s.value=[];for(let t=0;t<e.data.results.length;t++){let l=e.data.results[t];s.value[t]={id:l.id,plugin_id:l.plugin_id,icon:l.icon,name:l.name,description:w(l.description),tags:l.tags,author:l.author,version:l.version,status:l.status,has_config:l.has_config}}t.value.splice(0,t.value.length,...s.value),a.value.page=n,a.value.rowsPerPage=o,a.value.sortBy=u,a.value.descending=r,i.value=!1})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the installed plugins list",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}const v=(0,$.iH)(""),_=(0,$.iH)("");function h(e,t){v.value="",_.value="";for(let l=0;l<s.value.length;l++){let n=s.value[l];n.id===e&&("settings"===t?_.value=n.plugin_id:v.value=n.plugin_id)}}function b(){v.value="",_.value=""}function k(){e.dialog({component:j.Z,componentProps:{}}).onOk((e=>{})).onDismiss((()=>{f({pagination:a.value,filter:l.value})}))}return(0,n.bv)((()=>{f({pagination:a.value,filter:void 0})})),(0,n.YP)(l,((e,t)=>{f({pagination:a.value,filter:l.value})})),{selected:o,filter:l,loading:i,pagination:a,rows:t,listedPlugins:s,itemOffset:u,getSelectedString:r,onRequest:f,disableSelected:c,updateSinglePlugin:g,removeSinglePlugin:m,openPluginInfo:h,showPluginInfo:v,showPluginSettings:_,closePluginInfo:b,openPluginInstaller:k}}};var D=l(1639),T=l(4458),B=l(3190),J=l(8879),L=l(6611),N=l(2857),V=l(3246),Y=l(490),M=l(1233),O=l(335),F=l(3115),K=l(6858),R=l(926),E=l(2045),G=l(2146),X=l(9984),ee=l.n(X);const te=(0,D.Z)(A,[["render",I]]),le=te;ee()(A,"components",{QCard:T.Z,QCardSection:B.Z,QBtn:J.Z,QInput:L.Z,QIcon:N.Z,QList:V.Z,QItem:Y.Z,QItemSection:M.Z,QImg:O.Z,QItemLabel:F.Z,QTooltip:K.Z,QSeparator:R.Z,QBtnDropdown:E.Z}),ee()(A,"directives",{ClosePopup:G.Z});var ne=l(586),ie=l(9991);const ae={components:{PluginsInstalledTable:le},setup(){const{t:e}=(0,ie.QT)();let t=null,l=(0,ne.A)(e);function i(){t=l.init()}function a(){l.close()}(0,n.bv)((()=>{i()})),(0,n.Ah)((()=>{a()}))}};var oe=l(9885);const se=(0,D.Z)(ae,[["render",g]]),ue=se;ee()(ae,"components",{QPage:oe.Z,QSeparator:R.Z,QCard:T.Z,QBtn:J.Z})}}]);