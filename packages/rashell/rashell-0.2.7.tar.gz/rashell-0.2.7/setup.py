# -*- coding: utf-8 -*-
from setuptools import setup

package_dir = \
{'': 'src'}

packages = \
['rashell']

package_data = \
{'': ['*'], 'rashell': ['grammar_files/*']}

install_requires = \
['prompt-toolkit>=3.0.29,<4.0.0', 'rich>=12.3.0,<13.0.0', 'textX>=3.0.0,<4.0.0']

entry_points = \
{'console_scripts': ['rashell = rashell.rashell:main']}

setup_kwargs = {
    'name': 'rashell',
    'version': '0.2.7',
    'description': 'rashell is a Relational Algebra Shell. It provides a DSL to define and populate relational models and a REPL interface to query relational models using relational algebra operations. This tool is intended for educational use only, to illustrate in a more interactive way the underlying concepts of relational databases',
    'long_description': '# rashell, a **r**elational **a**lgebra **shell**\n\n![PyPI](https://img.shields.io/pypi/v/rashell?label=version)\n![PyPI - License](https://img.shields.io/pypi/l/rashell)\n![PyPI - Python Version](https://img.shields.io/pypi/pyversions/rashell)\n![PyPI - Downloads](https://img.shields.io/pypi/dm/rashell)\n\nrashell is a **R**elational **A**lgebra **Shell**. It provides a domain-specific language (DSL) to define and populate relational models and a read–eval–print loop (REPL) interface to query relational models using relational algebra operations. This tool is intended for educational use only, to illustrate in a more interactive way the underlying concepts of relational databases\n\n## Quick Screencast (Duration 02:27)\n[![asciicast](https://asciinema.org/a/VScdkwtX0gJSeBIjxNvDYds6y.svg)](https://asciinema.org/a/VScdkwtX0gJSeBIjxNvDYds6y)\n## Installation\n\nrashell can be installed via ```pip```:\n\n```shell\n$ pip install rashell\n```\n\n## Getting started\nrashell can be executed by running the ```rashell``` command from a terminal. You will be taken to a REPL interface that allows you define, populate and query relational models:\n\n```shell\n$ rashell\nWelcome to rashell, an interactive relational algebra shell\nAuthor: Salim Kebir <s.kebir@esti-annaba.dz>\nGitHub: https://github.com/skebir/rashell\n>>> \n```\n\nYou can issue the ```.exit``` command to exit rashell.\n\n## Defining a relational model\n> By default multiline mode is enabled in order to be able to define several relationships at the same time. Multiline mode can be disabled/enabled by pressing the <kbd>F3</kbd> key. To execute an instruction in multiline mode, you must use the <kbd>alt + enter</kbd> combination. Otherwise, simply use <kbd>enter</kbd> if multiline mode is disabled.\n\nYou can define a relational model as illustrated in the following example:\n\n```shell\n>>> Movie(_Code, Title, Genre, Year, #DirectorID) \n      DirectorID references Director.ID\n    Director(_ID, Name, Nationality)\n>>> \n```\nThe syntax for defining a relational model is, as you can see, self-describing:\n- A relation is defined by specifying its name followed by a parenthesis and then the list of attributes separated by a comma.\n- The attributes that form the primary key must be preceded by the symbol ```_```\n- Foreign key attributes must be preceded by the ```#``` symbol and the attribute they reference must be specified just after the definition of the Relation.\n\n## Inserting/Deleting tuples\n> It may be better to disable the multiline mode (<kbd>F3</kbd> key) from here because each of the following instructions are single-lined.\n> \nOnce you have defined your relational model, you can populate it using the ```insert``` command as follows:\n\n```shell\n>>> Director.insert(1, \'Robert Zemeckis\', \'US\')\n>>> Director.insert(2, \'Stanley Kubrick\', \'US\')\n>>> Director.insert(3, \'David Lynch\', \'US\')\n>>> Director.insert(4, \'Luc besson\', \'FR\')\n>>> Movie.insert(0120663, \'Eyes wide shut\' , \'Drame\' , 1999, 2)\n>>> Movie.insert(0116922, \'Lost Highway\' , \'Thriller\', 1997, 3)\n>>> Movie.insert(0110413, \'Leon\' , \'Crime\' , 1994, 4)\n>>> Movie.insert(2872732, \'Lucy\' , \'Action\' , 2014, 4)\n>>> Movie.insert(0119116, \'The Fifth Element\', \'Action\' , 1997, 4)\n>>> Movie.insert(0166924, \'Mullholland Drive\' , \'Thriller\', 2001, 3)\n>>> Movie.insert(0062622, "2001: A Space Odyssey", \'Adventure\', 1968, 2) \n>>> Movie.insert(0081505, \'The shining\' , \'Horror\' , 1980, 2)\n>>> Movie.insert(0109830, \'Forrest Gump\' , \'Drame\' , 1994, 1)\n>>> Movie.insert(0118884, \'Contact\' , \'Drame\' , 1997, 1)\n>>> Movie.insert(0066921, \'A Clockwork Orange\' , \'Crime\' , 1971, 2)\n>>> Movie.insert(0093058, \'Full Metal Jacket\' , \'War\' , 1987, 2)\n>>> Movie.insert(0090756, \'Blue Velvet\' , \'Mystery\' , 1986, 3)\n>>> Movie.insert(0088763, \'Back to the future\', \'Adventure\', 1985, 1)\n>>> \n```\n\n> At this stage of development, rashell only supports three data types: integers, strings and floats. It is unlikely that other data types will be supported in the future as this tool is purely educational.\n\nThe ```insert``` command can fail in four cases:\n- If the relation does not exist ;\n- If the number of issued values is different from the number of attributes of the relation ;\n- If the primary key constraint fail ;\n- If the foreign key constraint fail. In this case, we can force the insertion by using the ```force_insert``` instruction instead as illustrated in the following example:\n\n```shell\n >>> Movie.insert(0111161, \'The Shawshank Redemption\', \'Drama\', 1994, 5)\nLine 1: Foreign Key constraint failed 5\n>>> Movie.force_insert(0111161, \'The Shawshank Redemption\', \'Drama\', 1994, 5)\n>>>\n ```\n\nTo delete tuples, you can use the ```delete``` command with a condition as the only parameter as illustrated below:\n\n```shell\n>>> Movie.delete(Year < 2000)\n>>> Movie\n ──────────────────────────────────────────────────────────── \n   Code           Title          Genre     Year   DirectorID  \n ──────────────────────────────────────────────────────────── \n  2872732         Lucy           Action    2014       4       \n  166924    Mullholland Drive   Thriller   2001       3       \n ──────────────────────────────────────────────────────────── \n>>>\n```\n\nLike ```insert```, the ```delete``` command can fail because of foreign key constraints. To force deletion, the ```force_delete``` command can be used as shown below:\n\n```shell\n>>> Director.delete(Nationality = \'FR\')\nLine 1: Foreign Key constraint failed {4}\n>>> Director.force_delete(Nationality = \'FR\')\n>>> Director\n ──────────────────────────────────── \n  Id        Name         Nationality  \n ──────────────────────────────────── \n  1    Robert Zemeckis       US       \n  3      David Lynch         US       \n  2    Stanley Kubrick       US       \n ──────────────────────────────────── \n>>>\n```\n\n## Displaying relations and relational model\nYou can check that the relations you have populated actually contain the tuples you have added by entering the name of the relation followed by the <kbd>enter</kbd> key (or <kbd>alt + enter</kbd> if you have not disabled multiline mode) as illustrated below:\n\n```shell\n>>> Director\n ──────────────────────────────────── \n  Id        Name         Nationality  \n ──────────────────────────────────── \n  4      Luc besson          FR       \n  3      David Lynch         US       \n  1    Robert Zemeckis       US       \n  2    Stanley Kubrick       US       \n ──────────────────────────────────── \n>>> Movie\n ───────────────────────────────────────────────────────────────── \n   Code             Title             Genre     Year   DirectorID  \n ───────────────────────────────────────────────────────────────── \n  118884           Contact            Drama     1997       1       \n   90756         Blue Velvet         Mystery    1986       3       \n   81505         The shining         Horror     1980       2       \n  110413            Leon              Crime     1994       4       \n  116922        Lost Highway        Thriller    1997       3       \n   66921     A Clockwork Orange       Crime     1971       2       \n   93058      Full Metal Jacket        War      1987       2       \n  109830        Forrest Gump          Drama     1994       1       \n  2872732           Lucy             Action     2014       4       \n  120663       Eyes wide shut         Drama     1999       2       \n  166924      Mullholland Drive     Thriller    2001       3       \n   62622    2001: A Space Odyssey   Adventure   1968       2       \n  119116      The Fifth Element      Action     1997       4       \n ───────────────────────────────────────────────────────────────── \n>>>\n```\n\nYou can also display the specification of your relational model to see what relations exist by running the command ```.model```. Moreover, it is possible to display the relational model in its raw form (i.e. that can be copied and pasted as a command in rashell) by using the command ```.raw_model``` as illustrated in the following example:\n\n```shell\n>>> .model\n╭──────────────────────────────────────────────╮\n│ Director(Id, Name, Nationality)              │\n│ Movie(Code, Title, Genre, Year, #DirectorID) │\n│     DirectorID references Director.Id        │\n╰──────────────────────────────────────────────╯\n>>> .raw_model\nDirector(_Id, Name, Nationality)\nMovie(_Code, Title, Genre, Year, #DirectorID)\n    DirectorID references Director.Id\n>>>\n```\n\n## Querying the relational model\nAt this stage, it is now possible to query your relational model using standard relational algebra operations (projection, restriction, join, union, intersection, difference and cartesian product). The table below shows the symbol, meaning and syntax of each of the relational algebra operations supported by rashell:\n\n| Operation | Meaning           | Syntax/Example                           |\n|:---------:|-------------------|------------------------------------------|\n| ``` π ``` | Projection        | ``` π Name, Nationality (Director) ```   |\n| ``` σ ``` | Restriction       | ``` σ Year > 2015 (Movie) ```            |\n| ``` ⋈ ``` | Join              | ``` Movie ⋈ Director \\| DirectorID = ID``` |\n| ``` U ``` | Union             | ``` HorrorMovies U ComedyMovies ```      |\n| ``` ∩ ``` | Intersection      | ``` HorrorMovies ∩ ComedyMovies ```      |\n| ``` - ``` | Difference        | ``` LynchMovies - ComedyMovies ```       |\n| ``` X ``` | Cartesian Product | ``` Movie X Director ```                 |\n\n> It may be difficult to write some symbols such as ⋈, σ, π, and ∩ using a combination of keys. To remedy this, rashell allows you to quickly insert an operation by pressing the <kbd>tab</kbd> key.\n\nThe result of an operation is displayed immediately after its execution as below:\n\n```shell\n>>> π Title, Year (Movie)\n ────────────────────────────── \n          Title           Year  \n ────────────────────────────── \n  2001: A Space Odyssey   1968  \n   Back to the future     1985  \n     Eyes wide shut       1999  \n       The shining        1980  \n    Mullholland Drive     2001  \n         Contact          1997  \n          Leon            1994  \n      Forrest Gump        1994  \n       Blue Velvet        1986  \n   A Clockwork Orange     1971  \n      Lost Highway        1997  \n    Full Metal Jacket     1987  \n          Lucy            2014  \n    The Fifth Element     1997  \n ────────────────────────────── \n>>>\n```\n\nThe result can also be assigned to a temporary relation as below:\n\n```shell\n>>> R1 = π Title, Year (Movie)\n>>>\n```\nThis will create a new temporary relation called ```R1``` which can in turn be displayed and/or queried using the previous relational algebra operations.\n\n## Loading a relational model from a file\nIt is also possible to open a pre-populated relational model by specifying at the beginning of the file the relational model followed by zero or more insert/relational algebra operations. The following is the content of a file called ```movies.ra``` (which can be found in the ```examples``` folder of this repository) :\n\n```shell\nMovie(_Code, Title, Genre, Year, #DirectorID)\n  DirectorID references Director.Id\nDirector(_Id, Name, Nationality)\n\nDirector.insert(1, \'Robert Zemeckis\', \'US\')\nDirector.insert(2, \'Stanley Kubrick\', \'US\')\nDirector.insert(3, \'David Lynch\', \'US\')\nDirector.insert(4, \'Luc besson\', \'FR\')\n\nMovie.insert(0120663, \'Eyes wide shut\' , \'Drama\' , 1999, 2)\nMovie.insert(0116922, \'Lost Highway\' , \'Thriller\', 1997, 3)\nMovie.insert(0110413, \'Leon\' , \'Crime\' , 1994, 4)\nMovie.insert(2872732, \'Lucy\' , \'Action\' , 2014, 4)\nMovie.insert(0119116, \'The Fifth Element\', \'Action\' , 1997, 4)\nMovie.insert(0166924, \'Mullholland Drive\' , \'Thriller\', 2001, 3)\nMovie.insert(0062622, "2001: A Space Odyssey", \'Adventure\', 1968, 2) \nMovie.insert(0081505, \'The shining\' , \'Horror\' , 1980, 2)\nMovie.insert(0109830, \'Forrest Gump\' , \'Drama\' , 1994, 1)\nMovie.insert(0118884, \'Contact\' , \'Drama\' , 1997, 1)\nMovie.insert(0066921, \'A Clockwork Orange\' , \'Crime\' , 1971, 2)\nMovie.insert(0093058, \'Full Metal Jacket\' , \'War\' , 1987, 2)\nMovie.insert(0090756, \'Blue Velvet\' , \'Mystery\' , 1986, 3)\nMovie.insert(0088763, \'Back to the future\', \'Adventure\', 1985, 1)\n```\n\nTo open a file, you just have to specify its name when running rashell. If the file contains no syntactic or semantic errors, the relational model will be displayed immediately as illustrated below:\n\n```shell\n$ rashell examples/movies.ra \nWelcome to rashell, an interactive relational algebra shell\nAuthor: Salim Kebir <s.kebir@esti-annaba.dz>\nGitHub: https://github.com/skebir/rashell\n╭──────────────────────────────────────────────╮\n│ Movie(Code, Title, Genre, Year, #DirectorID) │\n│     DirectorID references Director.Id        │\n│ Director(Id, Name, Nationality)              │\n╰──────────────────────────────────────────────╯\n>>>\n```\n\n\n## Keyboard Shortcuts\n- <kbd>F3</kbd> Toggle multiline mode\n- <kbd>tab</kbd> Insert operation\n- <kbd>alt + enter</kbd> Run command when multiline mode is enabled\n- <kbd>enter</kbd> Run command when multiline mode is disabled\n- <kbd>control + l</kbd> Clear screen\n- <kbd>control + d</kbd> Exit rashell\n\n## Acknowledgments\nWe would like to thank the contributors of the following packages without whom rashell would not have been possible:\n- **Python Prompt Toolkit** : https://github.com/prompt-toolkit/python-prompt-toolkit\n- **textX** : https://github.com/textX/textX\n- **Rich** : https://github.com/Textualize/rich',
    'author': 'Salim Kebir',
    'author_email': 's.kebir@esti-annaba.dz',
    'maintainer': None,
    'maintainer_email': None,
    'url': 'https://github.com/skebir/rashell',
    'package_dir': package_dir,
    'packages': packages,
    'package_data': package_data,
    'install_requires': install_requires,
    'entry_points': entry_points,
    'python_requires': '>=3.8,<4.0',
}


setup(**setup_kwargs)
