(this.webpackJsonpui_v2=this.webpackJsonpui_v2||[]).push([[16],{1331:function(e,n,t){},1371:function(e,n,t){"use strict";t.r(n);var r=t(6),l=t(0),a=t.n(l),u=t(99),i=t(230),o=t(138),c=t(9),s=t(243),d=t(244),v=t(615),f=(t(1331),t(1));function g(e){var n,t,l,g,b,j=e.isRunLogsLoading,L=e.runHash,m=e.runLogs,p=e.inProgress,x=e.updatedLogsCount,O=a.a.useRef(null),R=a.a.useRef(null),T=a.a.useRef(null),k=a.a.useRef({}),I=a.a.useRef({}),N=a.a.useState("default"),H=Object(r.a)(N,2),S=H[0],_=H[1],y=a.a.useRef(null),w=a.a.useRef(null),D=a.a.useState(0),E=Object(r.a)(D,2),W=E[0],C=E[1],P=a.a.useState(0),z=Object(r.a)(P,2),B=z[0],J=z[1],U=a.a.useState(null),q=Object(r.a)(U,2),A=q[0],F=q[1],G=a.a.useRef(null);function K(){if(p){var e=setInterval((function(){var e,n;_("live-update"),I.current=v.a.getRunLogs({runHash:L,record_range:w.current?"".concat(+(null===(e=y.current)||void 0===e?void 0:e[1])>5?+(null===(n=y.current)||void 0===n?void 0:n[1])-5:0,":"):"",isLiveUpdate:!0}),I.current.call()}),3e3);O.current={intervalToken:e}}}return a.a.useEffect((function(){return I.current=v.a.getRunLogs({runHash:L}),I.current.call(),K(),function(){var e;I.current.abort(),(null===(e=O.current)||void 0===e?void 0:e.intervalToken)&&clearInterval(O.current.intervalToken)}}),[]),a.a.useEffect((function(){var e;!p&&(null===(e=O.current)||void 0===e?void 0:e.intervalToken)&&clearInterval(O.current.intervalToken)}),[p]),a.a.useEffect((function(){var e=u.a.sortBy(Object.values(null!==m&&void 0!==m?m:{}),"index"),n=u.a.sortBy(e.map((function(e){return e.index})));y.current=[n[0],n[n.length-1]],F(n),w.current=e}),[m]),a.a.useEffect((function(){var e,n,t;if("load-more"===S)null===(n=k.current)||void 0===n||null===(t=n.scrollToItem)||void 0===t||t.call(n,G.current[0]+x,"start");else if("live-update"===S&&G.current[1]+x>=(null===(e=w.current)||void 0===e?void 0:e.length)-1||"default"===S){var r,l,a;null===(r=k.current)||void 0===r||null===(l=r.scrollToItem)||void 0===l||l.call(r,(null===(a=w.current)||void 0===a?void 0:a.length)-1,"end")}else{var u,i;null===(u=k.current)||void 0===u||null===(i=u.scrollToItem)||void 0===i||i.call(u,G.current[0],"start")}}),[null===(n=w.current)||void 0===n?void 0:n.length,k.current]),Object(d.a)((function(){R.current&&(C(R.current.offsetHeight),J(R.current.offsetWidth))}),R),Object(f.jsx)(c.a,{children:Object(f.jsx)(o.a,{isLoading:j||u.a.isNil(m),className:"runDetailParamsTabLoader",height:"100%",children:u.a.isEmpty(m)?Object(f.jsx)(s.a,{size:"xLarge",className:"runDetailParamsTabLoader",title:"No Logs"}):Object(f.jsx)("div",{className:"RunDetailLogsTabWrapper",children:Object(f.jsx)("div",{className:"RunDetailLogsTab",children:Object(f.jsx)("div",{className:"Logs",ref:T,children:Object(f.jsx)("div",{ref:R,className:"Logs__wrapper",children:Object(f.jsx)(i.c,{ref:k,height:(null===(g=R.current)||void 0===g?void 0:g.offsetHeight)||100,itemCount:null===(b=w.current)||void 0===b?void 0:b.length,itemSize:function(){return 16.5},width:"100%",overscanCount:100,onItemsRendered:function(e){G.current=[e.visibleStartIndex,e.visibleStopIndex]},itemData:{logsList:w.current,parentHeight:W,parentWidth:B,keysList:A},onScroll:function(e){var n,t,r,l;0===e.scrollOffset&&0!==+A[0]&&"backward"===e.scrollDirection&&((null===(n=O.current)||void 0===n?void 0:n.intervalToken)&&(clearInterval(O.current.intervalToken),I.current.abort()),_("load-more"),I.current=v.a.getRunLogs({runHash:L,record_range:"".concat(+(null===(t=y.current)||void 0===t?void 0:t[0])>100?+(null===(r=y.current)||void 0===r?void 0:r[0])-100:0,":").concat(null===(l=y.current)||void 0===l?void 0:l[0]),isLiveUpdate:!0}),I.current.call(),K())},children:h},(null===(t=T.current)||void 0===t?void 0:t.offsetHeight)+(null===(l=T.current)||void 0===l?void 0:l.offsetWidth))})})})})})})}function h(e){var n,t,r,l,a=e.index,u=e.style,i=e.data;return Object(f.jsx)("div",{style:u,children:Object(f.jsx)("pre",{className:"LogRow__line line".concat(null===(n=i.logsList)||void 0===n||null===(t=n[a])||void 0===t?void 0:t.index),children:null===(r=i.logsList)||void 0===r||null===(l=r[a])||void 0===l?void 0:l.value})})}g.displayName="RunLogsTab";var b=a.a.memo(g);n.default=b}}]);
//# sourceMappingURL=RunLogsTab.js.map?version=e6a96821a7b2dec532f0